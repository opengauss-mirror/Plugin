create schema db_b_ord_test;
set current_schema to 'db_b_ord_test';
-- test 1 byte
select ord('1111');
 ord 
-----
  49
(1 row)

select ord('sss111');
 ord 
-----
 115
(1 row)

-- test 2 byte
select ord('≈∂1111');
  ord  
-------
 50614
(1 row)

select ord('ﬂ∑1111');
  ord  
-------
 57271
(1 row)

-- test 3 byte
select ord('‡¶Ö1111');
   ord    
----------
 14722693
(1 row)

select ord('Í¨§1111');
   ord    
----------
 15379620
(1 row)

-- test 4 byte
select ord('íÅñ1111');
    ord     
------------
 4036133270
(1 row)

select ord('ìÉî1111');
    ord     
------------
 4036199316
(1 row)

-- test number
select ord(11111);
 ord 
-----
  49
(1 row)

select ord(99999);
 ord 
-----
  57
(1 row)

-- test empty
select ord('');
 ord 
-----
   0
(1 row)

-- test bit
select ord(b'1');
 ord 
-----
   1
(1 row)

select ord(b'1000100110');
 ord 
-----
   2
(1 row)

-- test numeric
select ord(1);
 ord 
-----
  49
(1 row)

select ord(-9);
 ord 
-----
  45
(1 row)

select ord(111111111111111111111111111111111111111111111111111111111111111111111111111111111);
 ord 
-----
  49
(1 row)

select ord(111111111111111111111111111111111111111111111111111111111111111111111111111111111.1);
 ord 
-----
  49
(1 row)

select ord(1111111111111111111111111111111111111111111111111111111111111111111111111111111111);
WARNING:  numeric out of range
CONTEXT:  referenced column: ord
 ord 
-----
  57
(1 row)

select ord(1111111111111111111111111111111111111111111111111111111111111111111111111111111111.11);
WARNING:  numeric out of range
CONTEXT:  referenced column: ord
 ord 
-----
  57
(1 row)

select ord(-1111111111111111111111111111111111111111111111111111111111111111111111111111111111.11);
WARNING:  numeric out of range
CONTEXT:  referenced column: ord
 ord 
-----
  45
(1 row)

set dolphin.sql_mode = '';
select ord(1111111111111111111111111111111111111111111111111111111111111111111111111111111111);
WARNING:  numeric out of range
CONTEXT:  referenced column: ord
 ord 
-----
  57
(1 row)

select ord(-1111111111111111111111111111111111111111111111111111111111111111111111111111111111);
WARNING:  numeric out of range
CONTEXT:  referenced column: ord
 ord 
-----
  45
(1 row)

-- test from table
create table test_ord (name text);
insert into test_ord values('1234'), ('Â¨¥Êîø'), ('ìÉîìÉòìÉ≤ìÉ∞');
select ord(name) from test_ord;
    ord     
------------
         49
   15051956
 4036199316
(3 rows)

drop schema db_b_ord_test cascade;
NOTICE:  drop cascades to table test_ord
reset current_schema;
