create schema db_field;
set current_schema to 'db_field';
select field(4,1,2,3,4);
 field 
-------
     4
(1 row)

select field(2,1.1,2.1,3.1);
 field 
-------
     0
(1 row)

select field(2,'1','2','3','4');
 field 
-------
     2
(1 row)

select field(3.1,1,2,3,4);
 field 
-------
     0
(1 row)

select field('2a','1','2','3','4');
 field 
-------
     0
(1 row)

select field('2a',1,'2','3','4');
 field 
-------
     2
(1 row)

select field(1,'1a', 2);
 field 
-------
     1
(1 row)

select field('ceshi.000','wo','ceshi','disange');
 field 
-------
     0
(1 row)

select field(true,'1a', 2);
 field 
-------
     1
(1 row)

select field(true,1, 2);
 field 
-------
     1
(1 row)

select field(true);
ERROR:  Incorrect parameter count in the call to native function 'field'
CONTEXT:  referenced column: field
select field('sdhfgs','dhgf', 2);
 field 
-------
     1
(1 row)

select field('sdhfgs','dhgf', '2');
 field 
-------
     0
(1 row)

select field('sdhfgs',null,1,'dhgf', '2');
 field 
-------
     3
(1 row)

select field('测试',null,1,'dhgf', '2');
 field 
-------
     3
(1 row)

select field(' ','@',null,' ','',' ');
 field 
-------
     3
(1 row)

create table tb_1116592(c1 int, c2 varchar, c3 text);
insert into tb_1116592 values(1, 'test1', 'city1');
insert into tb_1116592 values(2, 'test2', 'city2');
insert into tb_1116592 values(3, 'test3', 'city3');
insert into tb_1116592 values(4, 'test4', 'city4');
insert into tb_1116592 values(5, 'test5', 'city5');
insert into tb_1116592 values(6, 'test1', 'city3');
insert into tb_1116592 values(7, 'test3', 'city2');
insert into tb_1116592 values(8, 'test5', 'city1');
insert into tb_1116592 values(9, 'test2', 'city2');
insert into tb_1116592 values(10, 'test4', 'city4');
insert into tb_1116592 values(11, NULL, 'city5');
select *,field(c1, 1) from tb_1116592 order by field(c1, 1),c1;
 c1 |  c2   |  c3   | field 
----+-------+-------+-------
  2 | test2 | city2 |     0
  3 | test3 | city3 |     0
  4 | test4 | city4 |     0
  5 | test5 | city5 |     0
  6 | test1 | city3 |     0
  7 | test3 | city2 |     0
  8 | test5 | city1 |     0
  9 | test2 | city2 |     0
 10 | test4 | city4 |     0
 11 |       | city5 |     0
  1 | test1 | city1 |     1
(11 rows)

select *,field(c2, 'test2') from tb_1116592 order by field(c2, 'test2'),c1;
 c1 |  c2   |  c3   | field 
----+-------+-------+-------
  1 | test1 | city1 |     0
  3 | test3 | city3 |     0
  4 | test4 | city4 |     0
  5 | test5 | city5 |     0
  6 | test1 | city3 |     0
  7 | test3 | city2 |     0
  8 | test5 | city1 |     0
 10 | test4 | city4 |     0
 11 |       | city5 |     0
  2 | test2 | city2 |     1
  9 | test2 | city2 |     1
(11 rows)

select *,field(c3, 'city1') from tb_1116592 order by field(c3, 'city1'),c1;
 c1 |  c2   |  c3   | field 
----+-------+-------+-------
  2 | test2 | city2 |     0
  3 | test3 | city3 |     0
  4 | test4 | city4 |     0
  5 | test5 | city5 |     0
  6 | test1 | city3 |     0
  7 | test3 | city2 |     0
  9 | test2 | city2 |     0
 10 | test4 | city4 |     0
 11 |       | city5 |     0
  1 | test1 | city1 |     1
  8 | test5 | city1 |     1
(11 rows)

drop table tb_1116592;
drop schema db_field cascade;
reset current_schema;
