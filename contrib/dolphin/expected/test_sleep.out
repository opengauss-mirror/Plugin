create schema test_sleep;
set current_schema to 'test_sleep';
select sleep(1);
 sleep 
-------
     0
(1 row)

select sleep(2);
 sleep 
-------
     0
(1 row)

create table sleep_test(a text);
-- 非严格模式，参数不合法，报warning，返回0
set dolphin.sql_mode = 'sql_mode_full_group';
select sleep(-1);
WARNING:  Incorrect arguments to sleep.
CONTEXT:  referenced column: sleep
 sleep 
-------
     0
(1 row)

select sleep(null);
WARNING:  Incorrect arguments to sleep.
CONTEXT:  referenced column: sleep
 sleep 
-------
     0
(1 row)

select sleep('a');
WARNING:  invalid input syntax for type double precision: "a"
LINE 1: select sleep('a');
                     ^
CONTEXT:  referenced column: sleep
 sleep 
-------
     0
(1 row)

insert into sleep_test values(sleep(-1));
WARNING:  Incorrect arguments to sleep.
CONTEXT:  referenced column: a
insert into sleep_test values(sleep(null));
WARNING:  Incorrect arguments to sleep.
CONTEXT:  referenced column: a
-- 严格模式，参数不合法，报error
set dolphin.sql_mode = 'sql_mode_strict';
select sleep(-1);
ERROR:  Incorrect arguments to sleep.
CONTEXT:  referenced column: sleep
select sleep(null);
ERROR:  Incorrect arguments to sleep.
CONTEXT:  referenced column: sleep
select sleep('a');
WARNING:  invalid input syntax for type double precision: "a"
LINE 1: select sleep('a');
                     ^
CONTEXT:  referenced column: sleep
 sleep 
-------
     0
(1 row)

insert into sleep_test values(sleep(-1));
ERROR:  Incorrect arguments to sleep.
CONTEXT:  referenced column: a
insert into sleep_test values(sleep(null));
ERROR:  Incorrect arguments to sleep.
CONTEXT:  referenced column: a
insert ignore into sleep_test values(sleep(-1));
WARNING:  Incorrect arguments to sleep.
CONTEXT:  referenced column: a
insert ignore into sleep_test values(sleep(null));
WARNING:  Incorrect arguments to sleep.
CONTEXT:  referenced column: a
set dolphin.sql_mode = '';
select sleep('0000-00-00'::date);
 sleep 
-------
     0
(1 row)

drop schema test_sleep cascade;
NOTICE:  drop cascades to table sleep_test
reset current_schema;
