drop database if exists test_json_depth;
NOTICE:  database "test_json_depth" does not exist, skipping
create database test_json_depth dbcompatibility 'B';
\c test_json_depth
select json_depth('{}');
 json_depth 
------------
          1
(1 row)

select json_depth('[]');
 json_depth 
------------
          1
(1 row)

select json_depth('[10,20]');
 json_depth 
------------
          2
(1 row)

select json_depth('[{},[]]');
 json_depth 
------------
          2
(1 row)

select json_depth('true');
 json_depth 
------------
          1
(1 row)

select json_depth('null');
 json_depth 
------------
          1
(1 row)

select json_depth('[}');
ERROR:  invalid input syntax for type json
DETAIL:  Expected JSON value, but found "}".
CONTEXT:  JSON data, line 1: [}
referenced column: json_depth
select json_depth('true');
 json_depth 
------------
          1
(1 row)

select json_depth('"dan"');
 json_depth 
------------
          1
(1 row)

select json_depth('null');
 json_depth 
------------
          1
(1 row)

select json_depth('[[1,{"a":1}],[1],[[[[[1]]]]]]');
 json_depth 
------------
          7
(1 row)

select json_depth('[2,[2],[],{"a":1,"b":{"c":"daf"}}]');
 json_depth 
------------
          4
(1 row)

select json_depth('[2,[2],[],{"a":1,"b":{"c":"d[{]{af"}}]');
 json_depth 
------------
          4
(1 row)

SELECT JSON_DEPTH('[10, {"a": 20}]');
 json_depth 
------------
          3
(1 row)

SELECT JSON_DEPTH('[10,{"a":1,"b":{"d":2,"e":{"balec":"bule"}}}]');
 json_depth 
------------
          5
(1 row)

select json_depth('{          }');
 json_depth 
------------
          1
(1 row)

select json_depth('{"a":{"b":2},"c":3}');
 json_depth 
------------
          3
(1 row)

select json_depth('{"a":{"b":{"c":{"d":{"e":{"f":2}}}}},"c":3}');
 json_depth 
------------
          7
(1 row)

select json_depth('[[[[[[[1]]]]]],2,3,4,5]');
 json_depth 
------------
          8
(1 row)

select json_depth('{"a":[{"b":2},3]}');
 json_depth 
------------
          4
(1 row)

create table test1(data json);
insert into test1 values('{"a":1}');
insert into test1 values('{"a":1}');
insert into test1 values('[1,{"a":1},{"a":1,"B":{"c":1}}]');
select *from test1;
              data               
---------------------------------
 {"a":1}
 {"a":1}
 [1,{"a":1},{"a":1,"B":{"c":1}}]
(3 rows)

select json_depth(data) from test1;
 json_depth 
------------
          2
          2
          4
(3 rows)

drop table test1;
\c postgres
drop database if exists test_json_depth;
