create schema test_set_password;
set current_schema to 'test_set_password';
set b_compatibility_user_host_auth to on;
set password = 'abc@1234';
NOTICE:  The iteration value of password is not recommended.Setting the iteration value too small reduces the security of the password, and setting it too large results in performance degradation.
set password for current_user() = 'abc@2345';
NOTICE:  The iteration value of password is not recommended.Setting the iteration value too small reduces the security of the password, and setting it too large results in performance degradation.
create user user1 password 'abc@1234';
NOTICE:  The iteration value of password is not recommended.Setting the iteration value too small reduces the security of the password, and setting it too large results in performance degradation.
set password for user1 = 'abc@2345';
NOTICE:  The iteration value of password is not recommended.Setting the iteration value too small reduces the security of the password, and setting it too large results in performance degradation.
set session authorization user1 password 'abc@2345';
set password for 'user1'@'%' = 'abc@3456' replace 'abc@2345';
ERROR:  Permission denied.
set session authorization user1 password 'abc@3456';
ERROR:  Invalid username/password,set session_authorization denied.
set password for 'user1'@'%' = PASSWORD('abc@4567') replace 'abc@3456';
ERROR:  Permission denied.
set session authorization user1 password 'abc@4567';
ERROR:  you are not allowed to do that operation immediately, please try again later
reset session authorization;
create user `backquoteuser` identified by 'Gauss@123';
NOTICE:  The iteration value of password is not recommended.Setting the iteration value too small reduces the security of the password, and setting it too large results in performance degradation.
set password for `backquoteuser`='test-1234';
NOTICE:  The iteration value of password is not recommended.Setting the iteration value too small reduces the security of the password, and setting it too large results in performance degradation.
set password for `backquoteuser`='test-12345' replace 'test-1234';
NOTICE:  The iteration value of password is not recommended.Setting the iteration value too small reduces the security of the password, and setting it too large results in performance degradation.
select object_name,detail_info from pg_query_audit('2022-01-13 9:30:00', '2031-12-12 22:00:00') where object_name = 'backquoteuser';
  object_name  |                      detail_info                      
---------------+-------------------------------------------------------
 backquoteuser | create user `backquoteuser` identified by '********';
 backquoteuser | set password for `backquoteuser`=********
 backquoteuser | set password for `backquoteuser`=********
(3 rows)

\c contrib_regression
drop user user1;
drop user backquoteuser;
drop schema test_set_password cascade;
reset current_schema;
