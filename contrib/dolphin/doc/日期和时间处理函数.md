## 兼容mysql日期和时间处理函数

在兼容的日期和时间处理函数中，curdate\(\),current_time,current_time\(n\),current_timestamp,current_timestamp\(n\),localtime,localtime(n),localtimestamp,localtimestamp\(n\)以及now\(n\)默认都返回SQL语句执行开始的时间，并且都受GUC参数b\_db\_timestamp控制。

当b\_db\_timestamp参数为零时，上述函数返回正常的语句开始执行的时间；当b\_db\_timestamp参数为非零的合法值时，上述函数以该GUC参数的值作为秒数偏移，返回1970年01月01日 00:00:00 UTC + 秒数偏移 + 当前时区偏移的对应时间。

**事务开始时间，SQL语句开始执行时间，系统实时时间的区别：**

事务开始时间在同一事务中相同。

SQL语句开始执行时间在同一SQL语句中是相同的，但在一个事务中的不同SQL语句之间不同。

系统实时时间则只在函数调用时候读取操作系统当前时间，在同一事务的同一SQL语句中多次调用同一系统实时时间函数的返回值也是不同的。
- curdate\(\)

    描述：返回语句开始执行的日期。

    返回值类型：date

    实例：

    ```
    my_db=# select curdate();
    curdate
    ------------
    2022-07-21
    (1 row)
    ```

- current_time

    描述：返回语句开始执行的时间。

    返回值类型：time

    实例：

    ```
    my_db=# select current_time;
    current_time
    --------------
    16:56:02
    (1 row)
    ```

- current_time\(n\)

    描述：返回语句开始执行的时间，n为精度，最大值取6。

    返回值类型：time

    实例：

    ```
    my_db=# select current_time(3);
     current_time(3)
    -----------------
    16:57:23.255
    (1 row)

    my_db=# select current_time();
     current_time()
    ----------------
    17:05:01
    (1 row)
    ```

- curtime\(n\)

    描述：返回语句开始执行的时间，n为精度，最大值取6。

    返回值类型：time

    实例：

    ```
    my_db=# select curtime(3);
    curtime(3)
    --------------
    17:45:33.844
    (1 row)

    my_db=# select curtime();
    curtime()
    -----------
    17:45:54
    (1 row)
    ```

- current_timestamp

    描述：返回语句开始执行的时间戳。

    返回值类型：datetime

    实例：

    ```
    my_db=# select current_timestamp;
      current_timestamp
    ---------------------
    2022-07-21 16:59:38
    (1 row)
    ```

- current_timestamp\(n\)

    描述：返回语句开始执行的时间戳，n为精度，最大值取6。

    返回值类型：datetime

    实例：

    ```
    my_db=# select current_timestamp(3);
      current_timestamp(3)
    -------------------------
    2022-07-21 17:00:41.251
    (1 row)

    my_db=# select current_timestamp();
     current_timestamp()
    ---------------------
    2022-07-21 17:06:06
    (1 row)
    ```

- localtime

    描述：返回语句开始执行的时间戳。

    返回值类型：datetime

    实例：

    ```
    my_db=# select localtime;
        localtime
    ---------------------
    2022-07-21 17:02:04
    (1 row)
    ```

- localtime\(n\)

    描述：返回语句开始执行的时间戳，n为精度，最大值取6。

    返回值类型：datetime

    实例：

    ```
    my_db=# select localtime(3);
        localtime
    ---------------------
    2022-07-21 17:02:04
    (1 row)

    my_db=# select localtime();
        localtime()
    ---------------------
    2022-07-21 17:14:22
    (1 row)
    ```

- localtimestamp

    描述：返回语句开始执行的时间戳。

    返回值类型：datetime

    实例：

    ```
    my_db=# select localtimestamp;
    localtimestamp
    ---------------------
    2022-07-21 17:17:20
    (1 row)
    ```

- localtimestamp\(n\)

    描述：返回语句开始执行的时间戳，n为精度，最大值取6。

    返回值类型：datetime

    实例：

    ```
    my_db=# select localtimestamp(3);
        localtimestamp(3)
    -------------------------
    2022-07-21 17:28:02.013
    (1 row)

    my_db=# select localtimestamp();
    localtimestamp()
    ---------------------
    2022-07-21 17:28:49
    (1 row)
    ```

- now\(n\)

    描述：返回语句开始执行的时间戳，n为精度，最大值取6。

    返回值类型：datetime

    实例：

    ```
    my_db=# select now(3);
            now(3)
    -------------------------
    2022-07-21 17:30:18.037
    (1 row)

    my_db=# select now();
            now()
    ---------------------
    2022-07-21 17:30:51
    (1 row)
    ```

- sysdate\(n\)

    描述：返回系统实时时间戳，n为精度，最大值取6。

    返回值类型：datetime

    实例：

    ```
    my_db=# select sysdate(3);
        sysdate(3)
    -------------------------
    2022-07-21 17:38:23.442
    (1 row)

    my_db=# select sysdate();
        sysdate()
    ---------------------
    2022-07-21 17:39:02
    (1 row)
    ```