--set enable_thread_pool to off
\! @abs_bindir@/gs_guc set -D @abs_srcdir@/tmp_check/datanode1/ -c "enable_thread_pool=off" > /dev/null 2>&1
\! @abs_bindir@/gs_ctl stop -D @abs_srcdir@/tmp_check/datanode1 > /dev/null 2>&1
\! @abs_bindir@/gs_ctl start -D @abs_srcdir@/tmp_check/datanode1 > /dev/null 2>&1
\! sleep 5
--end
\! @abs_bindir@/gsql -d postgres -p @portstring@ -r -c "CREATE DATABASE mysqldb01 DBCOMPATIBILITY = 'B';";
CREATE DATABASE
\! @abs_bindir@/gsql -d postgres -p @portstring@ -r -c "CREATE USER monadmin01 monadmin PASSWORD 'Cmcc@123';";
NOTICE:  The iteration value of password is not recommended.Setting the iteration value too small reduces the security of the password, and setting it too large results in performance degradation.
CREATE ROLE
\! @abs_bindir@/gsql -d postgres -p @portstring@ -r -c "CREATE USER user01 PASSWORD 'Cmcc@123';";
NOTICE:  The iteration value of password is not recommended.Setting the iteration value too small reduces the security of the password, and setting it too large results in performance degradation.
CREATE ROLE
\! @abs_bindir@/gsql -d mysqldb01 -p @portstring@ -r -c "ALTER DATABASE mysqldb01 SET track_stmt_stat_level TO 'L1,L0';";
ALTER DATABASE
\! @abs_bindir@/gsql -d mysqldb01 -p @portstring@ -r -c "SHOW track_stmt_stat_level;";
 track_stmt_stat_level 
-----------------------
 L1,L0
(1 row)

\! @abs_bindir@/gsql -d mysqldb01 -p @portstring@ -r -c "SHOW track_stmt_parameter;";
 track_stmt_parameter 
----------------------
 on
(1 row)

\! @abs_bindir@/gsql -d mysqldb01 -p @portstring@ -r -c "SHOW enable_thread_pool;";
 enable_thread_pool 
--------------------
 off
(1 row)

\! @abs_bindir@/gsql -d mysqldb01 -U monadmin01 -W Cmcc@123 -p @portstring@ -r -c "SELECT COUNT(*) FROM performance_schema.events_statements_current;";
 count 
-------
--?.*
(1 row)

\! @abs_bindir@/gsql -d mysqldb01 -U monadmin01 -W Cmcc@123 -p @portstring@ -r -c "SELECT * FROM performance_schema.events_statements_current limit 1;";
--?.*
--?.*
--?.*
(1 row)

\! @abs_bindir@/gsql -d mysqldb01 -U monadmin01 -W Cmcc@123 -p @portstring@ -r -c "SELECT COUNT(*) FROM performance_schema.events_statements_history;";
 count 
-------
--?.*
(1 row)

\! @abs_bindir@/gsql -d mysqldb01 -U monadmin01 -W Cmcc@123 -p @portstring@ -r -c "SELECT * FROM performance_schema.events_statements_history limit 1;";
--?.*
--?.*
--?.*
(1 row)

\! @abs_bindir@/gsql -d mysqldb01 -U monadmin01 -W Cmcc@123 -p @portstring@ -r -c "SELECT COUNT(*) FROM performance_schema.events_statements_summary_by_digest;";
 count 
-------
--?.*
(1 row)

\! @abs_bindir@/gsql -d mysqldb01 -U monadmin01 -W Cmcc@123 -p @portstring@ -r -c "SELECT * FROM performance_schema.events_statements_summary_by_digest limit 1;";
--?.*
--?.*
--?.*
(1 row)

\! @abs_bindir@/gsql -d mysqldb01 -U monadmin01 -W Cmcc@123 -p @portstring@ -r -c "SELECT COUNT(*) FROM performance_schema.events_waits_current;";
 count 
-------
--?.*
(1 row)

\! @abs_bindir@/gsql -d mysqldb01 -U monadmin01 -W Cmcc@123 -p @portstring@ -r -c "SELECT * FROM performance_schema.events_waits_current limit 1;";
--?.*
--?.*
--?.*
(1 row)

\! @abs_bindir@/gsql -d mysqldb01 -U monadmin01 -W Cmcc@123 -p @portstring@ -r -c "SELECT COUNT(*) FROM performance_schema.events_waits_summary_global_by_event_name;";
 count 
-------
--?.*
(1 row)

\! @abs_bindir@/gsql -d mysqldb01 -U monadmin01 -W Cmcc@123 -p @portstring@ -r -c "SELECT * FROM performance_schema.events_waits_summary_global_by_event_name limit 1;";
--?.*
--?.*
--?.*
(1 row)

\! @abs_bindir@/gsql -d mysqldb01 -U monadmin01 -W Cmcc@123 -p @portstring@ -r -c "SELECT COUNT(*) FROM performance_schema.events_waits_current;";
 count 
-------
--?.*
(1 row)

\! @abs_bindir@/gsql -d mysqldb01 -U monadmin01 -W Cmcc@123 -p @portstring@ -r -c "SELECT * FROM performance_schema.events_waits_current limit 1;";
--?.*
--?.*
--?.*
(1 row)

\! @abs_bindir@/gsql -d mysqldb01 -U monadmin01 -W Cmcc@123 -p @portstring@ -r -c "SELECT COUNT(*) FROM performance_schema.events_waits_summary_global_by_event_name;";
 count 
-------
--?.*
(1 row)

\! @abs_bindir@/gsql -d mysqldb01 -U monadmin01 -W Cmcc@123 -p @portstring@ -r -c "SELECT * FROM performance_schema.events_waits_summary_global_by_event_name limit 1;";
--?.*
--?.*
--?.*
(1 row)

\! @abs_bindir@/gsql -d mysqldb01 -U monadmin01 -W Cmcc@123 -p @portstring@ -r -c "SELECT count(*) FROM performance_schema.file_summary_by_instance;";
 count 
-------
--?.*
(1 row)

\! @abs_bindir@/gsql -d mysqldb01 -U monadmin01 -W Cmcc@123 -p @portstring@ -r -c "SELECT * FROM performance_schema.file_summary_by_instance limit 1;";
--?.*
--?.*
--?.*
(1 row)

\! @abs_bindir@/gsql -d mysqldb01 -U monadmin01 -W Cmcc@123 -p @portstring@ -r -c "SELECT count(*) FROM performance_schema.table_io_waits_summary_by_table;";
 count 
-------
--?.*
(1 row)

\! @abs_bindir@/gsql -d mysqldb01 -U monadmin01 -W Cmcc@123 -p @portstring@ -r -c "SELECT * FROM performance_schema.table_io_waits_summary_by_table limit 1;";
--?.*
--?.*
--?.*
(1 row)

\! @abs_bindir@/gsql -d mysqldb01 -U monadmin01 -W Cmcc@123 -p @portstring@ -r -c "SELECT count(*) FROM performance_schema.table_io_waits_summary_by_index_usage;";
 count 
-------
--?.*
(1 row)

\! @abs_bindir@/gsql -d mysqldb01 -U monadmin01 -W Cmcc@123 -p @portstring@ -r -c "SELECT * FROM performance_schema.table_io_waits_summary_by_index_usage limit 1;";
--?.*
--?.*
--?.*
(1 row)

\! @abs_bindir@/gsql -d mysqldb01 -U user01 -W Cmcc@123 -p @portstring@ -r -c "SELECT COUNT(*) FROM performance_schema.events_statements_current;";
ERROR:  only system/monitor admin can query unique sql view
\! @abs_bindir@/gsql -d mysqldb01 -U user01 -W Cmcc@123 -p @portstring@ -r -c "SELECT COUNT(*) FROM performance_schema.events_statements_history;";
ERROR:  user user01 has no privilege to use schema dbe_perf
\! @abs_bindir@/gsql -d mysqldb01 -U user01 -W Cmcc@123 -p @portstring@ -r -c "SELECT COUNT(*) FROM performance_schema.events_statements_summary_by_digest;";
ERROR:  only system/monitor admin can query unique sql view
\! @abs_bindir@/gsql -d mysqldb01 -U user01 -W Cmcc@123 -p @portstring@ -r -c "SELECT COUNT(*) FROM performance_schema.events_waits_current;";
 count 
-------
--?.*
(1 row)

\! @abs_bindir@/gsql -d mysqldb01 -U user01 -W Cmcc@123 -p @portstring@ -r -c "SELECT COUNT(*) FROM performance_schema.events_waits_summary_global_by_event_name;";
 count 
-------
--?.*
(1 row)

\! @abs_bindir@/gsql -d mysqldb01 -U user01 -W Cmcc@123 -p @portstring@ -r -c "SELECT COUNT(*) FROM performance_schema.events_waits_current;";
 count 
-------
--?.*
(1 row)

\! @abs_bindir@/gsql -d mysqldb01 -U user01 -W Cmcc@123 -p @portstring@ -r -c "SELECT COUNT(*) FROM performance_schema.events_waits_summary_global_by_event_name;";
 count 
-------
--?.*
(1 row)

\! @abs_bindir@/gsql -d mysqldb01 -U user01 -W Cmcc@123 -p @portstring@ -r -c "SELECT count(*) FROM performance_schema.file_summary_by_instance;";
 count 
-------
--?.*
(1 row)

\! @abs_bindir@/gsql -d mysqldb01 -U user01 -W Cmcc@123 -p @portstring@ -r -c "SELECT count(*) FROM performance_schema.table_io_waits_summary_by_table;";
 count 
-------
--?.*
(1 row)

\! @abs_bindir@/gsql -d mysqldb01 -U user01 -W Cmcc@123 -p @portstring@ -r -c "SELECT count(*) FROM performance_schema.table_io_waits_summary_by_index_usage;";
 count 
-------
--?.*
(1 row)

\! @abs_bindir@/gsql -d postgres -p @portstring@ -r -c "DROP user monadmin01 CASCADE;";
DROP ROLE
\! @abs_bindir@/gsql -d postgres -p @portstring@ -r -c "DROP user user01 CASCADE;";
DROP ROLE
\! @abs_bindir@/gsql -d postgres -p @portstring@ -r -c "set dolphin.b_compatibility_mode to off;";
SET
\! @abs_bindir@/gsql -d postgres -p @portstring@ -r -c "DROP DATABASE mysqldb01;";
DROP DATABASE
