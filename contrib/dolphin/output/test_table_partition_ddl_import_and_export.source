--create table partition
drop database if exists dump_table_partition_db;
NOTICE:  database "dump_table_partition_db" does not exist, skipping
drop database if exists restore_table_partition_db;
NOTICE:  database "restore_table_partition_db" does not exist, skipping
create database dump_table_partition_db with dbcompatibility = 'B';
create database restore_table_partition_db with dbcompatibility 'B';
\c dump_table_partition_db
--less than maxvalue语法
create table t_create_table_partition_001(col1 int, col2 int)
partition by range(col1)
(
        partition p0 values less than (18),
        partition p1 values less than (35),
        partition p2 values less than maxvalue
);
insert into t_create_table_partition_001 values(10, 1), (18, 2), (20, 3), (30, 4), (35, 5), (40, 6), (50, 7);
select * from t_create_table_partition_001 partition(p0, p1, p2) order by (col1, col2);
 col1 | col2 
------+------
   10 |    1
   18 |    2
   20 |    3
   30 |    4
   35 |    5
   40 |    6
   50 |    7
(7 rows)

create table t_create_table_partition_002(col1 int, col2 int)
partition by range(col1) subpartition by range(col2)
(
        partition p0 values less than (18)
        (
                subpartition p0_0 values less than (1000),
                subpartition p0_1 values less than (2000),
                subpartition p0_2 values less than (4000)
        ),
        partition p1 values less than (35)
        (
                subpartition p1_0 values less than (5000),
                subpartition p1_1 values less than (6000),
                subpartition p1_2 values less than (8000)
        ),
        partition p2 values less than maxvalue
        (
                subpartition p2_0 values less than (10000),
                subpartition p2_1 values less than (20000),
                subpartition p2_2 values less than maxvalue
        )
);
insert into t_create_table_partition_002 values(10, 1000), (18, 2000), (20, 3000), (30, 4000), (35, 5000), (40, 6000), (50, 8000), (60, 10000), (70, 20000), (80, 30000);
select * from t_create_table_partition_002 partition(p0, p1, p2) order by (col1, col2);
 col1 | col2  
------+-------
   10 |  1000
   18 |  2000
   20 |  3000
   30 |  4000
   35 |  5000
   40 |  6000
   50 |  8000
   60 | 10000
   70 | 20000
   80 | 30000
(10 rows)

select * from t_create_table_partition_002 partition(p0_0, p0_1, p0_2) order by (col1, col2);
 col1 | col2 
------+------
   10 | 1000
(1 row)

select * from t_create_table_partition_002 partition(p1, p1_0, p1_1, p1_2) order by (col1, col2);
 col1 | col2 
------+------
   18 | 2000
   20 | 3000
   30 | 4000
(3 rows)

--list分区表创建时支持values in语法
create table t_create_table_partition_003(col1 int, col2 int)
partition by list(col1)
(
        partition p1 values in (1000),
        partition p2 values in (2000),
        partition p3 values in (4000),
        partition p4 values in (8000)
);
insert into t_create_table_partition_003 values(1000, 0), (2000, 0), (4000, 0), (8000, 0);
select * from t_create_table_partition_003 partition(p1, p2, p3) order by (col1, col2);
 col1 | col2 
------+------
 1000 |    0
 2000 |    0
 4000 |    0
(3 rows)

--支持对分区表的create table like语法，感知源表是否为分区表
create table t_create_table_partition_004(c int, index using btree(c))
partition by range(c)
(
        partition p1 values less than (1000),
        partition p2 values less than (2000),
        partition p3 values less than (4000),
        partition p4 values less than maxvalue
);
create table t_create_table_partition_005(c int check(c > 0), index using btree(c))
partition by range(c)
(
        partition p1 start (0) end (1000),
        partition p2 end (2000),
        partition p3 start (2000) end (4000),
        partition p4 start (4000)
);
create table t_create_table_partition_006(col1 int not null, col2 int)
partition by range(col1) subpartition by range(col2)
(
        partition p1 values less than (1000)
		(
			subpartition p11 values less than (500),
			subpartition p12 values less than (1000)
		),
        partition p2 values less than (2000)
		(
			subpartition p21 values less than (1500),
			subpartition p22 values less than (2000)
		),
        partition p3 values less than (4000)
		(
			subpartition p31 values less than (3000),
			subpartition p32 values less than (4000)
		),
        partition p4 values less than maxvalue
		(
			subpartition p41 values less than (8000),
			subpartition p42 values less than maxvalue
		)
);
create table t_create_table_partition_007 like t_create_table_partition_004 including all;
create table t_create_table_partition_008 like t_create_table_partition_004 including indexes;
create table t_create_table_partition_009 like t_create_table_partition_004 including partition;
create table t_create_table_partition_010 like t_create_table_partition_005 including defaults;
create table t_create_table_partition_011 like t_create_table_partition_005 including generated;
create table t_create_table_partition_012 like t_create_table_partition_005 including constraints;
create table t_create_table_partition_013 like t_create_table_partition_006 including storage;
create table t_create_table_partition_014 like t_create_table_partition_006 including comments;
create table t_create_table_partition_015 like t_create_table_partition_006 including reloptions;
create table t_create_table_partition_016 like t_create_table_partition_004 excluding defaults;
create table t_create_table_partition_017 like t_create_table_partition_004 excluding generated;
create table t_create_table_partition_018 like t_create_table_partition_004 excluding constraints;
create table t_create_table_partition_019 like t_create_table_partition_005 excluding indexes;
create table t_create_table_partition_020 like t_create_table_partition_005 excluding storage;
create table t_create_table_partition_021 like t_create_table_partition_005 excluding comments;
create table t_create_table_partition_022 like t_create_table_partition_006 excluding reloptions;
create table t_create_table_partition_023 like t_create_table_partition_006 excluding all;
create table t_create_table_partition_024 like t_create_table_partition_006;
show create table t_create_table_partition_001;
            Table             |                            Create Table                            
------------------------------+--------------------------------------------------------------------
 t_create_table_partition_001 | SET search_path = public;                                         +
                              | CREATE TABLE t_create_table_partition_001 (                       +
                              |     col1 integer,                                                 +
                              |     col2 integer                                                  +
                              | )                                                                 +
                              | WITH (orientation=row, compression=no)                            +
                              | PARTITION BY RANGE (col1)                                         +
                              | (                                                                 +
                              |     PARTITION p0 VALUES LESS THAN (18) TABLESPACE pg_default,     +
                              |     PARTITION p1 VALUES LESS THAN (35) TABLESPACE pg_default,     +
                              |     PARTITION p2 VALUES LESS THAN (MAXVALUE) TABLESPACE pg_default+
                              | )                                                                 +
                              | ENABLE ROW MOVEMENT;
(1 row)

show create table t_create_table_partition_002;
            Table             |                                Create Table                                 
------------------------------+-----------------------------------------------------------------------------
 t_create_table_partition_002 | SET search_path = public;                                                  +
                              | CREATE TABLE t_create_table_partition_002 (                                +
                              |     col1 integer,                                                          +
                              |     col2 integer                                                           +
                              | )                                                                          +
                              | WITH (orientation=row, compression=no)                                     +
                              | PARTITION BY RANGE (col1) SUBPARTITION BY RANGE (col2)                     +
                              | (                                                                          +
                              |     PARTITION p0 VALUES LESS THAN (18) TABLESPACE pg_default               +
                              |     (                                                                      +
                              |         SUBPARTITION p0_0 VALUES LESS THAN (1000) TABLESPACE pg_default,   +
                              |         SUBPARTITION p0_1 VALUES LESS THAN (2000) TABLESPACE pg_default,   +
                              |         SUBPARTITION p0_2 VALUES LESS THAN (4000) TABLESPACE pg_default    +
                              |     ),                                                                     +
                              |     PARTITION p1 VALUES LESS THAN (35) TABLESPACE pg_default               +
                              |     (                                                                      +
                              |         SUBPARTITION p1_0 VALUES LESS THAN (5000) TABLESPACE pg_default,   +
                              |         SUBPARTITION p1_1 VALUES LESS THAN (6000) TABLESPACE pg_default,   +
                              |         SUBPARTITION p1_2 VALUES LESS THAN (8000) TABLESPACE pg_default    +
                              |     ),                                                                     +
                              |     PARTITION p2 VALUES LESS THAN (MAXVALUE) TABLESPACE pg_default         +
                              |     (                                                                      +
                              |         SUBPARTITION p2_0 VALUES LESS THAN (10000) TABLESPACE pg_default,  +
                              |         SUBPARTITION p2_1 VALUES LESS THAN (20000) TABLESPACE pg_default,  +
                              |         SUBPARTITION p2_2 VALUES LESS THAN (MAXVALUE) TABLESPACE pg_default+
                              |     )                                                                      +
                              | )                                                                          +
                              | ENABLE ROW MOVEMENT;
(1 row)

show create table t_create_table_partition_003;
            Table             |                     Create Table                      
------------------------------+-------------------------------------------------------
 t_create_table_partition_003 | SET search_path = public;                            +
                              | CREATE TABLE t_create_table_partition_003 (          +
                              |     col1 integer,                                    +
                              |     col2 integer                                     +
                              | )                                                    +
                              | WITH (orientation=row, compression=no)               +
                              | PARTITION BY LIST (col1)                             +
                              | (                                                    +
                              |     PARTITION p1 VALUES (1000) TABLESPACE pg_default,+
                              |     PARTITION p2 VALUES (2000) TABLESPACE pg_default,+
                              |     PARTITION p3 VALUES (4000) TABLESPACE pg_default,+
                              |     PARTITION p4 VALUES (8000) TABLESPACE pg_default +
                              | )                                                    +
                              | ENABLE ROW MOVEMENT;
(1 row)

show create table t_create_table_partition_004;
            Table             |                                                                                                 Create Table                                                                                                  
------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 t_create_table_partition_004 | SET search_path = public;                                                                                                                                                                                    +
                              | CREATE TABLE t_create_table_partition_004 (                                                                                                                                                                  +
                              |     c integer                                                                                                                                                                                                +
                              | )                                                                                                                                                                                                            +
                              | WITH (orientation=row, compression=no)                                                                                                                                                                       +
                              | PARTITION BY RANGE (c)                                                                                                                                                                                       +
                              | (                                                                                                                                                                                                            +
                              |     PARTITION p1 VALUES LESS THAN (1000) TABLESPACE pg_default,                                                                                                                                              +
                              |     PARTITION p2 VALUES LESS THAN (2000) TABLESPACE pg_default,                                                                                                                                              +
                              |     PARTITION p3 VALUES LESS THAN (4000) TABLESPACE pg_default,                                                                                                                                              +
                              |     PARTITION p4 VALUES LESS THAN (MAXVALUE) TABLESPACE pg_default                                                                                                                                           +
                              | )                                                                                                                                                                                                            +
                              | ENABLE ROW MOVEMENT;                                                                                                                                                                                         +
                              | CREATE INDEX t_create_table_partition_004_c_idx ON t_create_table_partition_004 USING btree (c) LOCAL(PARTITION p1_c_idx, PARTITION p2_c_idx, PARTITION p3_c_idx, PARTITION p4_c_idx)  TABLESPACE pg_default;
(1 row)

show create table t_create_table_partition_005;
            Table             |                                                                                                             Create Table                                                                                                              
------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 t_create_table_partition_005 | SET search_path = public;                                                                                                                                                                                                            +
                              | CREATE TABLE t_create_table_partition_005 (                                                                                                                                                                                          +
                              |     c integer,                                                                                                                                                                                                                       +
                              |     CONSTRAINT t_create_table_partition_005_c_check CHECK ((c > 0))                                                                                                                                                                  +
                              | )                                                                                                                                                                                                                                    +
                              | WITH (orientation=row, compression=no)                                                                                                                                                                                               +
                              | PARTITION BY RANGE (c)                                                                                                                                                                                                               +
                              | (                                                                                                                                                                                                                                    +
                              |     PARTITION p1_0 VALUES LESS THAN (0) TABLESPACE pg_default,                                                                                                                                                                       +
                              |     PARTITION p1_1 VALUES LESS THAN (1000) TABLESPACE pg_default,                                                                                                                                                                    +
                              |     PARTITION p2 VALUES LESS THAN (2000) TABLESPACE pg_default,                                                                                                                                                                      +
                              |     PARTITION p3 VALUES LESS THAN (4000) TABLESPACE pg_default,                                                                                                                                                                      +
                              |     PARTITION p4 VALUES LESS THAN (MAXVALUE) TABLESPACE pg_default                                                                                                                                                                   +
                              | )                                                                                                                                                                                                                                    +
                              | ENABLE ROW MOVEMENT;                                                                                                                                                                                                                 +
                              | CREATE INDEX t_create_table_partition_005_c_idx ON t_create_table_partition_005 USING btree (c) LOCAL(PARTITION p1_0_c_idx, PARTITION p1_1_c_idx, PARTITION p2_c_idx, PARTITION p3_c_idx, PARTITION p4_c_idx)  TABLESPACE pg_default;
(1 row)

show create table t_create_table_partition_006;
            Table             |                                Create Table                                
------------------------------+----------------------------------------------------------------------------
 t_create_table_partition_006 | SET search_path = public;                                                 +
                              | CREATE TABLE t_create_table_partition_006 (                               +
                              |     col1 integer NOT NULL,                                                +
                              |     col2 integer                                                          +
                              | )                                                                         +
                              | WITH (orientation=row, compression=no)                                    +
                              | PARTITION BY RANGE (col1) SUBPARTITION BY RANGE (col2)                    +
                              | (                                                                         +
                              |     PARTITION p1 VALUES LESS THAN (1000) TABLESPACE pg_default            +
                              |     (                                                                     +
                              |         SUBPARTITION p11 VALUES LESS THAN (500) TABLESPACE pg_default,    +
                              |         SUBPARTITION p12 VALUES LESS THAN (1000) TABLESPACE pg_default    +
                              |     ),                                                                    +
                              |     PARTITION p2 VALUES LESS THAN (2000) TABLESPACE pg_default            +
                              |     (                                                                     +
                              |         SUBPARTITION p21 VALUES LESS THAN (1500) TABLESPACE pg_default,   +
                              |         SUBPARTITION p22 VALUES LESS THAN (2000) TABLESPACE pg_default    +
                              |     ),                                                                    +
                              |     PARTITION p3 VALUES LESS THAN (4000) TABLESPACE pg_default            +
                              |     (                                                                     +
                              |         SUBPARTITION p31 VALUES LESS THAN (3000) TABLESPACE pg_default,   +
                              |         SUBPARTITION p32 VALUES LESS THAN (4000) TABLESPACE pg_default    +
                              |     ),                                                                    +
                              |     PARTITION p4 VALUES LESS THAN (MAXVALUE) TABLESPACE pg_default        +
                              |     (                                                                     +
                              |         SUBPARTITION p41 VALUES LESS THAN (8000) TABLESPACE pg_default,   +
                              |         SUBPARTITION p42 VALUES LESS THAN (MAXVALUE) TABLESPACE pg_default+
                              |     )                                                                     +
                              | )                                                                         +
                              | ENABLE ROW MOVEMENT;
(1 row)

show create table t_create_table_partition_007;
            Table             |                                                                                                 Create Table                                                                                                  
------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 t_create_table_partition_007 | SET search_path = public;                                                                                                                                                                                    +
                              | CREATE TABLE t_create_table_partition_007 (                                                                                                                                                                  +
                              |     c integer                                                                                                                                                                                                +
                              | )                                                                                                                                                                                                            +
                              | WITH (orientation=row, compression=no)                                                                                                                                                                       +
                              | PARTITION BY RANGE (c)                                                                                                                                                                                       +
                              | (                                                                                                                                                                                                            +
                              |     PARTITION p1 VALUES LESS THAN (1000) TABLESPACE pg_default,                                                                                                                                              +
                              |     PARTITION p2 VALUES LESS THAN (2000) TABLESPACE pg_default,                                                                                                                                              +
                              |     PARTITION p3 VALUES LESS THAN (4000) TABLESPACE pg_default,                                                                                                                                              +
                              |     PARTITION p4 VALUES LESS THAN (MAXVALUE) TABLESPACE pg_default                                                                                                                                           +
                              | )                                                                                                                                                                                                            +
                              | ENABLE ROW MOVEMENT;                                                                                                                                                                                         +
                              | CREATE INDEX t_create_table_partition_007_c_idx ON t_create_table_partition_007 USING btree (c) LOCAL(PARTITION p1_c_idx, PARTITION p2_c_idx, PARTITION p3_c_idx, PARTITION p4_c_idx)  TABLESPACE pg_default;
(1 row)

show create table t_create_table_partition_008;
            Table             |                                                                                                 Create Table                                                                                                  
------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 t_create_table_partition_008 | SET search_path = public;                                                                                                                                                                                    +
                              | CREATE TABLE t_create_table_partition_008 (                                                                                                                                                                  +
                              |     c integer                                                                                                                                                                                                +
                              | )                                                                                                                                                                                                            +
                              | WITH (orientation=row, compression=no)                                                                                                                                                                       +
                              | PARTITION BY RANGE (c)                                                                                                                                                                                       +
                              | (                                                                                                                                                                                                            +
                              |     PARTITION p1 VALUES LESS THAN (1000) TABLESPACE pg_default,                                                                                                                                              +
                              |     PARTITION p2 VALUES LESS THAN (2000) TABLESPACE pg_default,                                                                                                                                              +
                              |     PARTITION p3 VALUES LESS THAN (4000) TABLESPACE pg_default,                                                                                                                                              +
                              |     PARTITION p4 VALUES LESS THAN (MAXVALUE) TABLESPACE pg_default                                                                                                                                           +
                              | )                                                                                                                                                                                                            +
                              | ENABLE ROW MOVEMENT;                                                                                                                                                                                         +
                              | CREATE INDEX t_create_table_partition_008_c_idx ON t_create_table_partition_008 USING btree (c) LOCAL(PARTITION p1_c_idx, PARTITION p2_c_idx, PARTITION p3_c_idx, PARTITION p4_c_idx)  TABLESPACE pg_default;
(1 row)

show create table t_create_table_partition_009;
            Table             |                                                                                                 Create Table                                                                                                  
------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 t_create_table_partition_009 | SET search_path = public;                                                                                                                                                                                    +
                              | CREATE TABLE t_create_table_partition_009 (                                                                                                                                                                  +
                              |     c integer                                                                                                                                                                                                +
                              | )                                                                                                                                                                                                            +
                              | WITH (orientation=row, compression=no)                                                                                                                                                                       +
                              | PARTITION BY RANGE (c)                                                                                                                                                                                       +
                              | (                                                                                                                                                                                                            +
                              |     PARTITION p1 VALUES LESS THAN (1000) TABLESPACE pg_default,                                                                                                                                              +
                              |     PARTITION p2 VALUES LESS THAN (2000) TABLESPACE pg_default,                                                                                                                                              +
                              |     PARTITION p3 VALUES LESS THAN (4000) TABLESPACE pg_default,                                                                                                                                              +
                              |     PARTITION p4 VALUES LESS THAN (MAXVALUE) TABLESPACE pg_default                                                                                                                                           +
                              | )                                                                                                                                                                                                            +
                              | ENABLE ROW MOVEMENT;                                                                                                                                                                                         +
                              | CREATE INDEX t_create_table_partition_009_c_idx ON t_create_table_partition_009 USING btree (c) LOCAL(PARTITION p1_c_idx, PARTITION p2_c_idx, PARTITION p3_c_idx, PARTITION p4_c_idx)  TABLESPACE pg_default;
(1 row)

show create table t_create_table_partition_010;
            Table             |                                                                                                             Create Table                                                                                                              
------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 t_create_table_partition_010 | SET search_path = public;                                                                                                                                                                                                            +
                              | CREATE TABLE t_create_table_partition_010 (                                                                                                                                                                                          +
                              |     c integer                                                                                                                                                                                                                        +
                              | )                                                                                                                                                                                                                                    +
                              | WITH (orientation=row, compression=no)                                                                                                                                                                                               +
                              | PARTITION BY RANGE (c)                                                                                                                                                                                                               +
                              | (                                                                                                                                                                                                                                    +
                              |     PARTITION p1_0 VALUES LESS THAN (0) TABLESPACE pg_default,                                                                                                                                                                       +
                              |     PARTITION p1_1 VALUES LESS THAN (1000) TABLESPACE pg_default,                                                                                                                                                                    +
                              |     PARTITION p2 VALUES LESS THAN (2000) TABLESPACE pg_default,                                                                                                                                                                      +
                              |     PARTITION p3 VALUES LESS THAN (4000) TABLESPACE pg_default,                                                                                                                                                                      +
                              |     PARTITION p4 VALUES LESS THAN (MAXVALUE) TABLESPACE pg_default                                                                                                                                                                   +
                              | )                                                                                                                                                                                                                                    +
                              | ENABLE ROW MOVEMENT;                                                                                                                                                                                                                 +
                              | CREATE INDEX t_create_table_partition_010_c_idx ON t_create_table_partition_010 USING btree (c) LOCAL(PARTITION p1_0_c_idx, PARTITION p1_1_c_idx, PARTITION p2_c_idx, PARTITION p3_c_idx, PARTITION p4_c_idx)  TABLESPACE pg_default;
(1 row)

show create table t_create_table_partition_011;
            Table             |                                                                                                             Create Table                                                                                                              
------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 t_create_table_partition_011 | SET search_path = public;                                                                                                                                                                                                            +
                              | CREATE TABLE t_create_table_partition_011 (                                                                                                                                                                                          +
                              |     c integer                                                                                                                                                                                                                        +
                              | )                                                                                                                                                                                                                                    +
                              | WITH (orientation=row, compression=no)                                                                                                                                                                                               +
                              | PARTITION BY RANGE (c)                                                                                                                                                                                                               +
                              | (                                                                                                                                                                                                                                    +
                              |     PARTITION p1_0 VALUES LESS THAN (0) TABLESPACE pg_default,                                                                                                                                                                       +
                              |     PARTITION p1_1 VALUES LESS THAN (1000) TABLESPACE pg_default,                                                                                                                                                                    +
                              |     PARTITION p2 VALUES LESS THAN (2000) TABLESPACE pg_default,                                                                                                                                                                      +
                              |     PARTITION p3 VALUES LESS THAN (4000) TABLESPACE pg_default,                                                                                                                                                                      +
                              |     PARTITION p4 VALUES LESS THAN (MAXVALUE) TABLESPACE pg_default                                                                                                                                                                   +
                              | )                                                                                                                                                                                                                                    +
                              | ENABLE ROW MOVEMENT;                                                                                                                                                                                                                 +
                              | CREATE INDEX t_create_table_partition_011_c_idx ON t_create_table_partition_011 USING btree (c) LOCAL(PARTITION p1_0_c_idx, PARTITION p1_1_c_idx, PARTITION p2_c_idx, PARTITION p3_c_idx, PARTITION p4_c_idx)  TABLESPACE pg_default;
(1 row)

show create table t_create_table_partition_012;
            Table             |                                                                                                             Create Table                                                                                                              
------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 t_create_table_partition_012 | SET search_path = public;                                                                                                                                                                                                            +
                              | CREATE TABLE t_create_table_partition_012 (                                                                                                                                                                                          +
                              |     c integer,                                                                                                                                                                                                                       +
                              |     CONSTRAINT t_create_table_partition_005_c_check CHECK ((c > 0))                                                                                                                                                                  +
                              | )                                                                                                                                                                                                                                    +
                              | WITH (orientation=row, compression=no)                                                                                                                                                                                               +
                              | PARTITION BY RANGE (c)                                                                                                                                                                                                               +
                              | (                                                                                                                                                                                                                                    +
                              |     PARTITION p1_0 VALUES LESS THAN (0) TABLESPACE pg_default,                                                                                                                                                                       +
                              |     PARTITION p1_1 VALUES LESS THAN (1000) TABLESPACE pg_default,                                                                                                                                                                    +
                              |     PARTITION p2 VALUES LESS THAN (2000) TABLESPACE pg_default,                                                                                                                                                                      +
                              |     PARTITION p3 VALUES LESS THAN (4000) TABLESPACE pg_default,                                                                                                                                                                      +
                              |     PARTITION p4 VALUES LESS THAN (MAXVALUE) TABLESPACE pg_default                                                                                                                                                                   +
                              | )                                                                                                                                                                                                                                    +
                              | ENABLE ROW MOVEMENT;                                                                                                                                                                                                                 +
                              | CREATE INDEX t_create_table_partition_012_c_idx ON t_create_table_partition_012 USING btree (c) LOCAL(PARTITION p1_0_c_idx, PARTITION p1_1_c_idx, PARTITION p2_c_idx, PARTITION p3_c_idx, PARTITION p4_c_idx)  TABLESPACE pg_default;
(1 row)

show create table t_create_table_partition_013;
            Table             |                                Create Table                                
------------------------------+----------------------------------------------------------------------------
 t_create_table_partition_013 | SET search_path = public;                                                 +
                              | CREATE TABLE t_create_table_partition_013 (                               +
                              |     col1 integer NOT NULL,                                                +
                              |     col2 integer                                                          +
                              | )                                                                         +
                              | WITH (orientation=row, compression=no)                                    +
                              | PARTITION BY RANGE (col1) SUBPARTITION BY RANGE (col2)                    +
                              | (                                                                         +
                              |     PARTITION p1 VALUES LESS THAN (1000) TABLESPACE pg_default            +
                              |     (                                                                     +
                              |         SUBPARTITION p11 VALUES LESS THAN (500) TABLESPACE pg_default,    +
                              |         SUBPARTITION p12 VALUES LESS THAN (1000) TABLESPACE pg_default    +
                              |     ),                                                                    +
                              |     PARTITION p2 VALUES LESS THAN (2000) TABLESPACE pg_default            +
                              |     (                                                                     +
                              |         SUBPARTITION p21 VALUES LESS THAN (1500) TABLESPACE pg_default,   +
                              |         SUBPARTITION p22 VALUES LESS THAN (2000) TABLESPACE pg_default    +
                              |     ),                                                                    +
                              |     PARTITION p3 VALUES LESS THAN (4000) TABLESPACE pg_default            +
                              |     (                                                                     +
                              |         SUBPARTITION p31 VALUES LESS THAN (3000) TABLESPACE pg_default,   +
                              |         SUBPARTITION p32 VALUES LESS THAN (4000) TABLESPACE pg_default    +
                              |     ),                                                                    +
                              |     PARTITION p4 VALUES LESS THAN (MAXVALUE) TABLESPACE pg_default        +
                              |     (                                                                     +
                              |         SUBPARTITION p41 VALUES LESS THAN (8000) TABLESPACE pg_default,   +
                              |         SUBPARTITION p42 VALUES LESS THAN (MAXVALUE) TABLESPACE pg_default+
                              |     )                                                                     +
                              | )                                                                         +
                              | ENABLE ROW MOVEMENT;
(1 row)

show create table t_create_table_partition_014;
            Table             |                                Create Table                                
------------------------------+----------------------------------------------------------------------------
 t_create_table_partition_014 | SET search_path = public;                                                 +
                              | CREATE TABLE t_create_table_partition_014 (                               +
                              |     col1 integer NOT NULL,                                                +
                              |     col2 integer                                                          +
                              | )                                                                         +
                              | WITH (orientation=row, compression=no)                                    +
                              | PARTITION BY RANGE (col1) SUBPARTITION BY RANGE (col2)                    +
                              | (                                                                         +
                              |     PARTITION p1 VALUES LESS THAN (1000) TABLESPACE pg_default            +
                              |     (                                                                     +
                              |         SUBPARTITION p11 VALUES LESS THAN (500) TABLESPACE pg_default,    +
                              |         SUBPARTITION p12 VALUES LESS THAN (1000) TABLESPACE pg_default    +
                              |     ),                                                                    +
                              |     PARTITION p2 VALUES LESS THAN (2000) TABLESPACE pg_default            +
                              |     (                                                                     +
                              |         SUBPARTITION p21 VALUES LESS THAN (1500) TABLESPACE pg_default,   +
                              |         SUBPARTITION p22 VALUES LESS THAN (2000) TABLESPACE pg_default    +
                              |     ),                                                                    +
                              |     PARTITION p3 VALUES LESS THAN (4000) TABLESPACE pg_default            +
                              |     (                                                                     +
                              |         SUBPARTITION p31 VALUES LESS THAN (3000) TABLESPACE pg_default,   +
                              |         SUBPARTITION p32 VALUES LESS THAN (4000) TABLESPACE pg_default    +
                              |     ),                                                                    +
                              |     PARTITION p4 VALUES LESS THAN (MAXVALUE) TABLESPACE pg_default        +
                              |     (                                                                     +
                              |         SUBPARTITION p41 VALUES LESS THAN (8000) TABLESPACE pg_default,   +
                              |         SUBPARTITION p42 VALUES LESS THAN (MAXVALUE) TABLESPACE pg_default+
                              |     )                                                                     +
                              | )                                                                         +
                              | ENABLE ROW MOVEMENT;
(1 row)

show create table t_create_table_partition_015;
            Table             |                                Create Table                                
------------------------------+----------------------------------------------------------------------------
 t_create_table_partition_015 | SET search_path = public;                                                 +
                              | CREATE TABLE t_create_table_partition_015 (                               +
                              |     col1 integer NOT NULL,                                                +
                              |     col2 integer                                                          +
                              | )                                                                         +
                              | WITH (orientation=row, compression=no)                                    +
                              | PARTITION BY RANGE (col1) SUBPARTITION BY RANGE (col2)                    +
                              | (                                                                         +
                              |     PARTITION p1 VALUES LESS THAN (1000) TABLESPACE pg_default            +
                              |     (                                                                     +
                              |         SUBPARTITION p11 VALUES LESS THAN (500) TABLESPACE pg_default,    +
                              |         SUBPARTITION p12 VALUES LESS THAN (1000) TABLESPACE pg_default    +
                              |     ),                                                                    +
                              |     PARTITION p2 VALUES LESS THAN (2000) TABLESPACE pg_default            +
                              |     (                                                                     +
                              |         SUBPARTITION p21 VALUES LESS THAN (1500) TABLESPACE pg_default,   +
                              |         SUBPARTITION p22 VALUES LESS THAN (2000) TABLESPACE pg_default    +
                              |     ),                                                                    +
                              |     PARTITION p3 VALUES LESS THAN (4000) TABLESPACE pg_default            +
                              |     (                                                                     +
                              |         SUBPARTITION p31 VALUES LESS THAN (3000) TABLESPACE pg_default,   +
                              |         SUBPARTITION p32 VALUES LESS THAN (4000) TABLESPACE pg_default    +
                              |     ),                                                                    +
                              |     PARTITION p4 VALUES LESS THAN (MAXVALUE) TABLESPACE pg_default        +
                              |     (                                                                     +
                              |         SUBPARTITION p41 VALUES LESS THAN (8000) TABLESPACE pg_default,   +
                              |         SUBPARTITION p42 VALUES LESS THAN (MAXVALUE) TABLESPACE pg_default+
                              |     )                                                                     +
                              | )                                                                         +
                              | ENABLE ROW MOVEMENT;
(1 row)

show create table t_create_table_partition_016;
            Table             |                                                                                                 Create Table                                                                                                  
------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 t_create_table_partition_016 | SET search_path = public;                                                                                                                                                                                    +
                              | CREATE TABLE t_create_table_partition_016 (                                                                                                                                                                  +
                              |     c integer                                                                                                                                                                                                +
                              | )                                                                                                                                                                                                            +
                              | WITH (orientation=row, compression=no)                                                                                                                                                                       +
                              | PARTITION BY RANGE (c)                                                                                                                                                                                       +
                              | (                                                                                                                                                                                                            +
                              |     PARTITION p1 VALUES LESS THAN (1000) TABLESPACE pg_default,                                                                                                                                              +
                              |     PARTITION p2 VALUES LESS THAN (2000) TABLESPACE pg_default,                                                                                                                                              +
                              |     PARTITION p3 VALUES LESS THAN (4000) TABLESPACE pg_default,                                                                                                                                              +
                              |     PARTITION p4 VALUES LESS THAN (MAXVALUE) TABLESPACE pg_default                                                                                                                                           +
                              | )                                                                                                                                                                                                            +
                              | ENABLE ROW MOVEMENT;                                                                                                                                                                                         +
                              | CREATE INDEX t_create_table_partition_016_c_idx ON t_create_table_partition_016 USING btree (c) LOCAL(PARTITION p1_c_idx, PARTITION p2_c_idx, PARTITION p3_c_idx, PARTITION p4_c_idx)  TABLESPACE pg_default;
(1 row)

show create table t_create_table_partition_017;
            Table             |                                                                                                 Create Table                                                                                                  
------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 t_create_table_partition_017 | SET search_path = public;                                                                                                                                                                                    +
                              | CREATE TABLE t_create_table_partition_017 (                                                                                                                                                                  +
                              |     c integer                                                                                                                                                                                                +
                              | )                                                                                                                                                                                                            +
                              | WITH (orientation=row, compression=no)                                                                                                                                                                       +
                              | PARTITION BY RANGE (c)                                                                                                                                                                                       +
                              | (                                                                                                                                                                                                            +
                              |     PARTITION p1 VALUES LESS THAN (1000) TABLESPACE pg_default,                                                                                                                                              +
                              |     PARTITION p2 VALUES LESS THAN (2000) TABLESPACE pg_default,                                                                                                                                              +
                              |     PARTITION p3 VALUES LESS THAN (4000) TABLESPACE pg_default,                                                                                                                                              +
                              |     PARTITION p4 VALUES LESS THAN (MAXVALUE) TABLESPACE pg_default                                                                                                                                           +
                              | )                                                                                                                                                                                                            +
                              | ENABLE ROW MOVEMENT;                                                                                                                                                                                         +
                              | CREATE INDEX t_create_table_partition_017_c_idx ON t_create_table_partition_017 USING btree (c) LOCAL(PARTITION p1_c_idx, PARTITION p2_c_idx, PARTITION p3_c_idx, PARTITION p4_c_idx)  TABLESPACE pg_default;
(1 row)

show create table t_create_table_partition_018;
            Table             |                                                                                                 Create Table                                                                                                  
------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 t_create_table_partition_018 | SET search_path = public;                                                                                                                                                                                    +
                              | CREATE TABLE t_create_table_partition_018 (                                                                                                                                                                  +
                              |     c integer                                                                                                                                                                                                +
                              | )                                                                                                                                                                                                            +
                              | WITH (orientation=row, compression=no)                                                                                                                                                                       +
                              | PARTITION BY RANGE (c)                                                                                                                                                                                       +
                              | (                                                                                                                                                                                                            +
                              |     PARTITION p1 VALUES LESS THAN (1000) TABLESPACE pg_default,                                                                                                                                              +
                              |     PARTITION p2 VALUES LESS THAN (2000) TABLESPACE pg_default,                                                                                                                                              +
                              |     PARTITION p3 VALUES LESS THAN (4000) TABLESPACE pg_default,                                                                                                                                              +
                              |     PARTITION p4 VALUES LESS THAN (MAXVALUE) TABLESPACE pg_default                                                                                                                                           +
                              | )                                                                                                                                                                                                            +
                              | ENABLE ROW MOVEMENT;                                                                                                                                                                                         +
                              | CREATE INDEX t_create_table_partition_018_c_idx ON t_create_table_partition_018 USING btree (c) LOCAL(PARTITION p1_c_idx, PARTITION p2_c_idx, PARTITION p3_c_idx, PARTITION p4_c_idx)  TABLESPACE pg_default;
(1 row)

show create table t_create_table_partition_019;
            Table             |                            Create Table                            
------------------------------+--------------------------------------------------------------------
 t_create_table_partition_019 | SET search_path = public;                                         +
                              | CREATE TABLE t_create_table_partition_019 (                       +
                              |     c integer                                                     +
                              | )                                                                 +
                              | WITH (orientation=row, compression=no)                            +
                              | PARTITION BY RANGE (c)                                            +
                              | (                                                                 +
                              |     PARTITION p1_0 VALUES LESS THAN (0) TABLESPACE pg_default,    +
                              |     PARTITION p1_1 VALUES LESS THAN (1000) TABLESPACE pg_default, +
                              |     PARTITION p2 VALUES LESS THAN (2000) TABLESPACE pg_default,   +
                              |     PARTITION p3 VALUES LESS THAN (4000) TABLESPACE pg_default,   +
                              |     PARTITION p4 VALUES LESS THAN (MAXVALUE) TABLESPACE pg_default+
                              | )                                                                 +
                              | ENABLE ROW MOVEMENT;
(1 row)

show create table t_create_table_partition_020;
            Table             |                                                                                                             Create Table                                                                                                              
------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 t_create_table_partition_020 | SET search_path = public;                                                                                                                                                                                                            +
                              | CREATE TABLE t_create_table_partition_020 (                                                                                                                                                                                          +
                              |     c integer                                                                                                                                                                                                                        +
                              | )                                                                                                                                                                                                                                    +
                              | WITH (orientation=row, compression=no)                                                                                                                                                                                               +
                              | PARTITION BY RANGE (c)                                                                                                                                                                                                               +
                              | (                                                                                                                                                                                                                                    +
                              |     PARTITION p1_0 VALUES LESS THAN (0) TABLESPACE pg_default,                                                                                                                                                                       +
                              |     PARTITION p1_1 VALUES LESS THAN (1000) TABLESPACE pg_default,                                                                                                                                                                    +
                              |     PARTITION p2 VALUES LESS THAN (2000) TABLESPACE pg_default,                                                                                                                                                                      +
                              |     PARTITION p3 VALUES LESS THAN (4000) TABLESPACE pg_default,                                                                                                                                                                      +
                              |     PARTITION p4 VALUES LESS THAN (MAXVALUE) TABLESPACE pg_default                                                                                                                                                                   +
                              | )                                                                                                                                                                                                                                    +
                              | ENABLE ROW MOVEMENT;                                                                                                                                                                                                                 +
                              | CREATE INDEX t_create_table_partition_020_c_idx ON t_create_table_partition_020 USING btree (c) LOCAL(PARTITION p1_0_c_idx, PARTITION p1_1_c_idx, PARTITION p2_c_idx, PARTITION p3_c_idx, PARTITION p4_c_idx)  TABLESPACE pg_default;
(1 row)

show create table t_create_table_partition_021;
            Table             |                                                                                                             Create Table                                                                                                              
------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 t_create_table_partition_021 | SET search_path = public;                                                                                                                                                                                                            +
                              | CREATE TABLE t_create_table_partition_021 (                                                                                                                                                                                          +
                              |     c integer                                                                                                                                                                                                                        +
                              | )                                                                                                                                                                                                                                    +
                              | WITH (orientation=row, compression=no)                                                                                                                                                                                               +
                              | PARTITION BY RANGE (c)                                                                                                                                                                                                               +
                              | (                                                                                                                                                                                                                                    +
                              |     PARTITION p1_0 VALUES LESS THAN (0) TABLESPACE pg_default,                                                                                                                                                                       +
                              |     PARTITION p1_1 VALUES LESS THAN (1000) TABLESPACE pg_default,                                                                                                                                                                    +
                              |     PARTITION p2 VALUES LESS THAN (2000) TABLESPACE pg_default,                                                                                                                                                                      +
                              |     PARTITION p3 VALUES LESS THAN (4000) TABLESPACE pg_default,                                                                                                                                                                      +
                              |     PARTITION p4 VALUES LESS THAN (MAXVALUE) TABLESPACE pg_default                                                                                                                                                                   +
                              | )                                                                                                                                                                                                                                    +
                              | ENABLE ROW MOVEMENT;                                                                                                                                                                                                                 +
                              | CREATE INDEX t_create_table_partition_021_c_idx ON t_create_table_partition_021 USING btree (c) LOCAL(PARTITION p1_0_c_idx, PARTITION p1_1_c_idx, PARTITION p2_c_idx, PARTITION p3_c_idx, PARTITION p4_c_idx)  TABLESPACE pg_default;
(1 row)

show create table t_create_table_partition_022;
            Table             |                                Create Table                                
------------------------------+----------------------------------------------------------------------------
 t_create_table_partition_022 | SET search_path = public;                                                 +
                              | CREATE TABLE t_create_table_partition_022 (                               +
                              |     col1 integer NOT NULL,                                                +
                              |     col2 integer                                                          +
                              | )                                                                         +
                              | WITH (orientation=row, compression=no)                                    +
                              | PARTITION BY RANGE (col1) SUBPARTITION BY RANGE (col2)                    +
                              | (                                                                         +
                              |     PARTITION p1 VALUES LESS THAN (1000) TABLESPACE pg_default            +
                              |     (                                                                     +
                              |         SUBPARTITION p11 VALUES LESS THAN (500) TABLESPACE pg_default,    +
                              |         SUBPARTITION p12 VALUES LESS THAN (1000) TABLESPACE pg_default    +
                              |     ),                                                                    +
                              |     PARTITION p2 VALUES LESS THAN (2000) TABLESPACE pg_default            +
                              |     (                                                                     +
                              |         SUBPARTITION p21 VALUES LESS THAN (1500) TABLESPACE pg_default,   +
                              |         SUBPARTITION p22 VALUES LESS THAN (2000) TABLESPACE pg_default    +
                              |     ),                                                                    +
                              |     PARTITION p3 VALUES LESS THAN (4000) TABLESPACE pg_default            +
                              |     (                                                                     +
                              |         SUBPARTITION p31 VALUES LESS THAN (3000) TABLESPACE pg_default,   +
                              |         SUBPARTITION p32 VALUES LESS THAN (4000) TABLESPACE pg_default    +
                              |     ),                                                                    +
                              |     PARTITION p4 VALUES LESS THAN (MAXVALUE) TABLESPACE pg_default        +
                              |     (                                                                     +
                              |         SUBPARTITION p41 VALUES LESS THAN (8000) TABLESPACE pg_default,   +
                              |         SUBPARTITION p42 VALUES LESS THAN (MAXVALUE) TABLESPACE pg_default+
                              |     )                                                                     +
                              | )                                                                         +
                              | ENABLE ROW MOVEMENT;
(1 row)

show create table t_create_table_partition_023;
            Table             |                Create Table                 
------------------------------+---------------------------------------------
 t_create_table_partition_023 | SET search_path = public;                  +
                              | CREATE TABLE t_create_table_partition_023 (+
                              |     col1 integer NOT NULL,                 +
                              |     col2 integer                           +
                              | )                                          +
                              | WITH (orientation=row, compression=no);
(1 row)

show create table t_create_table_partition_024;
            Table             |                                Create Table                                
------------------------------+----------------------------------------------------------------------------
 t_create_table_partition_024 | SET search_path = public;                                                 +
                              | CREATE TABLE t_create_table_partition_024 (                               +
                              |     col1 integer NOT NULL,                                                +
                              |     col2 integer                                                          +
                              | )                                                                         +
                              | WITH (orientation=row, compression=no)                                    +
                              | PARTITION BY RANGE (col1) SUBPARTITION BY RANGE (col2)                    +
                              | (                                                                         +
                              |     PARTITION p1 VALUES LESS THAN (1000) TABLESPACE pg_default            +
                              |     (                                                                     +
                              |         SUBPARTITION p11 VALUES LESS THAN (500) TABLESPACE pg_default,    +
                              |         SUBPARTITION p12 VALUES LESS THAN (1000) TABLESPACE pg_default    +
                              |     ),                                                                    +
                              |     PARTITION p2 VALUES LESS THAN (2000) TABLESPACE pg_default            +
                              |     (                                                                     +
                              |         SUBPARTITION p21 VALUES LESS THAN (1500) TABLESPACE pg_default,   +
                              |         SUBPARTITION p22 VALUES LESS THAN (2000) TABLESPACE pg_default    +
                              |     ),                                                                    +
                              |     PARTITION p3 VALUES LESS THAN (4000) TABLESPACE pg_default            +
                              |     (                                                                     +
                              |         SUBPARTITION p31 VALUES LESS THAN (3000) TABLESPACE pg_default,   +
                              |         SUBPARTITION p32 VALUES LESS THAN (4000) TABLESPACE pg_default    +
                              |     ),                                                                    +
                              |     PARTITION p4 VALUES LESS THAN (MAXVALUE) TABLESPACE pg_default        +
                              |     (                                                                     +
                              |         SUBPARTITION p41 VALUES LESS THAN (8000) TABLESPACE pg_default,   +
                              |         SUBPARTITION p42 VALUES LESS THAN (MAXVALUE) TABLESPACE pg_default+
                              |     )                                                                     +
                              | )                                                                         +
                              | ENABLE ROW MOVEMENT;
(1 row)

select * from t_create_table_partition_001 partition(p0, p1, p2) order by (col1, col2);
 col1 | col2 
------+------
   10 |    1
   18 |    2
   20 |    3
   30 |    4
   35 |    5
   40 |    6
   50 |    7
(7 rows)

select * from t_create_table_partition_002 partition(p0, p1, p2) order by (col1, col2);
 col1 | col2  
------+-------
   10 |  1000
   18 |  2000
   20 |  3000
   30 |  4000
   35 |  5000
   40 |  6000
   50 |  8000
   60 | 10000
   70 | 20000
   80 | 30000
(10 rows)

select * from t_create_table_partition_002 partition(p0_0, p0_1, p0_2) order by (col1, col2);
 col1 | col2 
------+------
   10 | 1000
(1 row)

select * from t_create_table_partition_002 partition(p1, p1_0, p1_1, p1_2) order by (col1, col2);
 col1 | col2 
------+------
   18 | 2000
   20 | 3000
   30 | 4000
(3 rows)

select * from t_create_table_partition_003 partition(p1, p2, p3) order by (col1, col2);
 col1 | col2 
------+------
 1000 |    0
 2000 |    0
 4000 |    0
(3 rows)

--alter分区测试
--一级分区
--range分区
create table t_alter_table_partition_001(col1 int, col2 int)
partition by range(col1)
(
        partition p1 values less than (1000),
        partition p2 values less than (2000),
        partition p3 values less than (4000)
);
alter table t_alter_table_partition_001 remove partitioning;
NOTICE:  The table has no indexes
CONTEXT:  referenced column: remove_partitioning
     remove_partitioning     
-----------------------------
 t_alter_table_partition_001
(1 row)

create table t_alter_table_partition_002(col1 int, col2 int)
partition by list(col1)
(
        partition p1 values in (1000),
        partition p2 values in (2000),
        partition p3 values in (4000)
);
alter table t_alter_table_partition_002 rebuild partition p1;
      rebuild_partition      
-----------------------------
 t_alter_table_partition_002
(1 row)

create table t_alter_table_partition_003(col1 int, col2 int)
partition by hash(col1)
(
        partition p1,
        partition p2,
        partition p3
);
alter table t_alter_table_partition_003 rebuild partition all;
      rebuild_partition      
-----------------------------
 t_alter_table_partition_003
(1 row)

create table t_alter_table_partition_004(col1 int, col2 int)
partition by range(col1)
(
        partition p1 values less than (1000),
        partition p2 values less than (2000),
        partition p3 values less than (4000)
);
alter table t_alter_table_partition_004 reorganize partition p1 into
(
        partition p11 values less than (500),
        partition p12 values less than (1000)
);
create table t_alter_table_partition_005(col1 int, col2 int)
partition by range(col1)
(
        partition p1 values less than (1000),
        partition p2 values less than (2000),
        partition p3 values less than (4000)
);
alter table t_alter_table_partition_005 reorganize partition p2, p3 into (partition p2 values less than (4000));
create table t_alter_table_partition_006(col1 int, col2 int)
partition by range(col1)
(
        partition p1 values less than (1000),
        partition p2 values less than (2000),
        partition p3 values less than (4000)
);
alter table t_alter_table_partition_006 check partition p1;
WARNING:  PARTITION CHECK is not supported for current version. skipped
create table t_alter_table_partition_007(col1 int, col2 int)
partition by range(col1)
(
        partition p1 values less than (1000),
        partition p2 values less than (2000),
        partition p3 values less than (4000)
);
alter table t_alter_table_partition_007 check partition all;
WARNING:  PARTITION CHECK is not supported for current version. skipped
create table t_alter_table_partition_008(col1 int, col2 int)
partition by range(col1)
(
        partition p1 values less than (1000),
        partition p2 values less than (2000),
        partition p3 values less than (4000)
);
alter table t_alter_table_partition_008 repair partition p2;
WARNING:  PARTITION REPAIR is not supported for current version. skipped
create table t_alter_table_partition_009(col1 int, col2 int)
partition by range(col1)
(
        partition p1 values less than (1000),
        partition p2 values less than (2000),
        partition p3 values less than (4000)
);
alter table t_alter_table_partition_009 repair partition all;
WARNING:  PARTITION REPAIR is not supported for current version. skipped
create table t_alter_table_partition_010(col1 int, col2 int)
partition by range(col1)
(
        partition p1 values less than (1000),
        partition p2 values less than (2000),
        partition p3 values less than (4000)
);
alter table t_alter_table_partition_010 optimize partition p3;
WARNING:  PARTITION OPTIMIZE is not supported for current version. skipped
create table t_alter_table_partition_011(col1 int, col2 int)
partition by range(col1)
(
        partition p1 values less than (1000),
        partition p2 values less than (2000),
        partition p3 values less than (4000)
);
alter table t_alter_table_partition_011 optimize partition all;
WARNING:  PARTITION OPTIMIZE is not supported for current version. skipped
create table t_alter_table_partition_012(col1 int, col2 int)
partition by range(col1)
(
        partition p1 values less than (1000),
        partition p2 values less than (2000),
        partition p3 values less than (4000)
);
create table t_alter_table_partition_013(col1 int, col2 int);
create table t_alter_table_partition_014(col1 int, col2 int)
partition by range(col1)
(
        partition p1 values less than (1000),
        partition p2 values less than (2000),
        partition p3 values less than (4000)
);
alter table t_alter_table_partition_014 exchange partition p1 with table t_alter_table_partition_013 with validation;
create table t_alter_table_partition_015(col1 int, col2 int)
partition by range(col1)
(
        partition p1 values less than (1000),
        partition p2 values less than (2000),
        partition p3 values less than (4000)
);
alter table t_alter_table_partition_015 exchange partition p2 with table t_alter_table_partition_013 without validation;
create table t_alter_table_partition_016(col1 int, col2 int)
partition by range(col1)
(
        partition p1 values less than (1000),
        partition p2 values less than (2000),
        partition p3 values less than (4000)
);
alter table t_alter_table_partition_016 analyze partition p1;
      analyze_partition      
-----------------------------
 t_alter_table_partition_016
(1 row)

create table t_alter_table_partition_017(col1 int, col2 int)
partition by range(col1)
(
        partition p1 values less than (1000),
        partition p2 values less than (2000),
        partition p3 values less than (4000)
);
alter table t_alter_table_partition_017 analyze partition all;
create table t_alter_table_partition_018(col1 int, col2 int)
partition by range(col1)
(
        partition p1 values less than (1000),
        partition p2 values less than (2000),
        partition p3 values less than (4000)
);
alter table t_alter_table_partition_018 add partition p4 values less than maxvalue;
create table t_alter_table_partition_019(col1 int, col2 int)
partition by range(col1)
(
        partition p1 values less than (1000),
        partition p2 values less than (2000),
        partition p3 values less than (4000),
        partition p4 values less than maxvalue
);
alter table t_alter_table_partition_019 drop partition p4;
create table t_alter_table_partition_020(col1 int, col2 int)
partition by range(col1)
(
        partition p1 values less than (1000),
        partition p2 values less than (2000),
        partition p3 values less than (4000)
);
alter table t_alter_table_partition_020 truncate partition p1;
create table t_alter_table_partition_021(col1 int, col2 int)
partition by range(col1)
(
        partition p1 values less than (1000),
        partition p2 values less than (2000),
        partition p3 values less than (4000)
);
alter table t_alter_table_partition_021 truncate partition all;
--二级分区
create table t_alter_table_partition_022(col1 int, col2 int)
partition by range(col1) subpartition by hash(col2)
(
        partition p0 values less than (18)
        (
                subpartition p00,
                subpartition p01,
                subpartition p02
        ),
        partition p1 values less than (35)
        (
                subpartition p10,
                subpartition p11,
                subpartition p12
        ),
        partition p2 values less than maxvalue
        (
                subpartition p20,
                subpartition p21,
                subpartition p22
        )
);
alter table t_alter_table_partition_022 reorganize partition p0 into
(
        partition p0 values less than (18)
        (
                subpartition p00,
                subpartition p01,
                subpartition p02,
                subpartition p03
        )
);
create table t_alter_table_partition_023(col1 int, col2 int)
partition by range(col1) subpartition by hash(col2)
(
        partition p0 values less than (18)
        (
                subpartition p00,
                subpartition p01,
                subpartition p02
        ),
        partition p1 values less than (35)
        (
                subpartition p10,
                subpartition p11,
                subpartition p12
        ),
        partition p2 values less than maxvalue
        (
                subpartition p20,
                subpartition p21,
                subpartition p22
        )
);
alter table t_alter_table_partition_023 reorganize partition p0 into
(
        partition p0 values less than (18)
        (
                subpartition p00,
                subpartition p01
        )
);
create table t_alter_table_partition_024(col1 int, col2 int)
partition by range(col1) subpartition by range(col2)
(
        partition p0 values less than (18)
        (
                subpartition p00 values less than (1000),
                subpartition p01 values less than (2000),
                subpartition p02 values less than maxvalue
        ),
        partition p1 values less than (35)
        (
                subpartition p10 values less than (1000),
                subpartition p11 values less than (2000),
                subpartition p12 values less than maxvalue
        ),
        partition p2 values less than maxvalue
        (
                subpartition p20 values less than (1000),
                subpartition p21 values less than (2000),
                subpartition p22 values less than maxvalue
        )
);
alter table t_alter_table_partition_024 remove partitioning;
NOTICE:  The table has no indexes
CONTEXT:  referenced column: remove_partitioning
     remove_partitioning     
-----------------------------
 t_alter_table_partition_024
(1 row)

create table t_alter_table_partition_025(col1 int, col2 int)
partition by list(col1) subpartition by range(col2)
(
        partition p0 values in (18)
        (
                subpartition p00 values less than (1000),
                subpartition p01 values less than (2000),
                subpartition p02 values less than (4000)
        ),
        partition p1 values in (35)
        (
                subpartition p10 values less than (5000),
                subpartition p11 values less than (6000),
                subpartition p12 values less than (8000)
        ),
        partition p2 values in (60)
        (
                subpartition p20 values less than (10000),
                subpartition p21 values less than (20000),
                subpartition p22 values less than maxvalue
        )
);
alter table t_alter_table_partition_025 check partition p1;
WARNING:  PARTITION CHECK is not supported for current version. skipped
create table t_alter_table_partition_026(col1 int, col2 int)
partition by list(col1) subpartition by list(col2)
(
        partition p0 values in (18)
        (
                subpartition p00 values (1000),
                subpartition p01 values (2000),
                subpartition p02 values (4000)
        ),
        partition p1 values in (35)
        (
                subpartition p10 values (5000),
                subpartition p11 values (6000),
                subpartition p12 values (8000)
        ),
        partition p2 values in (60)
        (
                subpartition p20 values (10000),
                subpartition p21 values (20000),
                subpartition p22 values (40000)
        )
);
alter table t_alter_table_partition_026 check partition all;
WARNING:  PARTITION CHECK is not supported for current version. skipped
create table t_alter_table_partition_027(col1 int, col2 int)
partition by list(col1) subpartition by hash(col2)
(
        partition p0 values in (18)
        (
                subpartition p00,
                subpartition p01,
                subpartition p02
        ),
        partition p1 values in (35)
        (
                subpartition p10,
                subpartition p11,
                subpartition p12
        ),
        partition p2 values in (60)
        (
                subpartition p20,
                subpartition p21,
                subpartition p22
        )
);
alter table t_alter_table_partition_027 repair partition p2;
WARNING:  PARTITION REPAIR is not supported for current version. skipped
create table t_alter_table_partition_028(col1 int, col2 int)
partition by hash(col1) subpartition by range(col2)
(
        partition p0
        (
                subpartition p00 values less than (1000),
                subpartition p01 values less than (2000),
                subpartition p02 values less than maxvalue
        ),
        partition p1
        (
                subpartition p10 values less than (1000),
                subpartition p11 values less than (2000),
                subpartition p12 values less than maxvalue
        ),
        partition p2
        (
                subpartition p20 values less than (1000),
                subpartition p21 values less than (2000),
                subpartition p22 values less than maxvalue
        )
);
alter table t_alter_table_partition_028 repair partition all;
WARNING:  PARTITION REPAIR is not supported for current version. skipped
create table t_alter_table_partition_029(col1 int, col2 int)
partition by hash(col1) subpartition by list(col2)
(
        partition p0
        (
                subpartition p00 values (1000),
                subpartition p01 values (2000),
                subpartition p02 values (4000)
        ),
        partition p1
        (
                subpartition p10 values (1000),
                subpartition p11 values (2000),
                subpartition p12 values (4000)
        ),
        partition p2
        (
                subpartition p20 values (1000),
                subpartition p21 values (2000),
                subpartition p22 values (4000)
        )
);
alter table t_alter_table_partition_029 optimize partition p3;
WARNING:  PARTITION OPTIMIZE is not supported for current version. skipped
create table t_alter_table_partition_030(col1 int, col2 int)
partition by hash(col1) subpartition by hash(col2)
(
        partition p0
        (
                subpartition p00,
                subpartition p01,
                subpartition p02
        ),
        partition p1
        (
                subpartition p10,
                subpartition p11,
                subpartition p12
        ),
        partition p2
        (
                subpartition p20,
                subpartition p21,
                subpartition p22
        )
);
alter table t_alter_table_partition_030 optimize partition all;
WARNING:  PARTITION OPTIMIZE is not supported for current version. skipped
create table t_alter_table_partition_031(col1 int, col2 int)
partition by range(col1) subpartition by range(col2)
(
        partition p0 values less than (4000)
        (
                subpartition p00 values less than (1000),
                subpartition p01 values less than (2000),
                subpartition p02 values less than (4000)
        ),
        partition p1 values less than (8000)
        (
                subpartition p10 values less than (5000),
                subpartition p11 values less than (6000),
                subpartition p12 values less than (8000)
        ),
        partition p2 values less than (20000)
        (
                subpartition p20 values less than (10000),
                subpartition p21 values less than (15000),
                subpartition p22 values less than (20000)
        )
);
alter table t_alter_table_partition_031 add
        partition p3 values less than maxvalue(
                subpartition p30 values less than (40000),
                subpartition p31 values less than (80000),
                subpartition p32 values less than maxvalue
        )
;
create table t_alter_table_partition_032(col1 int, col2 int)
partition by list(col1) subpartition by list(col1)
(
        partition p0 values in (4000)
        (
                subpartition p00 values (1000),
                subpartition p01 values (2000),
                subpartition p02 values (4000)
        ),
        partition p1 values in (8000)
        (
                subpartition p10 values (5000),
                subpartition p11 values (6000),
                subpartition p12 values (8000)
        ),
        partition p2 values in (40000)
        (
                subpartition p20 values (10000),
                subpartition p21 values (20000),
                subpartition p22 values (40000)
        )
);
alter table t_alter_table_partition_032 drop subpartition p02;
create table t_alter_table_partition_033(col1 int, col2 int)
partition by hash(col1) subpartition by hash(col1)
(
        partition p0
        (
                subpartition p00,
                subpartition p01,
                subpartition p02
        ),
        partition p1
        (
                subpartition p10,
                subpartition p11,
                subpartition p12
        ),
        partition p2
        (
                subpartition p20,
                subpartition p21,
                subpartition p22
        )
);
alter table t_alter_table_partition_033 truncate partition p1;
--间隔分区表
create table t_alter_table_partition_034(time_id date, col2 int)
partition by range(time_id)
interval('1 day')
(
        partition p0 values less than ('2019-02-01 00:00:00'),
        partition p1 values less than ('2019-02-02 00:00:00'),
        partition p2 values less than ('2019-02-03 00:00:00')
);
alter table t_alter_table_partition_034 truncate partition all;
\d t_alter_table_partition_001
Table "public.t_alter_table_partition_001"
 Column |  Type   | Modifiers 
--------+---------+-----------
 col1   | integer | 
 col2   | integer | 

\d t_alter_table_partition_002
Table "public.t_alter_table_partition_002"
 Column |  Type   | Modifiers 
--------+---------+-----------
 col1   | integer | 
 col2   | integer | 
Partition By LIST(col1)
Number of partitions: 3 (View pg_partition to check each partition range.)

\d t_alter_table_partition_003
Table "public.t_alter_table_partition_003"
 Column |  Type   | Modifiers 
--------+---------+-----------
 col1   | integer | 
 col2   | integer | 
Partition By HASH(col1)
Number of partitions: 3 (View pg_partition to check each partition range.)

\d t_alter_table_partition_004
Table "public.t_alter_table_partition_004"
 Column |  Type   | Modifiers 
--------+---------+-----------
 col1   | integer | 
 col2   | integer | 
Partition By RANGE(col1)
Number of partitions: 4 (View pg_partition to check each partition range.)

\d t_alter_table_partition_005
Table "public.t_alter_table_partition_005"
 Column |  Type   | Modifiers 
--------+---------+-----------
 col1   | integer | 
 col2   | integer | 
Partition By RANGE(col1)
Number of partitions: 2 (View pg_partition to check each partition range.)

\d t_alter_table_partition_006
Table "public.t_alter_table_partition_006"
 Column |  Type   | Modifiers 
--------+---------+-----------
 col1   | integer | 
 col2   | integer | 
Partition By RANGE(col1)
Number of partitions: 3 (View pg_partition to check each partition range.)

\d t_alter_table_partition_007
Table "public.t_alter_table_partition_007"
 Column |  Type   | Modifiers 
--------+---------+-----------
 col1   | integer | 
 col2   | integer | 
Partition By RANGE(col1)
Number of partitions: 3 (View pg_partition to check each partition range.)

\d t_alter_table_partition_008
Table "public.t_alter_table_partition_008"
 Column |  Type   | Modifiers 
--------+---------+-----------
 col1   | integer | 
 col2   | integer | 
Partition By RANGE(col1)
Number of partitions: 3 (View pg_partition to check each partition range.)

\d t_alter_table_partition_009
Table "public.t_alter_table_partition_009"
 Column |  Type   | Modifiers 
--------+---------+-----------
 col1   | integer | 
 col2   | integer | 
Partition By RANGE(col1)
Number of partitions: 3 (View pg_partition to check each partition range.)

\d t_alter_table_partition_010
Table "public.t_alter_table_partition_010"
 Column |  Type   | Modifiers 
--------+---------+-----------
 col1   | integer | 
 col2   | integer | 
Partition By RANGE(col1)
Number of partitions: 3 (View pg_partition to check each partition range.)

\d t_alter_table_partition_011
Table "public.t_alter_table_partition_011"
 Column |  Type   | Modifiers 
--------+---------+-----------
 col1   | integer | 
 col2   | integer | 
Partition By RANGE(col1)
Number of partitions: 3 (View pg_partition to check each partition range.)

\d t_alter_table_partition_012
Table "public.t_alter_table_partition_012"
 Column |  Type   | Modifiers 
--------+---------+-----------
 col1   | integer | 
 col2   | integer | 
Partition By RANGE(col1)
Number of partitions: 3 (View pg_partition to check each partition range.)

\d t_alter_table_partition_013
Table "public.t_alter_table_partition_013"
 Column |  Type   | Modifiers 
--------+---------+-----------
 col1   | integer | 
 col2   | integer | 

\d t_alter_table_partition_014
Table "public.t_alter_table_partition_014"
 Column |  Type   | Modifiers 
--------+---------+-----------
 col1   | integer | 
 col2   | integer | 
Partition By RANGE(col1)
Number of partitions: 3 (View pg_partition to check each partition range.)

\d t_alter_table_partition_015
Table "public.t_alter_table_partition_015"
 Column |  Type   | Modifiers 
--------+---------+-----------
 col1   | integer | 
 col2   | integer | 
Partition By RANGE(col1)
Number of partitions: 3 (View pg_partition to check each partition range.)

\d t_alter_table_partition_016
Table "public.t_alter_table_partition_016"
 Column |  Type   | Modifiers 
--------+---------+-----------
 col1   | integer | 
 col2   | integer | 
Partition By RANGE(col1)
Number of partitions: 3 (View pg_partition to check each partition range.)

\d t_alter_table_partition_017
Table "public.t_alter_table_partition_017"
 Column |  Type   | Modifiers 
--------+---------+-----------
 col1   | integer | 
 col2   | integer | 
Partition By RANGE(col1)
Number of partitions: 3 (View pg_partition to check each partition range.)

\d t_alter_table_partition_018
Table "public.t_alter_table_partition_018"
 Column |  Type   | Modifiers 
--------+---------+-----------
 col1   | integer | 
 col2   | integer | 
Partition By RANGE(col1)
Number of partitions: 4 (View pg_partition to check each partition range.)

\d t_alter_table_partition_019
Table "public.t_alter_table_partition_019"
 Column |  Type   | Modifiers 
--------+---------+-----------
 col1   | integer | 
 col2   | integer | 
Partition By RANGE(col1)
Number of partitions: 3 (View pg_partition to check each partition range.)

\d t_alter_table_partition_020
Table "public.t_alter_table_partition_020"
 Column |  Type   | Modifiers 
--------+---------+-----------
 col1   | integer | 
 col2   | integer | 
Partition By RANGE(col1)
Number of partitions: 3 (View pg_partition to check each partition range.)

\d t_alter_table_partition_021
Table "public.t_alter_table_partition_021"
 Column |  Type   | Modifiers 
--------+---------+-----------
 col1   | integer | 
 col2   | integer | 
Partition By RANGE(col1)
Number of partitions: 3 (View pg_partition to check each partition range.)

\d t_alter_table_partition_022
Table "public.t_alter_table_partition_022"
 Column |  Type   | Modifiers 
--------+---------+-----------
 col1   | integer | 
 col2   | integer | 
Partition By RANGE(col1) Subpartition By HASH(col2)
Number of partitions: 3 (View pg_partition to check each partition range.)
Number of subpartitions: 10 (View pg_partition to check each subpartition range.)

\d t_alter_table_partition_023
Table "public.t_alter_table_partition_023"
 Column |  Type   | Modifiers 
--------+---------+-----------
 col1   | integer | 
 col2   | integer | 
Partition By RANGE(col1) Subpartition By HASH(col2)
Number of partitions: 3 (View pg_partition to check each partition range.)
Number of subpartitions: 8 (View pg_partition to check each subpartition range.)

\d t_alter_table_partition_024
Table "public.t_alter_table_partition_024"
 Column |  Type   | Modifiers 
--------+---------+-----------
 col1   | integer | 
 col2   | integer | 

\d t_alter_table_partition_025
Table "public.t_alter_table_partition_025"
 Column |  Type   | Modifiers 
--------+---------+-----------
 col1   | integer | 
 col2   | integer | 
Partition By LIST(col1) Subpartition By RANGE(col2)
Number of partitions: 3 (View pg_partition to check each partition range.)
Number of subpartitions: 9 (View pg_partition to check each subpartition range.)

\d t_alter_table_partition_026
Table "public.t_alter_table_partition_026"
 Column |  Type   | Modifiers 
--------+---------+-----------
 col1   | integer | 
 col2   | integer | 
Partition By LIST(col1) Subpartition By LIST(col2)
Number of partitions: 3 (View pg_partition to check each partition range.)
Number of subpartitions: 9 (View pg_partition to check each subpartition range.)

\d t_alter_table_partition_027
Table "public.t_alter_table_partition_027"
 Column |  Type   | Modifiers 
--------+---------+-----------
 col1   | integer | 
 col2   | integer | 
Partition By LIST(col1) Subpartition By HASH(col2)
Number of partitions: 3 (View pg_partition to check each partition range.)
Number of subpartitions: 9 (View pg_partition to check each subpartition range.)

\d t_alter_table_partition_028
Table "public.t_alter_table_partition_028"
 Column |  Type   | Modifiers 
--------+---------+-----------
 col1   | integer | 
 col2   | integer | 
Partition By HASH(col1) Subpartition By RANGE(col2)
Number of partitions: 3 (View pg_partition to check each partition range.)
Number of subpartitions: 9 (View pg_partition to check each subpartition range.)

\d t_alter_table_partition_029
Table "public.t_alter_table_partition_029"
 Column |  Type   | Modifiers 
--------+---------+-----------
 col1   | integer | 
 col2   | integer | 
Partition By HASH(col1) Subpartition By LIST(col2)
Number of partitions: 3 (View pg_partition to check each partition range.)
Number of subpartitions: 9 (View pg_partition to check each subpartition range.)

\d t_alter_table_partition_030
Table "public.t_alter_table_partition_030"
 Column |  Type   | Modifiers 
--------+---------+-----------
 col1   | integer | 
 col2   | integer | 
Partition By HASH(col1) Subpartition By HASH(col2)
Number of partitions: 3 (View pg_partition to check each partition range.)
Number of subpartitions: 9 (View pg_partition to check each subpartition range.)

\d t_alter_table_partition_031
Table "public.t_alter_table_partition_031"
 Column |  Type   | Modifiers 
--------+---------+-----------
 col1   | integer | 
 col2   | integer | 
Partition By RANGE(col1) Subpartition By RANGE(col2)
Number of partitions: 4 (View pg_partition to check each partition range.)
Number of subpartitions: 12 (View pg_partition to check each subpartition range.)

\d t_alter_table_partition_032
Table "public.t_alter_table_partition_032"
 Column |  Type   | Modifiers 
--------+---------+-----------
 col1   | integer | 
 col2   | integer | 
Partition By LIST(col1) Subpartition By LIST(col1)
Number of partitions: 3 (View pg_partition to check each partition range.)
Number of subpartitions: 8 (View pg_partition to check each subpartition range.)

\d t_alter_table_partition_033
Table "public.t_alter_table_partition_033"
 Column |  Type   | Modifiers 
--------+---------+-----------
 col1   | integer | 
 col2   | integer | 
Partition By HASH(col1) Subpartition By HASH(col1)
Number of partitions: 3 (View pg_partition to check each partition range.)
Number of subpartitions: 9 (View pg_partition to check each subpartition range.)

\d t_alter_table_partition_034
Table "public.t_alter_table_partition_034"
 Column  |  Type   | Modifiers 
---------+---------+-----------
 time_id | date    | 
 col2    | integer | 
Partition By RANGE(time_id) INTERVAL('1 day')
Number of partitions: 3 (View pg_partition to check each partition range.)

--导入导出
\! @abs_bindir@/gs_dump dump_table_partition_db -p @portstring@ -f @abs_bindir@/dump_table_partition.sql -F p >/dev/null 2>&1; echo $?
0
drop table t_create_table_partition_001;
drop table t_create_table_partition_002;
drop table t_create_table_partition_003;
drop table t_create_table_partition_004;
drop table t_create_table_partition_005;
drop table t_create_table_partition_006;
drop table t_create_table_partition_007;
drop table t_create_table_partition_008;
drop table t_create_table_partition_009;
drop table t_create_table_partition_010;
drop table t_create_table_partition_011;
drop table t_create_table_partition_012;
drop table t_create_table_partition_013;
drop table t_create_table_partition_014;
drop table t_create_table_partition_015;
drop table t_create_table_partition_016;
drop table t_create_table_partition_017;
drop table t_create_table_partition_018;
drop table t_create_table_partition_019;
drop table t_create_table_partition_020;
drop table t_create_table_partition_021;
drop table t_create_table_partition_022;
drop table t_create_table_partition_023;
drop table t_create_table_partition_024;
drop table t_alter_table_partition_001;
drop table t_alter_table_partition_002;
drop table t_alter_table_partition_003;
drop table t_alter_table_partition_004;
drop table t_alter_table_partition_005;
drop table t_alter_table_partition_006;
drop table t_alter_table_partition_007;
drop table t_alter_table_partition_008;
drop table t_alter_table_partition_009;
drop table t_alter_table_partition_010;
drop table t_alter_table_partition_011;
drop table t_alter_table_partition_012;
drop table t_alter_table_partition_013;
drop table t_alter_table_partition_014;
drop table t_alter_table_partition_015;
drop table t_alter_table_partition_016;
drop table t_alter_table_partition_017;
drop table t_alter_table_partition_018;
drop table t_alter_table_partition_019;
drop table t_alter_table_partition_020;
drop table t_alter_table_partition_021;
drop table t_alter_table_partition_022;
drop table t_alter_table_partition_023;
drop table t_alter_table_partition_024;
drop table t_alter_table_partition_025;
drop table t_alter_table_partition_026;
drop table t_alter_table_partition_027;
drop table t_alter_table_partition_028;
drop table t_alter_table_partition_029;
drop table t_alter_table_partition_030;
drop table t_alter_table_partition_031;
drop table t_alter_table_partition_032;
drop table t_alter_table_partition_033;
drop table t_alter_table_partition_034;
\! @abs_bindir@/gsql restore_table_partition_db -p @portstring@ -f @abs_bindir@/dump_table_partition.sql >/dev/null 2>&1; echo $?
0
\c restore_table_partition_db
show create table t_create_table_partition_001;
            Table             |                            Create Table                            
------------------------------+--------------------------------------------------------------------
 t_create_table_partition_001 | SET search_path = public;                                         +
                              | CREATE TABLE t_create_table_partition_001 (                       +
                              |     col1 integer,                                                 +
                              |     col2 integer                                                  +
                              | )                                                                 +
                              | WITH (orientation=row, compression=no)                            +
                              | PARTITION BY RANGE (col1)                                         +
                              | (                                                                 +
                              |     PARTITION p0 VALUES LESS THAN (18) TABLESPACE pg_default,     +
                              |     PARTITION p1 VALUES LESS THAN (35) TABLESPACE pg_default,     +
                              |     PARTITION p2 VALUES LESS THAN (MAXVALUE) TABLESPACE pg_default+
                              | )                                                                 +
                              | ENABLE ROW MOVEMENT;
(1 row)

show create table t_create_table_partition_002;
            Table             |                                Create Table                                 
------------------------------+-----------------------------------------------------------------------------
 t_create_table_partition_002 | SET search_path = public;                                                  +
                              | CREATE TABLE t_create_table_partition_002 (                                +
                              |     col1 integer,                                                          +
                              |     col2 integer                                                           +
                              | )                                                                          +
                              | WITH (orientation=row, compression=no)                                     +
                              | PARTITION BY RANGE (col1) SUBPARTITION BY RANGE (col2)                     +
                              | (                                                                          +
                              |     PARTITION p0 VALUES LESS THAN (18) TABLESPACE pg_default               +
                              |     (                                                                      +
                              |         SUBPARTITION p0_0 VALUES LESS THAN (1000) TABLESPACE pg_default,   +
                              |         SUBPARTITION p0_1 VALUES LESS THAN (2000) TABLESPACE pg_default,   +
                              |         SUBPARTITION p0_2 VALUES LESS THAN (4000) TABLESPACE pg_default    +
                              |     ),                                                                     +
                              |     PARTITION p1 VALUES LESS THAN (35) TABLESPACE pg_default               +
                              |     (                                                                      +
                              |         SUBPARTITION p1_0 VALUES LESS THAN (5000) TABLESPACE pg_default,   +
                              |         SUBPARTITION p1_1 VALUES LESS THAN (6000) TABLESPACE pg_default,   +
                              |         SUBPARTITION p1_2 VALUES LESS THAN (8000) TABLESPACE pg_default    +
                              |     ),                                                                     +
                              |     PARTITION p2 VALUES LESS THAN (MAXVALUE) TABLESPACE pg_default         +
                              |     (                                                                      +
                              |         SUBPARTITION p2_0 VALUES LESS THAN (10000) TABLESPACE pg_default,  +
                              |         SUBPARTITION p2_1 VALUES LESS THAN (20000) TABLESPACE pg_default,  +
                              |         SUBPARTITION p2_2 VALUES LESS THAN (MAXVALUE) TABLESPACE pg_default+
                              |     )                                                                      +
                              | )                                                                          +
                              | ENABLE ROW MOVEMENT;
(1 row)

show create table t_create_table_partition_003;
            Table             |                     Create Table                      
------------------------------+-------------------------------------------------------
 t_create_table_partition_003 | SET search_path = public;                            +
                              | CREATE TABLE t_create_table_partition_003 (          +
                              |     col1 integer,                                    +
                              |     col2 integer                                     +
                              | )                                                    +
                              | WITH (orientation=row, compression=no)               +
                              | PARTITION BY LIST (col1)                             +
                              | (                                                    +
                              |     PARTITION p1 VALUES (1000) TABLESPACE pg_default,+
                              |     PARTITION p2 VALUES (2000) TABLESPACE pg_default,+
                              |     PARTITION p3 VALUES (4000) TABLESPACE pg_default,+
                              |     PARTITION p4 VALUES (8000) TABLESPACE pg_default +
                              | )                                                    +
                              | ENABLE ROW MOVEMENT;
(1 row)

show create table t_create_table_partition_004;
            Table             |                                                                                                 Create Table                                                                                                  
------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 t_create_table_partition_004 | SET search_path = public;                                                                                                                                                                                    +
                              | CREATE TABLE t_create_table_partition_004 (                                                                                                                                                                  +
                              |     c integer                                                                                                                                                                                                +
                              | )                                                                                                                                                                                                            +
                              | WITH (orientation=row, compression=no)                                                                                                                                                                       +
                              | PARTITION BY RANGE (c)                                                                                                                                                                                       +
                              | (                                                                                                                                                                                                            +
                              |     PARTITION p1 VALUES LESS THAN (1000) TABLESPACE pg_default,                                                                                                                                              +
                              |     PARTITION p2 VALUES LESS THAN (2000) TABLESPACE pg_default,                                                                                                                                              +
                              |     PARTITION p3 VALUES LESS THAN (4000) TABLESPACE pg_default,                                                                                                                                              +
                              |     PARTITION p4 VALUES LESS THAN (MAXVALUE) TABLESPACE pg_default                                                                                                                                           +
                              | )                                                                                                                                                                                                            +
                              | ENABLE ROW MOVEMENT;                                                                                                                                                                                         +
                              | CREATE INDEX t_create_table_partition_004_c_idx ON t_create_table_partition_004 USING btree (c) LOCAL(PARTITION p1_c_idx, PARTITION p2_c_idx, PARTITION p3_c_idx, PARTITION p4_c_idx)  TABLESPACE pg_default;
(1 row)

show create table t_create_table_partition_005;
            Table             |                                                                                                             Create Table                                                                                                              
------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 t_create_table_partition_005 | SET search_path = public;                                                                                                                                                                                                            +
                              | CREATE TABLE t_create_table_partition_005 (                                                                                                                                                                                          +
                              |     c integer,                                                                                                                                                                                                                       +
                              |     CONSTRAINT t_create_table_partition_005_c_check CHECK ((c > 0))                                                                                                                                                                  +
                              | )                                                                                                                                                                                                                                    +
                              | WITH (orientation=row, compression=no)                                                                                                                                                                                               +
                              | PARTITION BY RANGE (c)                                                                                                                                                                                                               +
                              | (                                                                                                                                                                                                                                    +
                              |     PARTITION p1_0 VALUES LESS THAN (0) TABLESPACE pg_default,                                                                                                                                                                       +
                              |     PARTITION p1_1 VALUES LESS THAN (1000) TABLESPACE pg_default,                                                                                                                                                                    +
                              |     PARTITION p2 VALUES LESS THAN (2000) TABLESPACE pg_default,                                                                                                                                                                      +
                              |     PARTITION p3 VALUES LESS THAN (4000) TABLESPACE pg_default,                                                                                                                                                                      +
                              |     PARTITION p4 VALUES LESS THAN (MAXVALUE) TABLESPACE pg_default                                                                                                                                                                   +
                              | )                                                                                                                                                                                                                                    +
                              | ENABLE ROW MOVEMENT;                                                                                                                                                                                                                 +
                              | CREATE INDEX t_create_table_partition_005_c_idx ON t_create_table_partition_005 USING btree (c) LOCAL(PARTITION p1_0_c_idx, PARTITION p1_1_c_idx, PARTITION p2_c_idx, PARTITION p3_c_idx, PARTITION p4_c_idx)  TABLESPACE pg_default;
(1 row)

show create table t_create_table_partition_006;
            Table             |                                Create Table                                
------------------------------+----------------------------------------------------------------------------
 t_create_table_partition_006 | SET search_path = public;                                                 +
                              | CREATE TABLE t_create_table_partition_006 (                               +
                              |     col1 integer NOT NULL,                                                +
                              |     col2 integer                                                          +
                              | )                                                                         +
                              | WITH (orientation=row, compression=no)                                    +
                              | PARTITION BY RANGE (col1) SUBPARTITION BY RANGE (col2)                    +
                              | (                                                                         +
                              |     PARTITION p1 VALUES LESS THAN (1000) TABLESPACE pg_default            +
                              |     (                                                                     +
                              |         SUBPARTITION p11 VALUES LESS THAN (500) TABLESPACE pg_default,    +
                              |         SUBPARTITION p12 VALUES LESS THAN (1000) TABLESPACE pg_default    +
                              |     ),                                                                    +
                              |     PARTITION p2 VALUES LESS THAN (2000) TABLESPACE pg_default            +
                              |     (                                                                     +
                              |         SUBPARTITION p21 VALUES LESS THAN (1500) TABLESPACE pg_default,   +
                              |         SUBPARTITION p22 VALUES LESS THAN (2000) TABLESPACE pg_default    +
                              |     ),                                                                    +
                              |     PARTITION p3 VALUES LESS THAN (4000) TABLESPACE pg_default            +
                              |     (                                                                     +
                              |         SUBPARTITION p31 VALUES LESS THAN (3000) TABLESPACE pg_default,   +
                              |         SUBPARTITION p32 VALUES LESS THAN (4000) TABLESPACE pg_default    +
                              |     ),                                                                    +
                              |     PARTITION p4 VALUES LESS THAN (MAXVALUE) TABLESPACE pg_default        +
                              |     (                                                                     +
                              |         SUBPARTITION p41 VALUES LESS THAN (8000) TABLESPACE pg_default,   +
                              |         SUBPARTITION p42 VALUES LESS THAN (MAXVALUE) TABLESPACE pg_default+
                              |     )                                                                     +
                              | )                                                                         +
                              | ENABLE ROW MOVEMENT;
(1 row)

show create table t_create_table_partition_007;
            Table             |                                                                                                 Create Table                                                                                                  
------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 t_create_table_partition_007 | SET search_path = public;                                                                                                                                                                                    +
                              | CREATE TABLE t_create_table_partition_007 (                                                                                                                                                                  +
                              |     c integer                                                                                                                                                                                                +
                              | )                                                                                                                                                                                                            +
                              | WITH (orientation=row, compression=no)                                                                                                                                                                       +
                              | PARTITION BY RANGE (c)                                                                                                                                                                                       +
                              | (                                                                                                                                                                                                            +
                              |     PARTITION p1 VALUES LESS THAN (1000) TABLESPACE pg_default,                                                                                                                                              +
                              |     PARTITION p2 VALUES LESS THAN (2000) TABLESPACE pg_default,                                                                                                                                              +
                              |     PARTITION p3 VALUES LESS THAN (4000) TABLESPACE pg_default,                                                                                                                                              +
                              |     PARTITION p4 VALUES LESS THAN (MAXVALUE) TABLESPACE pg_default                                                                                                                                           +
                              | )                                                                                                                                                                                                            +
                              | ENABLE ROW MOVEMENT;                                                                                                                                                                                         +
                              | CREATE INDEX t_create_table_partition_007_c_idx ON t_create_table_partition_007 USING btree (c) LOCAL(PARTITION p1_c_idx, PARTITION p2_c_idx, PARTITION p3_c_idx, PARTITION p4_c_idx)  TABLESPACE pg_default;
(1 row)

show create table t_create_table_partition_008;
            Table             |                                                                                                 Create Table                                                                                                  
------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 t_create_table_partition_008 | SET search_path = public;                                                                                                                                                                                    +
                              | CREATE TABLE t_create_table_partition_008 (                                                                                                                                                                  +
                              |     c integer                                                                                                                                                                                                +
                              | )                                                                                                                                                                                                            +
                              | WITH (orientation=row, compression=no)                                                                                                                                                                       +
                              | PARTITION BY RANGE (c)                                                                                                                                                                                       +
                              | (                                                                                                                                                                                                            +
                              |     PARTITION p1 VALUES LESS THAN (1000) TABLESPACE pg_default,                                                                                                                                              +
                              |     PARTITION p2 VALUES LESS THAN (2000) TABLESPACE pg_default,                                                                                                                                              +
                              |     PARTITION p3 VALUES LESS THAN (4000) TABLESPACE pg_default,                                                                                                                                              +
                              |     PARTITION p4 VALUES LESS THAN (MAXVALUE) TABLESPACE pg_default                                                                                                                                           +
                              | )                                                                                                                                                                                                            +
                              | ENABLE ROW MOVEMENT;                                                                                                                                                                                         +
                              | CREATE INDEX t_create_table_partition_008_c_idx ON t_create_table_partition_008 USING btree (c) LOCAL(PARTITION p1_c_idx, PARTITION p2_c_idx, PARTITION p3_c_idx, PARTITION p4_c_idx)  TABLESPACE pg_default;
(1 row)

show create table t_create_table_partition_009;
            Table             |                                                                                                 Create Table                                                                                                  
------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 t_create_table_partition_009 | SET search_path = public;                                                                                                                                                                                    +
                              | CREATE TABLE t_create_table_partition_009 (                                                                                                                                                                  +
                              |     c integer                                                                                                                                                                                                +
                              | )                                                                                                                                                                                                            +
                              | WITH (orientation=row, compression=no)                                                                                                                                                                       +
                              | PARTITION BY RANGE (c)                                                                                                                                                                                       +
                              | (                                                                                                                                                                                                            +
                              |     PARTITION p1 VALUES LESS THAN (1000) TABLESPACE pg_default,                                                                                                                                              +
                              |     PARTITION p2 VALUES LESS THAN (2000) TABLESPACE pg_default,                                                                                                                                              +
                              |     PARTITION p3 VALUES LESS THAN (4000) TABLESPACE pg_default,                                                                                                                                              +
                              |     PARTITION p4 VALUES LESS THAN (MAXVALUE) TABLESPACE pg_default                                                                                                                                           +
                              | )                                                                                                                                                                                                            +
                              | ENABLE ROW MOVEMENT;                                                                                                                                                                                         +
                              | CREATE INDEX t_create_table_partition_009_c_idx ON t_create_table_partition_009 USING btree (c) LOCAL(PARTITION p1_c_idx, PARTITION p2_c_idx, PARTITION p3_c_idx, PARTITION p4_c_idx)  TABLESPACE pg_default;
(1 row)

show create table t_create_table_partition_010;
            Table             |                                                                                                             Create Table                                                                                                              
------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 t_create_table_partition_010 | SET search_path = public;                                                                                                                                                                                                            +
                              | CREATE TABLE t_create_table_partition_010 (                                                                                                                                                                                          +
                              |     c integer                                                                                                                                                                                                                        +
                              | )                                                                                                                                                                                                                                    +
                              | WITH (orientation=row, compression=no)                                                                                                                                                                                               +
                              | PARTITION BY RANGE (c)                                                                                                                                                                                                               +
                              | (                                                                                                                                                                                                                                    +
                              |     PARTITION p1_0 VALUES LESS THAN (0) TABLESPACE pg_default,                                                                                                                                                                       +
                              |     PARTITION p1_1 VALUES LESS THAN (1000) TABLESPACE pg_default,                                                                                                                                                                    +
                              |     PARTITION p2 VALUES LESS THAN (2000) TABLESPACE pg_default,                                                                                                                                                                      +
                              |     PARTITION p3 VALUES LESS THAN (4000) TABLESPACE pg_default,                                                                                                                                                                      +
                              |     PARTITION p4 VALUES LESS THAN (MAXVALUE) TABLESPACE pg_default                                                                                                                                                                   +
                              | )                                                                                                                                                                                                                                    +
                              | ENABLE ROW MOVEMENT;                                                                                                                                                                                                                 +
                              | CREATE INDEX t_create_table_partition_010_c_idx ON t_create_table_partition_010 USING btree (c) LOCAL(PARTITION p1_0_c_idx, PARTITION p1_1_c_idx, PARTITION p2_c_idx, PARTITION p3_c_idx, PARTITION p4_c_idx)  TABLESPACE pg_default;
(1 row)

show create table t_create_table_partition_011;
            Table             |                                                                                                             Create Table                                                                                                              
------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 t_create_table_partition_011 | SET search_path = public;                                                                                                                                                                                                            +
                              | CREATE TABLE t_create_table_partition_011 (                                                                                                                                                                                          +
                              |     c integer                                                                                                                                                                                                                        +
                              | )                                                                                                                                                                                                                                    +
                              | WITH (orientation=row, compression=no)                                                                                                                                                                                               +
                              | PARTITION BY RANGE (c)                                                                                                                                                                                                               +
                              | (                                                                                                                                                                                                                                    +
                              |     PARTITION p1_0 VALUES LESS THAN (0) TABLESPACE pg_default,                                                                                                                                                                       +
                              |     PARTITION p1_1 VALUES LESS THAN (1000) TABLESPACE pg_default,                                                                                                                                                                    +
                              |     PARTITION p2 VALUES LESS THAN (2000) TABLESPACE pg_default,                                                                                                                                                                      +
                              |     PARTITION p3 VALUES LESS THAN (4000) TABLESPACE pg_default,                                                                                                                                                                      +
                              |     PARTITION p4 VALUES LESS THAN (MAXVALUE) TABLESPACE pg_default                                                                                                                                                                   +
                              | )                                                                                                                                                                                                                                    +
                              | ENABLE ROW MOVEMENT;                                                                                                                                                                                                                 +
                              | CREATE INDEX t_create_table_partition_011_c_idx ON t_create_table_partition_011 USING btree (c) LOCAL(PARTITION p1_0_c_idx, PARTITION p1_1_c_idx, PARTITION p2_c_idx, PARTITION p3_c_idx, PARTITION p4_c_idx)  TABLESPACE pg_default;
(1 row)

show create table t_create_table_partition_012;
            Table             |                                                                                                             Create Table                                                                                                              
------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 t_create_table_partition_012 | SET search_path = public;                                                                                                                                                                                                            +
                              | CREATE TABLE t_create_table_partition_012 (                                                                                                                                                                                          +
                              |     c integer,                                                                                                                                                                                                                       +
                              |     CONSTRAINT t_create_table_partition_005_c_check CHECK ((c > 0))                                                                                                                                                                  +
                              | )                                                                                                                                                                                                                                    +
                              | WITH (orientation=row, compression=no)                                                                                                                                                                                               +
                              | PARTITION BY RANGE (c)                                                                                                                                                                                                               +
                              | (                                                                                                                                                                                                                                    +
                              |     PARTITION p1_0 VALUES LESS THAN (0) TABLESPACE pg_default,                                                                                                                                                                       +
                              |     PARTITION p1_1 VALUES LESS THAN (1000) TABLESPACE pg_default,                                                                                                                                                                    +
                              |     PARTITION p2 VALUES LESS THAN (2000) TABLESPACE pg_default,                                                                                                                                                                      +
                              |     PARTITION p3 VALUES LESS THAN (4000) TABLESPACE pg_default,                                                                                                                                                                      +
                              |     PARTITION p4 VALUES LESS THAN (MAXVALUE) TABLESPACE pg_default                                                                                                                                                                   +
                              | )                                                                                                                                                                                                                                    +
                              | ENABLE ROW MOVEMENT;                                                                                                                                                                                                                 +
                              | CREATE INDEX t_create_table_partition_012_c_idx ON t_create_table_partition_012 USING btree (c) LOCAL(PARTITION p1_0_c_idx, PARTITION p1_1_c_idx, PARTITION p2_c_idx, PARTITION p3_c_idx, PARTITION p4_c_idx)  TABLESPACE pg_default;
(1 row)

show create table t_create_table_partition_013;
            Table             |                                Create Table                                
------------------------------+----------------------------------------------------------------------------
 t_create_table_partition_013 | SET search_path = public;                                                 +
                              | CREATE TABLE t_create_table_partition_013 (                               +
                              |     col1 integer NOT NULL,                                                +
                              |     col2 integer                                                          +
                              | )                                                                         +
                              | WITH (orientation=row, compression=no)                                    +
                              | PARTITION BY RANGE (col1) SUBPARTITION BY RANGE (col2)                    +
                              | (                                                                         +
                              |     PARTITION p1 VALUES LESS THAN (1000) TABLESPACE pg_default            +
                              |     (                                                                     +
                              |         SUBPARTITION p11 VALUES LESS THAN (500) TABLESPACE pg_default,    +
                              |         SUBPARTITION p12 VALUES LESS THAN (1000) TABLESPACE pg_default    +
                              |     ),                                                                    +
                              |     PARTITION p2 VALUES LESS THAN (2000) TABLESPACE pg_default            +
                              |     (                                                                     +
                              |         SUBPARTITION p21 VALUES LESS THAN (1500) TABLESPACE pg_default,   +
                              |         SUBPARTITION p22 VALUES LESS THAN (2000) TABLESPACE pg_default    +
                              |     ),                                                                    +
                              |     PARTITION p3 VALUES LESS THAN (4000) TABLESPACE pg_default            +
                              |     (                                                                     +
                              |         SUBPARTITION p31 VALUES LESS THAN (3000) TABLESPACE pg_default,   +
                              |         SUBPARTITION p32 VALUES LESS THAN (4000) TABLESPACE pg_default    +
                              |     ),                                                                    +
                              |     PARTITION p4 VALUES LESS THAN (MAXVALUE) TABLESPACE pg_default        +
                              |     (                                                                     +
                              |         SUBPARTITION p41 VALUES LESS THAN (8000) TABLESPACE pg_default,   +
                              |         SUBPARTITION p42 VALUES LESS THAN (MAXVALUE) TABLESPACE pg_default+
                              |     )                                                                     +
                              | )                                                                         +
                              | ENABLE ROW MOVEMENT;
(1 row)

show create table t_create_table_partition_014;
            Table             |                                Create Table                                
------------------------------+----------------------------------------------------------------------------
 t_create_table_partition_014 | SET search_path = public;                                                 +
                              | CREATE TABLE t_create_table_partition_014 (                               +
                              |     col1 integer NOT NULL,                                                +
                              |     col2 integer                                                          +
                              | )                                                                         +
                              | WITH (orientation=row, compression=no)                                    +
                              | PARTITION BY RANGE (col1) SUBPARTITION BY RANGE (col2)                    +
                              | (                                                                         +
                              |     PARTITION p1 VALUES LESS THAN (1000) TABLESPACE pg_default            +
                              |     (                                                                     +
                              |         SUBPARTITION p11 VALUES LESS THAN (500) TABLESPACE pg_default,    +
                              |         SUBPARTITION p12 VALUES LESS THAN (1000) TABLESPACE pg_default    +
                              |     ),                                                                    +
                              |     PARTITION p2 VALUES LESS THAN (2000) TABLESPACE pg_default            +
                              |     (                                                                     +
                              |         SUBPARTITION p21 VALUES LESS THAN (1500) TABLESPACE pg_default,   +
                              |         SUBPARTITION p22 VALUES LESS THAN (2000) TABLESPACE pg_default    +
                              |     ),                                                                    +
                              |     PARTITION p3 VALUES LESS THAN (4000) TABLESPACE pg_default            +
                              |     (                                                                     +
                              |         SUBPARTITION p31 VALUES LESS THAN (3000) TABLESPACE pg_default,   +
                              |         SUBPARTITION p32 VALUES LESS THAN (4000) TABLESPACE pg_default    +
                              |     ),                                                                    +
                              |     PARTITION p4 VALUES LESS THAN (MAXVALUE) TABLESPACE pg_default        +
                              |     (                                                                     +
                              |         SUBPARTITION p41 VALUES LESS THAN (8000) TABLESPACE pg_default,   +
                              |         SUBPARTITION p42 VALUES LESS THAN (MAXVALUE) TABLESPACE pg_default+
                              |     )                                                                     +
                              | )                                                                         +
                              | ENABLE ROW MOVEMENT;
(1 row)

show create table t_create_table_partition_015;
            Table             |                                Create Table                                
------------------------------+----------------------------------------------------------------------------
 t_create_table_partition_015 | SET search_path = public;                                                 +
                              | CREATE TABLE t_create_table_partition_015 (                               +
                              |     col1 integer NOT NULL,                                                +
                              |     col2 integer                                                          +
                              | )                                                                         +
                              | WITH (orientation=row, compression=no)                                    +
                              | PARTITION BY RANGE (col1) SUBPARTITION BY RANGE (col2)                    +
                              | (                                                                         +
                              |     PARTITION p1 VALUES LESS THAN (1000) TABLESPACE pg_default            +
                              |     (                                                                     +
                              |         SUBPARTITION p11 VALUES LESS THAN (500) TABLESPACE pg_default,    +
                              |         SUBPARTITION p12 VALUES LESS THAN (1000) TABLESPACE pg_default    +
                              |     ),                                                                    +
                              |     PARTITION p2 VALUES LESS THAN (2000) TABLESPACE pg_default            +
                              |     (                                                                     +
                              |         SUBPARTITION p21 VALUES LESS THAN (1500) TABLESPACE pg_default,   +
                              |         SUBPARTITION p22 VALUES LESS THAN (2000) TABLESPACE pg_default    +
                              |     ),                                                                    +
                              |     PARTITION p3 VALUES LESS THAN (4000) TABLESPACE pg_default            +
                              |     (                                                                     +
                              |         SUBPARTITION p31 VALUES LESS THAN (3000) TABLESPACE pg_default,   +
                              |         SUBPARTITION p32 VALUES LESS THAN (4000) TABLESPACE pg_default    +
                              |     ),                                                                    +
                              |     PARTITION p4 VALUES LESS THAN (MAXVALUE) TABLESPACE pg_default        +
                              |     (                                                                     +
                              |         SUBPARTITION p41 VALUES LESS THAN (8000) TABLESPACE pg_default,   +
                              |         SUBPARTITION p42 VALUES LESS THAN (MAXVALUE) TABLESPACE pg_default+
                              |     )                                                                     +
                              | )                                                                         +
                              | ENABLE ROW MOVEMENT;
(1 row)

show create table t_create_table_partition_016;
            Table             |                                                                                                 Create Table                                                                                                  
------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 t_create_table_partition_016 | SET search_path = public;                                                                                                                                                                                    +
                              | CREATE TABLE t_create_table_partition_016 (                                                                                                                                                                  +
                              |     c integer                                                                                                                                                                                                +
                              | )                                                                                                                                                                                                            +
                              | WITH (orientation=row, compression=no)                                                                                                                                                                       +
                              | PARTITION BY RANGE (c)                                                                                                                                                                                       +
                              | (                                                                                                                                                                                                            +
                              |     PARTITION p1 VALUES LESS THAN (1000) TABLESPACE pg_default,                                                                                                                                              +
                              |     PARTITION p2 VALUES LESS THAN (2000) TABLESPACE pg_default,                                                                                                                                              +
                              |     PARTITION p3 VALUES LESS THAN (4000) TABLESPACE pg_default,                                                                                                                                              +
                              |     PARTITION p4 VALUES LESS THAN (MAXVALUE) TABLESPACE pg_default                                                                                                                                           +
                              | )                                                                                                                                                                                                            +
                              | ENABLE ROW MOVEMENT;                                                                                                                                                                                         +
                              | CREATE INDEX t_create_table_partition_016_c_idx ON t_create_table_partition_016 USING btree (c) LOCAL(PARTITION p1_c_idx, PARTITION p2_c_idx, PARTITION p3_c_idx, PARTITION p4_c_idx)  TABLESPACE pg_default;
(1 row)

show create table t_create_table_partition_017;
            Table             |                                                                                                 Create Table                                                                                                  
------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 t_create_table_partition_017 | SET search_path = public;                                                                                                                                                                                    +
                              | CREATE TABLE t_create_table_partition_017 (                                                                                                                                                                  +
                              |     c integer                                                                                                                                                                                                +
                              | )                                                                                                                                                                                                            +
                              | WITH (orientation=row, compression=no)                                                                                                                                                                       +
                              | PARTITION BY RANGE (c)                                                                                                                                                                                       +
                              | (                                                                                                                                                                                                            +
                              |     PARTITION p1 VALUES LESS THAN (1000) TABLESPACE pg_default,                                                                                                                                              +
                              |     PARTITION p2 VALUES LESS THAN (2000) TABLESPACE pg_default,                                                                                                                                              +
                              |     PARTITION p3 VALUES LESS THAN (4000) TABLESPACE pg_default,                                                                                                                                              +
                              |     PARTITION p4 VALUES LESS THAN (MAXVALUE) TABLESPACE pg_default                                                                                                                                           +
                              | )                                                                                                                                                                                                            +
                              | ENABLE ROW MOVEMENT;                                                                                                                                                                                         +
                              | CREATE INDEX t_create_table_partition_017_c_idx ON t_create_table_partition_017 USING btree (c) LOCAL(PARTITION p1_c_idx, PARTITION p2_c_idx, PARTITION p3_c_idx, PARTITION p4_c_idx)  TABLESPACE pg_default;
(1 row)

show create table t_create_table_partition_018;
            Table             |                                                                                                 Create Table                                                                                                  
------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 t_create_table_partition_018 | SET search_path = public;                                                                                                                                                                                    +
                              | CREATE TABLE t_create_table_partition_018 (                                                                                                                                                                  +
                              |     c integer                                                                                                                                                                                                +
                              | )                                                                                                                                                                                                            +
                              | WITH (orientation=row, compression=no)                                                                                                                                                                       +
                              | PARTITION BY RANGE (c)                                                                                                                                                                                       +
                              | (                                                                                                                                                                                                            +
                              |     PARTITION p1 VALUES LESS THAN (1000) TABLESPACE pg_default,                                                                                                                                              +
                              |     PARTITION p2 VALUES LESS THAN (2000) TABLESPACE pg_default,                                                                                                                                              +
                              |     PARTITION p3 VALUES LESS THAN (4000) TABLESPACE pg_default,                                                                                                                                              +
                              |     PARTITION p4 VALUES LESS THAN (MAXVALUE) TABLESPACE pg_default                                                                                                                                           +
                              | )                                                                                                                                                                                                            +
                              | ENABLE ROW MOVEMENT;                                                                                                                                                                                         +
                              | CREATE INDEX t_create_table_partition_018_c_idx ON t_create_table_partition_018 USING btree (c) LOCAL(PARTITION p1_c_idx, PARTITION p2_c_idx, PARTITION p3_c_idx, PARTITION p4_c_idx)  TABLESPACE pg_default;
(1 row)

show create table t_create_table_partition_019;
            Table             |                            Create Table                            
------------------------------+--------------------------------------------------------------------
 t_create_table_partition_019 | SET search_path = public;                                         +
                              | CREATE TABLE t_create_table_partition_019 (                       +
                              |     c integer                                                     +
                              | )                                                                 +
                              | WITH (orientation=row, compression=no)                            +
                              | PARTITION BY RANGE (c)                                            +
                              | (                                                                 +
                              |     PARTITION p1_0 VALUES LESS THAN (0) TABLESPACE pg_default,    +
                              |     PARTITION p1_1 VALUES LESS THAN (1000) TABLESPACE pg_default, +
                              |     PARTITION p2 VALUES LESS THAN (2000) TABLESPACE pg_default,   +
                              |     PARTITION p3 VALUES LESS THAN (4000) TABLESPACE pg_default,   +
                              |     PARTITION p4 VALUES LESS THAN (MAXVALUE) TABLESPACE pg_default+
                              | )                                                                 +
                              | ENABLE ROW MOVEMENT;
(1 row)

show create table t_create_table_partition_020;
            Table             |                                                                                                             Create Table                                                                                                              
------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 t_create_table_partition_020 | SET search_path = public;                                                                                                                                                                                                            +
                              | CREATE TABLE t_create_table_partition_020 (                                                                                                                                                                                          +
                              |     c integer                                                                                                                                                                                                                        +
                              | )                                                                                                                                                                                                                                    +
                              | WITH (orientation=row, compression=no)                                                                                                                                                                                               +
                              | PARTITION BY RANGE (c)                                                                                                                                                                                                               +
                              | (                                                                                                                                                                                                                                    +
                              |     PARTITION p1_0 VALUES LESS THAN (0) TABLESPACE pg_default,                                                                                                                                                                       +
                              |     PARTITION p1_1 VALUES LESS THAN (1000) TABLESPACE pg_default,                                                                                                                                                                    +
                              |     PARTITION p2 VALUES LESS THAN (2000) TABLESPACE pg_default,                                                                                                                                                                      +
                              |     PARTITION p3 VALUES LESS THAN (4000) TABLESPACE pg_default,                                                                                                                                                                      +
                              |     PARTITION p4 VALUES LESS THAN (MAXVALUE) TABLESPACE pg_default                                                                                                                                                                   +
                              | )                                                                                                                                                                                                                                    +
                              | ENABLE ROW MOVEMENT;                                                                                                                                                                                                                 +
                              | CREATE INDEX t_create_table_partition_020_c_idx ON t_create_table_partition_020 USING btree (c) LOCAL(PARTITION p1_0_c_idx, PARTITION p1_1_c_idx, PARTITION p2_c_idx, PARTITION p3_c_idx, PARTITION p4_c_idx)  TABLESPACE pg_default;
(1 row)

show create table t_create_table_partition_021;
            Table             |                                                                                                             Create Table                                                                                                              
------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 t_create_table_partition_021 | SET search_path = public;                                                                                                                                                                                                            +
                              | CREATE TABLE t_create_table_partition_021 (                                                                                                                                                                                          +
                              |     c integer                                                                                                                                                                                                                        +
                              | )                                                                                                                                                                                                                                    +
                              | WITH (orientation=row, compression=no)                                                                                                                                                                                               +
                              | PARTITION BY RANGE (c)                                                                                                                                                                                                               +
                              | (                                                                                                                                                                                                                                    +
                              |     PARTITION p1_0 VALUES LESS THAN (0) TABLESPACE pg_default,                                                                                                                                                                       +
                              |     PARTITION p1_1 VALUES LESS THAN (1000) TABLESPACE pg_default,                                                                                                                                                                    +
                              |     PARTITION p2 VALUES LESS THAN (2000) TABLESPACE pg_default,                                                                                                                                                                      +
                              |     PARTITION p3 VALUES LESS THAN (4000) TABLESPACE pg_default,                                                                                                                                                                      +
                              |     PARTITION p4 VALUES LESS THAN (MAXVALUE) TABLESPACE pg_default                                                                                                                                                                   +
                              | )                                                                                                                                                                                                                                    +
                              | ENABLE ROW MOVEMENT;                                                                                                                                                                                                                 +
                              | CREATE INDEX t_create_table_partition_021_c_idx ON t_create_table_partition_021 USING btree (c) LOCAL(PARTITION p1_0_c_idx, PARTITION p1_1_c_idx, PARTITION p2_c_idx, PARTITION p3_c_idx, PARTITION p4_c_idx)  TABLESPACE pg_default;
(1 row)

show create table t_create_table_partition_022;
            Table             |                                Create Table                                
------------------------------+----------------------------------------------------------------------------
 t_create_table_partition_022 | SET search_path = public;                                                 +
                              | CREATE TABLE t_create_table_partition_022 (                               +
                              |     col1 integer NOT NULL,                                                +
                              |     col2 integer                                                          +
                              | )                                                                         +
                              | WITH (orientation=row, compression=no)                                    +
                              | PARTITION BY RANGE (col1) SUBPARTITION BY RANGE (col2)                    +
                              | (                                                                         +
                              |     PARTITION p1 VALUES LESS THAN (1000) TABLESPACE pg_default            +
                              |     (                                                                     +
                              |         SUBPARTITION p11 VALUES LESS THAN (500) TABLESPACE pg_default,    +
                              |         SUBPARTITION p12 VALUES LESS THAN (1000) TABLESPACE pg_default    +
                              |     ),                                                                    +
                              |     PARTITION p2 VALUES LESS THAN (2000) TABLESPACE pg_default            +
                              |     (                                                                     +
                              |         SUBPARTITION p21 VALUES LESS THAN (1500) TABLESPACE pg_default,   +
                              |         SUBPARTITION p22 VALUES LESS THAN (2000) TABLESPACE pg_default    +
                              |     ),                                                                    +
                              |     PARTITION p3 VALUES LESS THAN (4000) TABLESPACE pg_default            +
                              |     (                                                                     +
                              |         SUBPARTITION p31 VALUES LESS THAN (3000) TABLESPACE pg_default,   +
                              |         SUBPARTITION p32 VALUES LESS THAN (4000) TABLESPACE pg_default    +
                              |     ),                                                                    +
                              |     PARTITION p4 VALUES LESS THAN (MAXVALUE) TABLESPACE pg_default        +
                              |     (                                                                     +
                              |         SUBPARTITION p41 VALUES LESS THAN (8000) TABLESPACE pg_default,   +
                              |         SUBPARTITION p42 VALUES LESS THAN (MAXVALUE) TABLESPACE pg_default+
                              |     )                                                                     +
                              | )                                                                         +
                              | ENABLE ROW MOVEMENT;
(1 row)

show create table t_create_table_partition_023;
            Table             |                Create Table                 
------------------------------+---------------------------------------------
 t_create_table_partition_023 | SET search_path = public;                  +
                              | CREATE TABLE t_create_table_partition_023 (+
                              |     col1 integer NOT NULL,                 +
                              |     col2 integer                           +
                              | )                                          +
                              | WITH (orientation=row, compression=no);
(1 row)

show create table t_create_table_partition_024;
            Table             |                                Create Table                                
------------------------------+----------------------------------------------------------------------------
 t_create_table_partition_024 | SET search_path = public;                                                 +
                              | CREATE TABLE t_create_table_partition_024 (                               +
                              |     col1 integer NOT NULL,                                                +
                              |     col2 integer                                                          +
                              | )                                                                         +
                              | WITH (orientation=row, compression=no)                                    +
                              | PARTITION BY RANGE (col1) SUBPARTITION BY RANGE (col2)                    +
                              | (                                                                         +
                              |     PARTITION p1 VALUES LESS THAN (1000) TABLESPACE pg_default            +
                              |     (                                                                     +
                              |         SUBPARTITION p11 VALUES LESS THAN (500) TABLESPACE pg_default,    +
                              |         SUBPARTITION p12 VALUES LESS THAN (1000) TABLESPACE pg_default    +
                              |     ),                                                                    +
                              |     PARTITION p2 VALUES LESS THAN (2000) TABLESPACE pg_default            +
                              |     (                                                                     +
                              |         SUBPARTITION p21 VALUES LESS THAN (1500) TABLESPACE pg_default,   +
                              |         SUBPARTITION p22 VALUES LESS THAN (2000) TABLESPACE pg_default    +
                              |     ),                                                                    +
                              |     PARTITION p3 VALUES LESS THAN (4000) TABLESPACE pg_default            +
                              |     (                                                                     +
                              |         SUBPARTITION p31 VALUES LESS THAN (3000) TABLESPACE pg_default,   +
                              |         SUBPARTITION p32 VALUES LESS THAN (4000) TABLESPACE pg_default    +
                              |     ),                                                                    +
                              |     PARTITION p4 VALUES LESS THAN (MAXVALUE) TABLESPACE pg_default        +
                              |     (                                                                     +
                              |         SUBPARTITION p41 VALUES LESS THAN (8000) TABLESPACE pg_default,   +
                              |         SUBPARTITION p42 VALUES LESS THAN (MAXVALUE) TABLESPACE pg_default+
                              |     )                                                                     +
                              | )                                                                         +
                              | ENABLE ROW MOVEMENT;
(1 row)

select * from t_create_table_partition_001 partition(p0, p1, p2) order by (col1, col2);
 col1 | col2 
------+------
   10 |    1
   18 |    2
   20 |    3
   30 |    4
   35 |    5
   40 |    6
   50 |    7
(7 rows)

select * from t_create_table_partition_002 partition(p0, p1, p2) order by (col1, col2);
 col1 | col2  
------+-------
   10 |  1000
   18 |  2000
   20 |  3000
   30 |  4000
   35 |  5000
   40 |  6000
   50 |  8000
   60 | 10000
   70 | 20000
   80 | 30000
(10 rows)

select * from t_create_table_partition_002 partition(p0_0, p0_1, p0_2) order by (col1, col2);
 col1 | col2 
------+------
   10 | 1000
(1 row)

select * from t_create_table_partition_002 partition(p1, p1_0, p1_1, p1_2) order by (col1, col2);
 col1 | col2 
------+------
   18 | 2000
   20 | 3000
   30 | 4000
(3 rows)

select * from t_create_table_partition_003 partition(p1, p2, p3) order by (col1, col2);
 col1 | col2 
------+------
 1000 |    0
 2000 |    0
 4000 |    0
(3 rows)

\d t_alter_table_partition_001
Table "public.t_alter_table_partition_001"
 Column |  Type   | Modifiers 
--------+---------+-----------
 col1   | integer | 
 col2   | integer | 

\d t_alter_table_partition_002
Table "public.t_alter_table_partition_002"
 Column |  Type   | Modifiers 
--------+---------+-----------
 col1   | integer | 
 col2   | integer | 
Partition By LIST(col1)
Number of partitions: 3 (View pg_partition to check each partition range.)

\d t_alter_table_partition_003
Table "public.t_alter_table_partition_003"
 Column |  Type   | Modifiers 
--------+---------+-----------
 col1   | integer | 
 col2   | integer | 
Partition By HASH(col1)
Number of partitions: 3 (View pg_partition to check each partition range.)

\d t_alter_table_partition_004
Table "public.t_alter_table_partition_004"
 Column |  Type   | Modifiers 
--------+---------+-----------
 col1   | integer | 
 col2   | integer | 
Partition By RANGE(col1)
Number of partitions: 4 (View pg_partition to check each partition range.)

\d t_alter_table_partition_005
Table "public.t_alter_table_partition_005"
 Column |  Type   | Modifiers 
--------+---------+-----------
 col1   | integer | 
 col2   | integer | 
Partition By RANGE(col1)
Number of partitions: 2 (View pg_partition to check each partition range.)

\d t_alter_table_partition_006
Table "public.t_alter_table_partition_006"
 Column |  Type   | Modifiers 
--------+---------+-----------
 col1   | integer | 
 col2   | integer | 
Partition By RANGE(col1)
Number of partitions: 3 (View pg_partition to check each partition range.)

\d t_alter_table_partition_007
Table "public.t_alter_table_partition_007"
 Column |  Type   | Modifiers 
--------+---------+-----------
 col1   | integer | 
 col2   | integer | 
Partition By RANGE(col1)
Number of partitions: 3 (View pg_partition to check each partition range.)

\d t_alter_table_partition_008
Table "public.t_alter_table_partition_008"
 Column |  Type   | Modifiers 
--------+---------+-----------
 col1   | integer | 
 col2   | integer | 
Partition By RANGE(col1)
Number of partitions: 3 (View pg_partition to check each partition range.)

\d t_alter_table_partition_009
Table "public.t_alter_table_partition_009"
 Column |  Type   | Modifiers 
--------+---------+-----------
 col1   | integer | 
 col2   | integer | 
Partition By RANGE(col1)
Number of partitions: 3 (View pg_partition to check each partition range.)

\d t_alter_table_partition_010
Table "public.t_alter_table_partition_010"
 Column |  Type   | Modifiers 
--------+---------+-----------
 col1   | integer | 
 col2   | integer | 
Partition By RANGE(col1)
Number of partitions: 3 (View pg_partition to check each partition range.)

\d t_alter_table_partition_011
Table "public.t_alter_table_partition_011"
 Column |  Type   | Modifiers 
--------+---------+-----------
 col1   | integer | 
 col2   | integer | 
Partition By RANGE(col1)
Number of partitions: 3 (View pg_partition to check each partition range.)

\d t_alter_table_partition_012
Table "public.t_alter_table_partition_012"
 Column |  Type   | Modifiers 
--------+---------+-----------
 col1   | integer | 
 col2   | integer | 
Partition By RANGE(col1)
Number of partitions: 3 (View pg_partition to check each partition range.)

\d t_alter_table_partition_013
Table "public.t_alter_table_partition_013"
 Column |  Type   | Modifiers 
--------+---------+-----------
 col1   | integer | 
 col2   | integer | 

\d t_alter_table_partition_014
Table "public.t_alter_table_partition_014"
 Column |  Type   | Modifiers 
--------+---------+-----------
 col1   | integer | 
 col2   | integer | 
Partition By RANGE(col1)
Number of partitions: 3 (View pg_partition to check each partition range.)

\d t_alter_table_partition_015
Table "public.t_alter_table_partition_015"
 Column |  Type   | Modifiers 
--------+---------+-----------
 col1   | integer | 
 col2   | integer | 
Partition By RANGE(col1)
Number of partitions: 3 (View pg_partition to check each partition range.)

\d t_alter_table_partition_016
Table "public.t_alter_table_partition_016"
 Column |  Type   | Modifiers 
--------+---------+-----------
 col1   | integer | 
 col2   | integer | 
Partition By RANGE(col1)
Number of partitions: 3 (View pg_partition to check each partition range.)

\d t_alter_table_partition_017
Table "public.t_alter_table_partition_017"
 Column |  Type   | Modifiers 
--------+---------+-----------
 col1   | integer | 
 col2   | integer | 
Partition By RANGE(col1)
Number of partitions: 3 (View pg_partition to check each partition range.)

\d t_alter_table_partition_018
Table "public.t_alter_table_partition_018"
 Column |  Type   | Modifiers 
--------+---------+-----------
 col1   | integer | 
 col2   | integer | 
Partition By RANGE(col1)
Number of partitions: 4 (View pg_partition to check each partition range.)

\d t_alter_table_partition_019
Table "public.t_alter_table_partition_019"
 Column |  Type   | Modifiers 
--------+---------+-----------
 col1   | integer | 
 col2   | integer | 
Partition By RANGE(col1)
Number of partitions: 3 (View pg_partition to check each partition range.)

\d t_alter_table_partition_020
Table "public.t_alter_table_partition_020"
 Column |  Type   | Modifiers 
--------+---------+-----------
 col1   | integer | 
 col2   | integer | 
Partition By RANGE(col1)
Number of partitions: 3 (View pg_partition to check each partition range.)

\d t_alter_table_partition_021
Table "public.t_alter_table_partition_021"
 Column |  Type   | Modifiers 
--------+---------+-----------
 col1   | integer | 
 col2   | integer | 
Partition By RANGE(col1)
Number of partitions: 3 (View pg_partition to check each partition range.)

\d t_alter_table_partition_022
Table "public.t_alter_table_partition_022"
 Column |  Type   | Modifiers 
--------+---------+-----------
 col1   | integer | 
 col2   | integer | 
Partition By RANGE(col1) Subpartition By HASH(col2)
Number of partitions: 3 (View pg_partition to check each partition range.)
Number of subpartitions: 10 (View pg_partition to check each subpartition range.)

\d t_alter_table_partition_023
Table "public.t_alter_table_partition_023"
 Column |  Type   | Modifiers 
--------+---------+-----------
 col1   | integer | 
 col2   | integer | 
Partition By RANGE(col1) Subpartition By HASH(col2)
Number of partitions: 3 (View pg_partition to check each partition range.)
Number of subpartitions: 8 (View pg_partition to check each subpartition range.)

\d t_alter_table_partition_024
Table "public.t_alter_table_partition_024"
 Column |  Type   | Modifiers 
--------+---------+-----------
 col1   | integer | 
 col2   | integer | 

\d t_alter_table_partition_025
Table "public.t_alter_table_partition_025"
 Column |  Type   | Modifiers 
--------+---------+-----------
 col1   | integer | 
 col2   | integer | 
Partition By LIST(col1) Subpartition By RANGE(col2)
Number of partitions: 3 (View pg_partition to check each partition range.)
Number of subpartitions: 9 (View pg_partition to check each subpartition range.)

\d t_alter_table_partition_026
Table "public.t_alter_table_partition_026"
 Column |  Type   | Modifiers 
--------+---------+-----------
 col1   | integer | 
 col2   | integer | 
Partition By LIST(col1) Subpartition By LIST(col2)
Number of partitions: 3 (View pg_partition to check each partition range.)
Number of subpartitions: 9 (View pg_partition to check each subpartition range.)

\d t_alter_table_partition_027
Table "public.t_alter_table_partition_027"
 Column |  Type   | Modifiers 
--------+---------+-----------
 col1   | integer | 
 col2   | integer | 
Partition By LIST(col1) Subpartition By HASH(col2)
Number of partitions: 3 (View pg_partition to check each partition range.)
Number of subpartitions: 9 (View pg_partition to check each subpartition range.)

\d t_alter_table_partition_028
Table "public.t_alter_table_partition_028"
 Column |  Type   | Modifiers 
--------+---------+-----------
 col1   | integer | 
 col2   | integer | 
Partition By HASH(col1) Subpartition By RANGE(col2)
Number of partitions: 3 (View pg_partition to check each partition range.)
Number of subpartitions: 9 (View pg_partition to check each subpartition range.)

\d t_alter_table_partition_029
Table "public.t_alter_table_partition_029"
 Column |  Type   | Modifiers 
--------+---------+-----------
 col1   | integer | 
 col2   | integer | 
Partition By HASH(col1) Subpartition By LIST(col2)
Number of partitions: 3 (View pg_partition to check each partition range.)
Number of subpartitions: 9 (View pg_partition to check each subpartition range.)

\d t_alter_table_partition_030
Table "public.t_alter_table_partition_030"
 Column |  Type   | Modifiers 
--------+---------+-----------
 col1   | integer | 
 col2   | integer | 
Partition By HASH(col1) Subpartition By HASH(col2)
Number of partitions: 3 (View pg_partition to check each partition range.)
Number of subpartitions: 9 (View pg_partition to check each subpartition range.)

\d t_alter_table_partition_031
Table "public.t_alter_table_partition_031"
 Column |  Type   | Modifiers 
--------+---------+-----------
 col1   | integer | 
 col2   | integer | 
Partition By RANGE(col1) Subpartition By RANGE(col2)
Number of partitions: 4 (View pg_partition to check each partition range.)
Number of subpartitions: 12 (View pg_partition to check each subpartition range.)

\d t_alter_table_partition_032
Table "public.t_alter_table_partition_032"
 Column |  Type   | Modifiers 
--------+---------+-----------
 col1   | integer | 
 col2   | integer | 
Partition By LIST(col1) Subpartition By LIST(col1)
Number of partitions: 3 (View pg_partition to check each partition range.)
Number of subpartitions: 8 (View pg_partition to check each subpartition range.)

\d t_alter_table_partition_033
Table "public.t_alter_table_partition_033"
 Column |  Type   | Modifiers 
--------+---------+-----------
 col1   | integer | 
 col2   | integer | 
Partition By HASH(col1) Subpartition By HASH(col1)
Number of partitions: 3 (View pg_partition to check each partition range.)
Number of subpartitions: 9 (View pg_partition to check each subpartition range.)

\d t_alter_table_partition_034
Table "public.t_alter_table_partition_034"
 Column  |  Type   | Modifiers 
---------+---------+-----------
 time_id | date    | 
 col2    | integer | 
Partition By RANGE(time_id) INTERVAL('1 day')
Number of partitions: 3 (View pg_partition to check each partition range.)

\c postgres
drop database if exists restore_table_partition_db;
drop database if exists dump_table_partition_db;
