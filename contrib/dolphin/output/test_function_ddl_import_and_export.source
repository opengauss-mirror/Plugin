--create function测试
drop database if exists dump_function_db;
NOTICE:  database "dump_function_db" does not exist, skipping
drop database if exists restore_function_db;
NOTICE:  database "restore_function_db" does not exist, skipping
create database dump_function_db lc_collate='C' dbcompatibility = 'B';
create database restore_function_db lc_collate='C' dbcompatibility = 'B';
\c dump_function_db
create user test_function_definer password 'Test@123';
NOTICE:  The iteration value of password is not recommended.Setting the iteration value too small reduces the security of the password, and setting it too large results in performance degradation.
--test language sql
delimiter //;
create definer = test_function_definer function create_function_001() returns void language plpgsql
BEGIN
	return;
END;
//
delimiter ;//
--test [not] deterministic
delimiter //;
create definer = test_function_definer function create_function_002() returns void deterministic
BEGIN
	return;
END;
//
delimiter ;//
delimiter //;
create definer = test_function_definer function create_function_003() returns void not deterministic
BEGIN
	return;
END;
//
delimiter ;//
--test contains sql
delimiter //;
create definer = test_function_definer function create_function_004() returns void contains sql
BEGIN
	return;
END;
//
delimiter ;//
--no sql
delimiter //;
create definer = test_function_definer function create_function_005() returns void no sql
BEGIN
	return;
END;
//
delimiter ;//
delimiter //;
create definer = test_function_definer function create_function_006() returns void reads sql data
BEGIN
	return;
END;
//
delimiter ;//
--test modifies sql data
delimiter //;
create definer = test_function_definer function create_function_007() returns void modifies sql data
BEGIN
	return;
END;
//
delimiter ;//
--test sql security
delimiter //;
create definer = test_function_definer function create_function_008() returns void sql security definer
BEGIN
	return;
END;
//
delimiter ;//
delimiter //;
create definer = test_function_definer function create_function_009() returns void sql security invoker
BEGIN
	return;
END;
//
delimiter ;//
--test definer
delimiter //;
create definer = test_function_definer function create_function_010() returns void
BEGIN
	return;
END;
//
delimiter ;//
--test repeat
delimiter //;
create definer = test_function_definer function create_function_011(int) returns void
AS
$$
DECLARE
        i int = 0;
BEGIN
        repeat
                i = i + 1;
                until i > $1
        end repeat;
END;
$$ language plpgsql immutable;
//
delimiter ;//
select create_function_011(5);
 create_function_011 
---------------------
 
(1 row)

delimiter //;
create definer = test_function_definer function create_function_012(int) returns void
AS
$$
DECLARE
        i int = 0;
BEGIN
        <<label>> repeat
                i = i + 1;
                until i > $1
        end repeat label;
END;
$$ language plpgsql immutable;
//
delimiter ;//
select create_function_012(5);
 create_function_012 
---------------------
 
(1 row)

--test declare cursor
create table company(name varchar(100), loc varchar(100), no integer);
insert into company values('macrosoft', 'usa', 001);
insert into company values('oracle', 'usa', 002);
insert into company values('backbery', 'canada', 003);
delimiter //;
create definer = test_function_definer function create_function_013 returns void
AS
$$
DECLARE
        company_name varchar(100);
        company_loc varchar(100);
        company_no integer;
begin
        declare c1_all cursor is
                select name, loc, no from company order by 1, 2, 3;
        if not c1_all%isopen then open c1_all;
        end if;
        loop
                fetch c1_all into company_name, company_loc, company_no;
                exit when c1_all%notfound;
                raise notice '% : % : %', company_name, company_loc, company_no;
        end loop;
        if c1_all%isopen then
                close c1_all;
        end if;
end;
$$ language plpgsql immutable;
//
delimiter ;//
select create_function_013();
NOTICE:  backbery : canada : 3
CONTEXT:  referenced column: create_function_013
NOTICE:  macrosoft : usa : 1
CONTEXT:  referenced column: create_function_013
NOTICE:  oracle : usa : 2
CONTEXT:  referenced column: create_function_013
 create_function_013 
---------------------
 
(1 row)

--test declare condition
delimiter //;
create definer = test_function_definer function create_function_014 returns text
AS
$$
BEGIN
        declare DISVISION_ZERO condition for 1;
        return 'declare condition successed';
END;
$$ language plpgsql immutable;
//
delimiter ;//
select create_function_014();
     create_function_014     
-----------------------------
 declare condition successed
(1 row)

--test do statement
delimiter //;
create definer = test_function_definer function create_function_015 returns void
AS
$$
DECLARE
        x,y,z int =1;
BEGIN
        y := 2;
        z := 4;
        do x + x;
        do y * z;
        do x + x, y * z;
        do sin(x);
        do pg_sleep(1);
END;
$$ language plpgsql immutable;
//
delimiter ;//
--test iterate label
delimiter //;
create definer = test_function_definer function create_function_016(int) returns int
AS
$$
BEGIN
        label1: loop
        $1 := $1 + 1;
        if $1 < 10 then iterate label1;
        end if;
        leave label1;
        end loop label1;
        return $1;
END;
$$ language plpgsql immutable;
//
delimiter ;//
delimiter //;
create definer = test_function_definer function create_function_017(int) returns int
AS
$$
BEGIN
        loop
                $1 := $1 + 1;
                if $1 < 10 then iterate;
                end if;
                leave;
        end loop;
        return $1;
END;
$$ language plpgsql immutable;
//
delimiter ;//
--test case when condition
delimiter //;
create definer = test_function_definer function create_function_018(int) returns text
AS
$$
BEGIN
        case $1
                when 1 then
                        return 'one';
                when 2 then
                        return 'two';
                when 3 then
                        return 'three';
                else
                        return 'more than three';
        end case;
END;
$$ language plpgsql immutable;
//
delimiter ;//
select create_function_018(5);
 create_function_018 
---------------------
 more than three
(1 row)

--test while
delimiter //;
create definer = test_function_definer function create_function_019(int) returns int
AS
$$
BEGIN
        while $1 < 10
                do $1 := $1 + 1;
        end while;
        return $1;
END;
$$ language plpgsql immutable;
//
delimiter ;//
delimiter //;
create definer = test_function_definer function create_function_020(int) returns int
AS
$$
BEGIN
        label: while $1 < 10
                do $1 := $1 + 1;
        end while label;
        return $1;
END;
$$ language plpgsql immutable;
//
delimiter ;//
select create_function_020(5);
 create_function_020 
---------------------
                  10
(1 row)

show lc_collate;
 lc_collate 
------------
 C
(1 row)

show create function create_function_001;
      Function       |                               Create Function                                |                                               sql_mode                                               | character_set_client | collation_connection | Database Collation 
---------------------+------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------+----------------------+----------------------+--------------------
 create_function_001 | CREATE DEFINER = test_function_definer FUNCTION public.create_function_001()+| sql_mode_strict,sql_mode_full_group,pipes_as_concat,ansi_quotes,no_zero_date,pad_char_to_full_length | UTF8                 | C                    | C
                     |  RETURNS void                                                               +|                                                                                                      |                      |                      | 
                     |  LANGUAGE plpgsql                                                           +|                                                                                                      |                      |                      | 
                     |  NOT FENCED NOT SHIPPABLE                                                   +|                                                                                                      |                      |                      | 
                     |     BEGIN       return;                                                     +|                                                                                                      |                      |                      | 
                     | END;                                                                        +|                                                                                                      |                      |                      | 
                     |                                                                              |                                                                                                      |                      |                      | 
(1 row)

show create function create_function_002;
      Function       |                               Create Function                                |                                               sql_mode                                               | character_set_client | collation_connection | Database Collation 
---------------------+------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------+----------------------+----------------------+--------------------
 create_function_002 | CREATE DEFINER = test_function_definer FUNCTION public.create_function_002()+| sql_mode_strict,sql_mode_full_group,pipes_as_concat,ansi_quotes,no_zero_date,pad_char_to_full_length | UTF8                 | C                    | C
                     |  RETURNS void                                                               +|                                                                                                      |                      |                      | 
                     |  LANGUAGE plpgsql                                                           +|                                                                                                      |                      |                      | 
                     |  NOT FENCED NOT SHIPPABLE                                                   +|                                                                                                      |                      |                      | 
                     |     BEGIN       return;                                                     +|                                                                                                      |                      |                      | 
                     | END;                                                                        +|                                                                                                      |                      |                      | 
                     |                                                                              |                                                                                                      |                      |                      | 
(1 row)

show create function create_function_003;
      Function       |                               Create Function                                |                                               sql_mode                                               | character_set_client | collation_connection | Database Collation 
---------------------+------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------+----------------------+----------------------+--------------------
 create_function_003 | CREATE DEFINER = test_function_definer FUNCTION public.create_function_003()+| sql_mode_strict,sql_mode_full_group,pipes_as_concat,ansi_quotes,no_zero_date,pad_char_to_full_length | UTF8                 | C                    | C
                     |  RETURNS void                                                               +|                                                                                                      |                      |                      | 
                     |  LANGUAGE plpgsql                                                           +|                                                                                                      |                      |                      | 
                     |  NOT FENCED NOT SHIPPABLE                                                   +|                                                                                                      |                      |                      | 
                     |     BEGIN       return;                                                     +|                                                                                                      |                      |                      | 
                     | END;                                                                        +|                                                                                                      |                      |                      | 
                     |                                                                              |                                                                                                      |                      |                      | 
(1 row)

show create function create_function_004;
      Function       |                               Create Function                                |                                               sql_mode                                               | character_set_client | collation_connection | Database Collation 
---------------------+------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------+----------------------+----------------------+--------------------
 create_function_004 | CREATE DEFINER = test_function_definer FUNCTION public.create_function_004()+| sql_mode_strict,sql_mode_full_group,pipes_as_concat,ansi_quotes,no_zero_date,pad_char_to_full_length | UTF8                 | C                    | C
                     |  RETURNS void                                                               +|                                                                                                      |                      |                      | 
                     |  LANGUAGE plpgsql                                                           +|                                                                                                      |                      |                      | 
                     |  NOT FENCED NOT SHIPPABLE                                                   +|                                                                                                      |                      |                      | 
                     |     BEGIN       return;                                                     +|                                                                                                      |                      |                      | 
                     | END;                                                                        +|                                                                                                      |                      |                      | 
                     |                                                                              |                                                                                                      |                      |                      | 
(1 row)

show create function create_function_005;
      Function       |                               Create Function                                |                                               sql_mode                                               | character_set_client | collation_connection | Database Collation 
---------------------+------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------+----------------------+----------------------+--------------------
 create_function_005 | CREATE DEFINER = test_function_definer FUNCTION public.create_function_005()+| sql_mode_strict,sql_mode_full_group,pipes_as_concat,ansi_quotes,no_zero_date,pad_char_to_full_length | UTF8                 | C                    | C
                     |  RETURNS void                                                               +|                                                                                                      |                      |                      | 
                     |  LANGUAGE plpgsql                                                           +|                                                                                                      |                      |                      | 
                     |  NOT FENCED NOT SHIPPABLE                                                   +|                                                                                                      |                      |                      | 
                     |     BEGIN       return;                                                     +|                                                                                                      |                      |                      | 
                     | END;                                                                        +|                                                                                                      |                      |                      | 
                     |                                                                              |                                                                                                      |                      |                      | 
(1 row)

show create function create_function_006;
      Function       |                               Create Function                                |                                               sql_mode                                               | character_set_client | collation_connection | Database Collation 
---------------------+------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------+----------------------+----------------------+--------------------
 create_function_006 | CREATE DEFINER = test_function_definer FUNCTION public.create_function_006()+| sql_mode_strict,sql_mode_full_group,pipes_as_concat,ansi_quotes,no_zero_date,pad_char_to_full_length | UTF8                 | C                    | C
                     |  RETURNS void                                                               +|                                                                                                      |                      |                      | 
                     |  LANGUAGE plpgsql                                                           +|                                                                                                      |                      |                      | 
                     |  NOT FENCED NOT SHIPPABLE                                                   +|                                                                                                      |                      |                      | 
                     |     BEGIN       return;                                                     +|                                                                                                      |                      |                      | 
                     | END;                                                                        +|                                                                                                      |                      |                      | 
                     |                                                                              |                                                                                                      |                      |                      | 
(1 row)

show create function create_function_007;
      Function       |                               Create Function                                |                                               sql_mode                                               | character_set_client | collation_connection | Database Collation 
---------------------+------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------+----------------------+----------------------+--------------------
 create_function_007 | CREATE DEFINER = test_function_definer FUNCTION public.create_function_007()+| sql_mode_strict,sql_mode_full_group,pipes_as_concat,ansi_quotes,no_zero_date,pad_char_to_full_length | UTF8                 | C                    | C
                     |  RETURNS void                                                               +|                                                                                                      |                      |                      | 
                     |  LANGUAGE plpgsql                                                           +|                                                                                                      |                      |                      | 
                     |  NOT FENCED NOT SHIPPABLE                                                   +|                                                                                                      |                      |                      | 
                     |     BEGIN       return;                                                     +|                                                                                                      |                      |                      | 
                     | END;                                                                        +|                                                                                                      |                      |                      | 
                     |                                                                              |                                                                                                      |                      |                      | 
(1 row)

show create function create_function_008;
      Function       |                               Create Function                                |                                               sql_mode                                               | character_set_client | collation_connection | Database Collation 
---------------------+------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------+----------------------+----------------------+--------------------
 create_function_008 | CREATE DEFINER = test_function_definer FUNCTION public.create_function_008()+| sql_mode_strict,sql_mode_full_group,pipes_as_concat,ansi_quotes,no_zero_date,pad_char_to_full_length | UTF8                 | C                    | C
                     |  RETURNS void                                                               +|                                                                                                      |                      |                      | 
                     |  LANGUAGE plpgsql                                                           +|                                                                                                      |                      |                      | 
                     |  SECURITY DEFINER NOT FENCED NOT SHIPPABLE                                  +|                                                                                                      |                      |                      | 
                     |     BEGIN       return;                                                     +|                                                                                                      |                      |                      | 
                     | END;                                                                        +|                                                                                                      |                      |                      | 
                     |                                                                              |                                                                                                      |                      |                      | 
(1 row)

show create function create_function_009;
      Function       |                               Create Function                                |                                               sql_mode                                               | character_set_client | collation_connection | Database Collation 
---------------------+------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------+----------------------+----------------------+--------------------
 create_function_009 | CREATE DEFINER = test_function_definer FUNCTION public.create_function_009()+| sql_mode_strict,sql_mode_full_group,pipes_as_concat,ansi_quotes,no_zero_date,pad_char_to_full_length | UTF8                 | C                    | C
                     |  RETURNS void                                                               +|                                                                                                      |                      |                      | 
                     |  LANGUAGE plpgsql                                                           +|                                                                                                      |                      |                      | 
                     |  NOT FENCED NOT SHIPPABLE                                                   +|                                                                                                      |                      |                      | 
                     |     BEGIN       return;                                                     +|                                                                                                      |                      |                      | 
                     | END;                                                                        +|                                                                                                      |                      |                      | 
                     |                                                                              |                                                                                                      |                      |                      | 
(1 row)

show create function create_function_010;
      Function       |                               Create Function                                |                                               sql_mode                                               | character_set_client | collation_connection | Database Collation 
---------------------+------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------+----------------------+----------------------+--------------------
 create_function_010 | CREATE DEFINER = test_function_definer FUNCTION public.create_function_010()+| sql_mode_strict,sql_mode_full_group,pipes_as_concat,ansi_quotes,no_zero_date,pad_char_to_full_length | UTF8                 | C                    | C
                     |  RETURNS void                                                               +|                                                                                                      |                      |                      | 
                     |  LANGUAGE plpgsql                                                           +|                                                                                                      |                      |                      | 
                     |  NOT FENCED NOT SHIPPABLE                                                   +|                                                                                                      |                      |                      | 
                     |     BEGIN       return;                                                     +|                                                                                                      |                      |                      | 
                     | END;                                                                        +|                                                                                                      |                      |                      | 
                     |                                                                              |                                                                                                      |                      |                      | 
(1 row)

show create function create_function_011;
      Function       |                                   Create Function                                   |                                               sql_mode                                               | character_set_client | collation_connection | Database Collation 
---------------------+-------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------+----------------------+----------------------+--------------------
 create_function_011 | CREATE DEFINER = test_function_definer FUNCTION public.create_function_011(integer)+| sql_mode_strict,sql_mode_full_group,pipes_as_concat,ansi_quotes,no_zero_date,pad_char_to_full_length | UTF8                 | C                    | C
                     |  RETURNS void                                                                      +|                                                                                                      |                      |                      | 
                     |  LANGUAGE plpgsql                                                                  +|                                                                                                      |                      |                      | 
                     |  IMMUTABLE NOT FENCED NOT SHIPPABLE                                                +|                                                                                                      |                      |                      | 
                     | AS $function$                                                                      +|                                                                                                      |                      |                      | 
                     | DECLARE                                                                            +|                                                                                                      |                      |                      | 
                     |         i int = 0;                                                                 +|                                                                                                      |                      |                      | 
                     | BEGIN                                                                              +|                                                                                                      |                      |                      | 
                     |         repeat                                                                     +|                                                                                                      |                      |                      | 
                     |                 i = i + 1;                                                         +|                                                                                                      |                      |                      | 
                     |                 until i > $1                                                       +|                                                                                                      |                      |                      | 
                     |         end repeat;                                                                +|                                                                                                      |                      |                      | 
                     | END;                                                                               +|                                                                                                      |                      |                      | 
                     | $function$;                                                                        +|                                                                                                      |                      |                      | 
                     |                                                                                     |                                                                                                      |                      |                      | 
(1 row)

show create function create_function_012;
      Function       |                                   Create Function                                   |                                               sql_mode                                               | character_set_client | collation_connection | Database Collation 
---------------------+-------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------+----------------------+----------------------+--------------------
 create_function_012 | CREATE DEFINER = test_function_definer FUNCTION public.create_function_012(integer)+| sql_mode_strict,sql_mode_full_group,pipes_as_concat,ansi_quotes,no_zero_date,pad_char_to_full_length | UTF8                 | C                    | C
                     |  RETURNS void                                                                      +|                                                                                                      |                      |                      | 
                     |  LANGUAGE plpgsql                                                                  +|                                                                                                      |                      |                      | 
                     |  IMMUTABLE NOT FENCED NOT SHIPPABLE                                                +|                                                                                                      |                      |                      | 
                     | AS $function$                                                                      +|                                                                                                      |                      |                      | 
                     | DECLARE                                                                            +|                                                                                                      |                      |                      | 
                     |         i int = 0;                                                                 +|                                                                                                      |                      |                      | 
                     | BEGIN                                                                              +|                                                                                                      |                      |                      | 
                     |         <<label>> repeat                                                           +|                                                                                                      |                      |                      | 
                     |                 i = i + 1;                                                         +|                                                                                                      |                      |                      | 
                     |                 until i > $1                                                       +|                                                                                                      |                      |                      | 
                     |         end repeat label;                                                          +|                                                                                                      |                      |                      | 
                     | END;                                                                               +|                                                                                                      |                      |                      | 
                     | $function$;                                                                        +|                                                                                                      |                      |                      | 
                     |                                                                                     |                                                                                                      |                      |                      | 
(1 row)

show create function create_function_013;
      Function       |                                 Create Function                                  |                                               sql_mode                                               | character_set_client | collation_connection | Database Collation 
---------------------+----------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------+----------------------+----------------------+--------------------
 create_function_013 | CREATE DEFINER = test_function_definer FUNCTION public.create_function_013()    +| sql_mode_strict,sql_mode_full_group,pipes_as_concat,ansi_quotes,no_zero_date,pad_char_to_full_length | UTF8                 | C                    | C
                     |  RETURNS void                                                                   +|                                                                                                      |                      |                      | 
                     |  LANGUAGE plpgsql                                                               +|                                                                                                      |                      |                      | 
                     |  IMMUTABLE NOT FENCED NOT SHIPPABLE                                             +|                                                                                                      |                      |                      | 
                     | AS $function$                                                                   +|                                                                                                      |                      |                      | 
                     | DECLARE                                                                         +|                                                                                                      |                      |                      | 
                     |         company_name varchar(100);                                              +|                                                                                                      |                      |                      | 
                     |         company_loc varchar(100);                                               +|                                                                                                      |                      |                      | 
                     |         company_no integer;                                                     +|                                                                                                      |                      |                      | 
                     | begin                                                                           +|                                                                                                      |                      |                      | 
                     |         declare c1_all cursor is                                                +|                                                                                                      |                      |                      | 
                     |                 select name, loc, no from company order by 1, 2, 3;             +|                                                                                                      |                      |                      | 
                     |         if not c1_all%isopen then open c1_all;                                  +|                                                                                                      |                      |                      | 
                     |         end if;                                                                 +|                                                                                                      |                      |                      | 
                     |         loop                                                                    +|                                                                                                      |                      |                      | 
                     |                 fetch c1_all into company_name, company_loc, company_no;        +|                                                                                                      |                      |                      | 
                     |                 exit when c1_all%notfound;                                      +|                                                                                                      |                      |                      | 
                     |                 raise notice '% : % : %', company_name, company_loc, company_no;+|                                                                                                      |                      |                      | 
                     |         end loop;                                                               +|                                                                                                      |                      |                      | 
                     |         if c1_all%isopen then                                                   +|                                                                                                      |                      |                      | 
                     |                 close c1_all;                                                   +|                                                                                                      |                      |                      | 
                     |         end if;                                                                 +|                                                                                                      |                      |                      | 
                     | end;                                                                            +|                                                                                                      |                      |                      | 
                     | $function$;                                                                     +|                                                                                                      |                      |                      | 
                     |                                                                                  |                                                                                                      |                      |                      | 
(1 row)

show create function create_function_014;
      Function       |                               Create Function                                |                                               sql_mode                                               | character_set_client | collation_connection | Database Collation 
---------------------+------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------+----------------------+----------------------+--------------------
 create_function_014 | CREATE DEFINER = test_function_definer FUNCTION public.create_function_014()+| sql_mode_strict,sql_mode_full_group,pipes_as_concat,ansi_quotes,no_zero_date,pad_char_to_full_length | UTF8                 | C                    | C
                     |  RETURNS text                                                               +|                                                                                                      |                      |                      | 
                     |  LANGUAGE plpgsql                                                           +|                                                                                                      |                      |                      | 
                     |  IMMUTABLE NOT FENCED NOT SHIPPABLE                                         +|                                                                                                      |                      |                      | 
                     | AS $function$                                                               +|                                                                                                      |                      |                      | 
                     | BEGIN                                                                       +|                                                                                                      |                      |                      | 
                     |         declare DISVISION_ZERO condition for 1;                             +|                                                                                                      |                      |                      | 
                     |         return 'declare condition successed';                               +|                                                                                                      |                      |                      | 
                     | END;                                                                        +|                                                                                                      |                      |                      | 
                     | $function$;                                                                 +|                                                                                                      |                      |                      | 
                     |                                                                              |                                                                                                      |                      |                      | 
(1 row)

show create function create_function_015;
      Function       |                               Create Function                                |                                               sql_mode                                               | character_set_client | collation_connection | Database Collation 
---------------------+------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------+----------------------+----------------------+--------------------
 create_function_015 | CREATE DEFINER = test_function_definer FUNCTION public.create_function_015()+| sql_mode_strict,sql_mode_full_group,pipes_as_concat,ansi_quotes,no_zero_date,pad_char_to_full_length | UTF8                 | C                    | C
                     |  RETURNS void                                                               +|                                                                                                      |                      |                      | 
                     |  LANGUAGE plpgsql                                                           +|                                                                                                      |                      |                      | 
                     |  IMMUTABLE NOT FENCED NOT SHIPPABLE                                         +|                                                                                                      |                      |                      | 
                     | AS $function$                                                               +|                                                                                                      |                      |                      | 
                     | DECLARE                                                                     +|                                                                                                      |                      |                      | 
                     |         x,y,z int =1;                                                       +|                                                                                                      |                      |                      | 
                     | BEGIN                                                                       +|                                                                                                      |                      |                      | 
                     |         y := 2;                                                             +|                                                                                                      |                      |                      | 
                     |         z := 4;                                                             +|                                                                                                      |                      |                      | 
                     |         do x + x;                                                           +|                                                                                                      |                      |                      | 
                     |         do y * z;                                                           +|                                                                                                      |                      |                      | 
                     |         do x + x, y * z;                                                    +|                                                                                                      |                      |                      | 
                     |         do sin(x);                                                          +|                                                                                                      |                      |                      | 
                     |         do pg_sleep(1);                                                     +|                                                                                                      |                      |                      | 
                     | END;                                                                        +|                                                                                                      |                      |                      | 
                     | $function$;                                                                 +|                                                                                                      |                      |                      | 
                     |                                                                              |                                                                                                      |                      |                      | 
(1 row)

show create function create_function_016;
      Function       |                                   Create Function                                   |                                               sql_mode                                               | character_set_client | collation_connection | Database Collation 
---------------------+-------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------+----------------------+----------------------+--------------------
 create_function_016 | CREATE DEFINER = test_function_definer FUNCTION public.create_function_016(integer)+| sql_mode_strict,sql_mode_full_group,pipes_as_concat,ansi_quotes,no_zero_date,pad_char_to_full_length | UTF8                 | C                    | C
                     |  RETURNS integer                                                                   +|                                                                                                      |                      |                      | 
                     |  LANGUAGE plpgsql                                                                  +|                                                                                                      |                      |                      | 
                     |  IMMUTABLE NOT FENCED NOT SHIPPABLE                                                +|                                                                                                      |                      |                      | 
                     | AS $function$                                                                      +|                                                                                                      |                      |                      | 
                     | BEGIN                                                                              +|                                                                                                      |                      |                      | 
                     |         label1: loop                                                               +|                                                                                                      |                      |                      | 
                     |         $1 := $1 + 1;                                                              +|                                                                                                      |                      |                      | 
                     |         if $1 < 10 then iterate label1;                                            +|                                                                                                      |                      |                      | 
                     |         end if;                                                                    +|                                                                                                      |                      |                      | 
                     |         leave label1;                                                              +|                                                                                                      |                      |                      | 
                     |         end loop label1;                                                           +|                                                                                                      |                      |                      | 
                     |         return $1;                                                                 +|                                                                                                      |                      |                      | 
                     | END;                                                                               +|                                                                                                      |                      |                      | 
                     | $function$;                                                                        +|                                                                                                      |                      |                      | 
                     |                                                                                     |                                                                                                      |                      |                      | 
(1 row)

show create function create_function_017;
      Function       |                                   Create Function                                   |                                               sql_mode                                               | character_set_client | collation_connection | Database Collation 
---------------------+-------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------+----------------------+----------------------+--------------------
 create_function_017 | CREATE DEFINER = test_function_definer FUNCTION public.create_function_017(integer)+| sql_mode_strict,sql_mode_full_group,pipes_as_concat,ansi_quotes,no_zero_date,pad_char_to_full_length | UTF8                 | C                    | C
                     |  RETURNS integer                                                                   +|                                                                                                      |                      |                      | 
                     |  LANGUAGE plpgsql                                                                  +|                                                                                                      |                      |                      | 
                     |  IMMUTABLE NOT FENCED NOT SHIPPABLE                                                +|                                                                                                      |                      |                      | 
                     | AS $function$                                                                      +|                                                                                                      |                      |                      | 
                     | BEGIN                                                                              +|                                                                                                      |                      |                      | 
                     |         loop                                                                       +|                                                                                                      |                      |                      | 
                     |                 $1 := $1 + 1;                                                      +|                                                                                                      |                      |                      | 
                     |                 if $1 < 10 then iterate;                                           +|                                                                                                      |                      |                      | 
                     |                 end if;                                                            +|                                                                                                      |                      |                      | 
                     |                 leave;                                                             +|                                                                                                      |                      |                      | 
                     |         end loop;                                                                  +|                                                                                                      |                      |                      | 
                     |         return $1;                                                                 +|                                                                                                      |                      |                      | 
                     | END;                                                                               +|                                                                                                      |                      |                      | 
                     | $function$;                                                                        +|                                                                                                      |                      |                      | 
                     |                                                                                     |                                                                                                      |                      |                      | 
(1 row)

show create function create_function_018;
      Function       |                                   Create Function                                   |                                               sql_mode                                               | character_set_client | collation_connection | Database Collation 
---------------------+-------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------+----------------------+----------------------+--------------------
 create_function_018 | CREATE DEFINER = test_function_definer FUNCTION public.create_function_018(integer)+| sql_mode_strict,sql_mode_full_group,pipes_as_concat,ansi_quotes,no_zero_date,pad_char_to_full_length | UTF8                 | C                    | C
                     |  RETURNS text                                                                      +|                                                                                                      |                      |                      | 
                     |  LANGUAGE plpgsql                                                                  +|                                                                                                      |                      |                      | 
                     |  IMMUTABLE NOT FENCED NOT SHIPPABLE                                                +|                                                                                                      |                      |                      | 
                     | AS $function$                                                                      +|                                                                                                      |                      |                      | 
                     | BEGIN                                                                              +|                                                                                                      |                      |                      | 
                     |         case $1                                                                    +|                                                                                                      |                      |                      | 
                     |                 when 1 then                                                        +|                                                                                                      |                      |                      | 
                     |                         return 'one';                                              +|                                                                                                      |                      |                      | 
                     |                 when 2 then                                                        +|                                                                                                      |                      |                      | 
                     |                         return 'two';                                              +|                                                                                                      |                      |                      | 
                     |                 when 3 then                                                        +|                                                                                                      |                      |                      | 
                     |                         return 'three';                                            +|                                                                                                      |                      |                      | 
                     |                 else                                                               +|                                                                                                      |                      |                      | 
                     |                         return 'more than three';                                  +|                                                                                                      |                      |                      | 
                     |         end case;                                                                  +|                                                                                                      |                      |                      | 
                     | END;                                                                               +|                                                                                                      |                      |                      | 
                     | $function$;                                                                        +|                                                                                                      |                      |                      | 
                     |                                                                                     |                                                                                                      |                      |                      | 
(1 row)

show create function create_function_019;
      Function       |                                   Create Function                                   |                                               sql_mode                                               | character_set_client | collation_connection | Database Collation 
---------------------+-------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------+----------------------+----------------------+--------------------
 create_function_019 | CREATE DEFINER = test_function_definer FUNCTION public.create_function_019(integer)+| sql_mode_strict,sql_mode_full_group,pipes_as_concat,ansi_quotes,no_zero_date,pad_char_to_full_length | UTF8                 | C                    | C
                     |  RETURNS integer                                                                   +|                                                                                                      |                      |                      | 
                     |  LANGUAGE plpgsql                                                                  +|                                                                                                      |                      |                      | 
                     |  IMMUTABLE NOT FENCED NOT SHIPPABLE                                                +|                                                                                                      |                      |                      | 
                     | AS $function$                                                                      +|                                                                                                      |                      |                      | 
                     | BEGIN                                                                              +|                                                                                                      |                      |                      | 
                     |         while $1 < 10                                                              +|                                                                                                      |                      |                      | 
                     |                 do $1 := $1 + 1;                                                   +|                                                                                                      |                      |                      | 
                     |         end while;                                                                 +|                                                                                                      |                      |                      | 
                     |         return $1;                                                                 +|                                                                                                      |                      |                      | 
                     | END;                                                                               +|                                                                                                      |                      |                      | 
                     | $function$;                                                                        +|                                                                                                      |                      |                      | 
                     |                                                                                     |                                                                                                      |                      |                      | 
(1 row)

show create function create_function_020;
      Function       |                                   Create Function                                   |                                               sql_mode                                               | character_set_client | collation_connection | Database Collation 
---------------------+-------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------+----------------------+----------------------+--------------------
 create_function_020 | CREATE DEFINER = test_function_definer FUNCTION public.create_function_020(integer)+| sql_mode_strict,sql_mode_full_group,pipes_as_concat,ansi_quotes,no_zero_date,pad_char_to_full_length | UTF8                 | C                    | C
                     |  RETURNS integer                                                                   +|                                                                                                      |                      |                      | 
                     |  LANGUAGE plpgsql                                                                  +|                                                                                                      |                      |                      | 
                     |  IMMUTABLE NOT FENCED NOT SHIPPABLE                                                +|                                                                                                      |                      |                      | 
                     | AS $function$                                                                      +|                                                                                                      |                      |                      | 
                     | BEGIN                                                                              +|                                                                                                      |                      |                      | 
                     |         label: while $1 < 10                                                       +|                                                                                                      |                      |                      | 
                     |                 do $1 := $1 + 1;                                                   +|                                                                                                      |                      |                      | 
                     |         end while label;                                                           +|                                                                                                      |                      |                      | 
                     |         return $1;                                                                 +|                                                                                                      |                      |                      | 
                     | END;                                                                               +|                                                                                                      |                      |                      | 
                     | $function$;                                                                        +|                                                                                                      |                      |                      | 
                     |                                                                                     |                                                                                                      |                      |                      | 
(1 row)

select create_function_001();
 create_function_001 
---------------------
 
(1 row)

select create_function_002();
 create_function_002 
---------------------
 
(1 row)

select create_function_003();
 create_function_003 
---------------------
 
(1 row)

select create_function_004();
 create_function_004 
---------------------
 
(1 row)

select create_function_005();
 create_function_005 
---------------------
 
(1 row)

select create_function_006();
 create_function_006 
---------------------
 
(1 row)

select create_function_007();
 create_function_007 
---------------------
 
(1 row)

select create_function_008();
 create_function_008 
---------------------
 
(1 row)

select create_function_009();
 create_function_009 
---------------------
 
(1 row)

select create_function_010();
 create_function_010 
---------------------
 
(1 row)

select create_function_011(5);
 create_function_011 
---------------------
 
(1 row)

select create_function_012(5);
 create_function_012 
---------------------
 
(1 row)

select create_function_013();
NOTICE:  backbery : canada : 3
CONTEXT:  referenced column: create_function_013
NOTICE:  macrosoft : usa : 1
CONTEXT:  referenced column: create_function_013
NOTICE:  oracle : usa : 2
CONTEXT:  referenced column: create_function_013
 create_function_013 
---------------------
 
(1 row)

select create_function_014();
     create_function_014     
-----------------------------
 declare condition successed
(1 row)

select create_function_015();
 create_function_015 
---------------------
 
(1 row)

select create_function_016(5);
 create_function_016 
---------------------
                  10
(1 row)

select create_function_017(5);
 create_function_017 
---------------------
                  10
(1 row)

select create_function_018(5);
 create_function_018 
---------------------
 more than three
(1 row)

select create_function_019(5);
 create_function_019 
---------------------
                  10
(1 row)

select create_function_020(5);
 create_function_020 
---------------------
                  10
(1 row)

--alter function测试
--language sql
delimiter //;
create definer = test_function_definer function alter_function_001() returns void language plpgsql
BEGIN
        return;
END;
//
delimiter ;//
alter function alter_function_001 language sql;
--no sql
delimiter //;
create definer = test_function_definer function alter_function_002() returns void
BEGIN
        return;
END;
//
delimiter ;//
alter function alter_function_002 no sql;
--reads sql data
delimiter //;
create definer = test_function_definer function alter_function_003() returns void
BEGIN
        return;
END;
//
delimiter ;//
alter function alter_function_003 reads sql data;
--contains sql
delimiter //;
create definer = test_function_definer function alter_function_004() returns void
BEGIN
        return;
END;
//
delimiter ;//
alter function alter_function_004 contains sql;
--modifies sql data
delimiter //;
create definer = test_function_definer function alter_function_005() returns void
BEGIN
        return;
END;
//
delimiter ;//
alter function alter_function_005 modifies sql data;
--sql security
delimiter //;
create definer = test_function_definer function alter_function_006() returns void sql security definer
BEGIN
        return;
END;
//
delimiter ;//
alter function alter_function_006 sql security invoker;
delimiter //;
create definer = test_function_definer function alter_function_007() returns void sql security invoker
BEGIN
        return;
END;
//
delimiter ;//
alter function alter_function_007 sql security definer;
\df+ alter_function_001;
                                                                                            List of functions
 Schema |        Name        | Result data type | Argument data types |  Type  | Volatility |         Owner         | Language |      Source code       | Description | fencedmode | propackage | prokind 
--------+--------------------+------------------+---------------------+--------+------------+-----------------------+----------+------------------------+-------------+------------+------------+---------
 public | alter_function_001 | void             |                     | normal | volatile   | test_function_definer | plpgsql  |  BEGIN_B_PROC  return;+|             | f          | f          | f
        |                    |                  |                     |        |            |                       |          | END                    |             |            |            | 
(1 row)

\df+ alter_function_002;
                                                                                            List of functions
 Schema |        Name        | Result data type | Argument data types |  Type  | Volatility |         Owner         | Language |      Source code       | Description | fencedmode | propackage | prokind 
--------+--------------------+------------------+---------------------+--------+------------+-----------------------+----------+------------------------+-------------+------------+------------+---------
 public | alter_function_002 | void             |                     | normal | volatile   | test_function_definer | plpgsql  |  BEGIN_B_PROC  return;+|             | f          | f          | f
        |                    |                  |                     |        |            |                       |          | END                    |             |            |            | 
(1 row)

\df+ alter_function_003;
                                                                                            List of functions
 Schema |        Name        | Result data type | Argument data types |  Type  | Volatility |         Owner         | Language |      Source code       | Description | fencedmode | propackage | prokind 
--------+--------------------+------------------+---------------------+--------+------------+-----------------------+----------+------------------------+-------------+------------+------------+---------
 public | alter_function_003 | void             |                     | normal | volatile   | test_function_definer | plpgsql  |  BEGIN_B_PROC  return;+|             | f          | f          | f
        |                    |                  |                     |        |            |                       |          | END                    |             |            |            | 
(1 row)

\df+ alter_function_004;
                                                                                            List of functions
 Schema |        Name        | Result data type | Argument data types |  Type  | Volatility |         Owner         | Language |      Source code       | Description | fencedmode | propackage | prokind 
--------+--------------------+------------------+---------------------+--------+------------+-----------------------+----------+------------------------+-------------+------------+------------+---------
 public | alter_function_004 | void             |                     | normal | volatile   | test_function_definer | plpgsql  |  BEGIN_B_PROC  return;+|             | f          | f          | f
        |                    |                  |                     |        |            |                       |          | END                    |             |            |            | 
(1 row)

\df+ alter_function_005;
                                                                                            List of functions
 Schema |        Name        | Result data type | Argument data types |  Type  | Volatility |         Owner         | Language |      Source code       | Description | fencedmode | propackage | prokind 
--------+--------------------+------------------+---------------------+--------+------------+-----------------------+----------+------------------------+-------------+------------+------------+---------
 public | alter_function_005 | void             |                     | normal | volatile   | test_function_definer | plpgsql  |  BEGIN_B_PROC  return;+|             | f          | f          | f
        |                    |                  |                     |        |            |                       |          | END                    |             |            |            | 
(1 row)

\df+ alter_function_006;
                                                                                            List of functions
 Schema |        Name        | Result data type | Argument data types |  Type  | Volatility |         Owner         | Language |      Source code       | Description | fencedmode | propackage | prokind 
--------+--------------------+------------------+---------------------+--------+------------+-----------------------+----------+------------------------+-------------+------------+------------+---------
 public | alter_function_006 | void             |                     | normal | volatile   | test_function_definer | plpgsql  |  BEGIN_B_PROC  return;+|             | f          | f          | f
        |                    |                  |                     |        |            |                       |          | END                    |             |            |            | 
(1 row)

\df+ alter_function_007;
                                                                                            List of functions
 Schema |        Name        | Result data type | Argument data types |  Type  | Volatility |         Owner         | Language |      Source code       | Description | fencedmode | propackage | prokind 
--------+--------------------+------------------+---------------------+--------+------------+-----------------------+----------+------------------------+-------------+------------+------------+---------
 public | alter_function_007 | void             |                     | normal | volatile   | test_function_definer | plpgsql  |  BEGIN_B_PROC  return;+|             | f          | f          | f
        |                    |                  |                     |        |            |                       |          | END                    |             |            |            | 
(1 row)

--导入导出
\! @abs_bindir@/gs_dump dump_function_db -p @portstring@ -f @abs_bindir@/dump_function.tar -F t >/dev/null 2>&1; echo $?
0
drop function create_function_001;
drop function create_function_002;
drop function create_function_003;
drop function create_function_004;
drop function create_function_005;
drop function create_function_006;
drop function create_function_007;
drop function create_function_008;
drop function create_function_009;
drop function create_function_010;
drop function create_function_011;
drop function create_function_012;
drop function create_function_013;
drop function create_function_014;
drop function create_function_015;
drop function create_function_016;
drop function create_function_017;
drop function create_function_018;
drop function create_function_019;
drop function create_function_020;
drop function alter_function_001;
drop function alter_function_002;
drop function alter_function_003;
drop function alter_function_004;
drop function alter_function_005;
drop function alter_function_006;
drop function alter_function_007;
\! @abs_bindir@/gs_restore -d restore_function_db -p @portstring@ @abs_bindir@/dump_function.tar >/dev/null 2>&1; echo $?
0
\c restore_function_db
show lc_collate;
 lc_collate 
------------
 C
(1 row)

show create function create_function_001;
      Function       |                               Create Function                                |                                               sql_mode                                               | character_set_client | collation_connection | Database Collation 
---------------------+------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------+----------------------+----------------------+--------------------
 create_function_001 | CREATE DEFINER = test_function_definer FUNCTION public.create_function_001()+| sql_mode_strict,sql_mode_full_group,pipes_as_concat,ansi_quotes,no_zero_date,pad_char_to_full_length | UTF8                 | C                    | C
                     |  RETURNS void                                                               +|                                                                                                      |                      |                      | 
                     |  LANGUAGE plpgsql                                                           +|                                                                                                      |                      |                      | 
                     |  NOT FENCED NOT SHIPPABLE                                                   +|                                                                                                      |                      |                      | 
                     |     BEGIN       return;                                                     +|                                                                                                      |                      |                      | 
                     | END;                                                                        +|                                                                                                      |                      |                      | 
                     |                                                                              |                                                                                                      |                      |                      | 
(1 row)

show create function create_function_002;
      Function       |                               Create Function                                |                                               sql_mode                                               | character_set_client | collation_connection | Database Collation 
---------------------+------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------+----------------------+----------------------+--------------------
 create_function_002 | CREATE DEFINER = test_function_definer FUNCTION public.create_function_002()+| sql_mode_strict,sql_mode_full_group,pipes_as_concat,ansi_quotes,no_zero_date,pad_char_to_full_length | UTF8                 | C                    | C
                     |  RETURNS void                                                               +|                                                                                                      |                      |                      | 
                     |  LANGUAGE plpgsql                                                           +|                                                                                                      |                      |                      | 
                     |  NOT FENCED NOT SHIPPABLE                                                   +|                                                                                                      |                      |                      | 
                     |     BEGIN       return;                                                     +|                                                                                                      |                      |                      | 
                     | END;                                                                        +|                                                                                                      |                      |                      | 
                     |                                                                              |                                                                                                      |                      |                      | 
(1 row)

show create function create_function_003;
      Function       |                               Create Function                                |                                               sql_mode                                               | character_set_client | collation_connection | Database Collation 
---------------------+------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------+----------------------+----------------------+--------------------
 create_function_003 | CREATE DEFINER = test_function_definer FUNCTION public.create_function_003()+| sql_mode_strict,sql_mode_full_group,pipes_as_concat,ansi_quotes,no_zero_date,pad_char_to_full_length | UTF8                 | C                    | C
                     |  RETURNS void                                                               +|                                                                                                      |                      |                      | 
                     |  LANGUAGE plpgsql                                                           +|                                                                                                      |                      |                      | 
                     |  NOT FENCED NOT SHIPPABLE                                                   +|                                                                                                      |                      |                      | 
                     |     BEGIN       return;                                                     +|                                                                                                      |                      |                      | 
                     | END;                                                                        +|                                                                                                      |                      |                      | 
                     |                                                                              |                                                                                                      |                      |                      | 
(1 row)

show create function create_function_004;
      Function       |                               Create Function                                |                                               sql_mode                                               | character_set_client | collation_connection | Database Collation 
---------------------+------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------+----------------------+----------------------+--------------------
 create_function_004 | CREATE DEFINER = test_function_definer FUNCTION public.create_function_004()+| sql_mode_strict,sql_mode_full_group,pipes_as_concat,ansi_quotes,no_zero_date,pad_char_to_full_length | UTF8                 | C                    | C
                     |  RETURNS void                                                               +|                                                                                                      |                      |                      | 
                     |  LANGUAGE plpgsql                                                           +|                                                                                                      |                      |                      | 
                     |  NOT FENCED NOT SHIPPABLE                                                   +|                                                                                                      |                      |                      | 
                     |     BEGIN       return;                                                     +|                                                                                                      |                      |                      | 
                     | END;                                                                        +|                                                                                                      |                      |                      | 
                     |                                                                              |                                                                                                      |                      |                      | 
(1 row)

show create function create_function_005;
      Function       |                               Create Function                                |                                               sql_mode                                               | character_set_client | collation_connection | Database Collation 
---------------------+------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------+----------------------+----------------------+--------------------
 create_function_005 | CREATE DEFINER = test_function_definer FUNCTION public.create_function_005()+| sql_mode_strict,sql_mode_full_group,pipes_as_concat,ansi_quotes,no_zero_date,pad_char_to_full_length | UTF8                 | C                    | C
                     |  RETURNS void                                                               +|                                                                                                      |                      |                      | 
                     |  LANGUAGE plpgsql                                                           +|                                                                                                      |                      |                      | 
                     |  NOT FENCED NOT SHIPPABLE                                                   +|                                                                                                      |                      |                      | 
                     |     BEGIN       return;                                                     +|                                                                                                      |                      |                      | 
                     | END;                                                                        +|                                                                                                      |                      |                      | 
                     |                                                                              |                                                                                                      |                      |                      | 
(1 row)

show create function create_function_006;
      Function       |                               Create Function                                |                                               sql_mode                                               | character_set_client | collation_connection | Database Collation 
---------------------+------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------+----------------------+----------------------+--------------------
 create_function_006 | CREATE DEFINER = test_function_definer FUNCTION public.create_function_006()+| sql_mode_strict,sql_mode_full_group,pipes_as_concat,ansi_quotes,no_zero_date,pad_char_to_full_length | UTF8                 | C                    | C
                     |  RETURNS void                                                               +|                                                                                                      |                      |                      | 
                     |  LANGUAGE plpgsql                                                           +|                                                                                                      |                      |                      | 
                     |  NOT FENCED NOT SHIPPABLE                                                   +|                                                                                                      |                      |                      | 
                     |     BEGIN       return;                                                     +|                                                                                                      |                      |                      | 
                     | END;                                                                        +|                                                                                                      |                      |                      | 
                     |                                                                              |                                                                                                      |                      |                      | 
(1 row)

show create function create_function_007;
      Function       |                               Create Function                                |                                               sql_mode                                               | character_set_client | collation_connection | Database Collation 
---------------------+------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------+----------------------+----------------------+--------------------
 create_function_007 | CREATE DEFINER = test_function_definer FUNCTION public.create_function_007()+| sql_mode_strict,sql_mode_full_group,pipes_as_concat,ansi_quotes,no_zero_date,pad_char_to_full_length | UTF8                 | C                    | C
                     |  RETURNS void                                                               +|                                                                                                      |                      |                      | 
                     |  LANGUAGE plpgsql                                                           +|                                                                                                      |                      |                      | 
                     |  NOT FENCED NOT SHIPPABLE                                                   +|                                                                                                      |                      |                      | 
                     |     BEGIN       return;                                                     +|                                                                                                      |                      |                      | 
                     | END;                                                                        +|                                                                                                      |                      |                      | 
                     |                                                                              |                                                                                                      |                      |                      | 
(1 row)

show create function create_function_008;
      Function       |                               Create Function                                |                                               sql_mode                                               | character_set_client | collation_connection | Database Collation 
---------------------+------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------+----------------------+----------------------+--------------------
 create_function_008 | CREATE DEFINER = test_function_definer FUNCTION public.create_function_008()+| sql_mode_strict,sql_mode_full_group,pipes_as_concat,ansi_quotes,no_zero_date,pad_char_to_full_length | UTF8                 | C                    | C
                     |  RETURNS void                                                               +|                                                                                                      |                      |                      | 
                     |  LANGUAGE plpgsql                                                           +|                                                                                                      |                      |                      | 
                     |  SECURITY DEFINER NOT FENCED NOT SHIPPABLE                                  +|                                                                                                      |                      |                      | 
                     |     BEGIN       return;                                                     +|                                                                                                      |                      |                      | 
                     | END;                                                                        +|                                                                                                      |                      |                      | 
                     |                                                                              |                                                                                                      |                      |                      | 
(1 row)

show create function create_function_009;
      Function       |                               Create Function                                |                                               sql_mode                                               | character_set_client | collation_connection | Database Collation 
---------------------+------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------+----------------------+----------------------+--------------------
 create_function_009 | CREATE DEFINER = test_function_definer FUNCTION public.create_function_009()+| sql_mode_strict,sql_mode_full_group,pipes_as_concat,ansi_quotes,no_zero_date,pad_char_to_full_length | UTF8                 | C                    | C
                     |  RETURNS void                                                               +|                                                                                                      |                      |                      | 
                     |  LANGUAGE plpgsql                                                           +|                                                                                                      |                      |                      | 
                     |  NOT FENCED NOT SHIPPABLE                                                   +|                                                                                                      |                      |                      | 
                     |     BEGIN       return;                                                     +|                                                                                                      |                      |                      | 
                     | END;                                                                        +|                                                                                                      |                      |                      | 
                     |                                                                              |                                                                                                      |                      |                      | 
(1 row)

show create function create_function_010;
      Function       |                               Create Function                                |                                               sql_mode                                               | character_set_client | collation_connection | Database Collation 
---------------------+------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------+----------------------+----------------------+--------------------
 create_function_010 | CREATE DEFINER = test_function_definer FUNCTION public.create_function_010()+| sql_mode_strict,sql_mode_full_group,pipes_as_concat,ansi_quotes,no_zero_date,pad_char_to_full_length | UTF8                 | C                    | C
                     |  RETURNS void                                                               +|                                                                                                      |                      |                      | 
                     |  LANGUAGE plpgsql                                                           +|                                                                                                      |                      |                      | 
                     |  NOT FENCED NOT SHIPPABLE                                                   +|                                                                                                      |                      |                      | 
                     |     BEGIN       return;                                                     +|                                                                                                      |                      |                      | 
                     | END;                                                                        +|                                                                                                      |                      |                      | 
                     |                                                                              |                                                                                                      |                      |                      | 
(1 row)

show create function create_function_011;
      Function       |                                   Create Function                                   |                                               sql_mode                                               | character_set_client | collation_connection | Database Collation 
---------------------+-------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------+----------------------+----------------------+--------------------
 create_function_011 | CREATE DEFINER = test_function_definer FUNCTION public.create_function_011(integer)+| sql_mode_strict,sql_mode_full_group,pipes_as_concat,ansi_quotes,no_zero_date,pad_char_to_full_length | UTF8                 | C                    | C
                     |  RETURNS void                                                                      +|                                                                                                      |                      |                      | 
                     |  LANGUAGE plpgsql                                                                  +|                                                                                                      |                      |                      | 
                     |  IMMUTABLE NOT FENCED NOT SHIPPABLE                                                +|                                                                                                      |                      |                      | 
                     | AS $function$                                                                      +|                                                                                                      |                      |                      | 
                     | DECLARE                                                                            +|                                                                                                      |                      |                      | 
                     |         i int = 0;                                                                 +|                                                                                                      |                      |                      | 
                     | BEGIN                                                                              +|                                                                                                      |                      |                      | 
                     |         repeat                                                                     +|                                                                                                      |                      |                      | 
                     |                 i = i + 1;                                                         +|                                                                                                      |                      |                      | 
                     |                 until i > $1                                                       +|                                                                                                      |                      |                      | 
                     |         end repeat;                                                                +|                                                                                                      |                      |                      | 
                     | END;                                                                               +|                                                                                                      |                      |                      | 
                     | $function$;                                                                        +|                                                                                                      |                      |                      | 
                     |                                                                                     |                                                                                                      |                      |                      | 
(1 row)

show create function create_function_012;
      Function       |                                   Create Function                                   |                                               sql_mode                                               | character_set_client | collation_connection | Database Collation 
---------------------+-------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------+----------------------+----------------------+--------------------
 create_function_012 | CREATE DEFINER = test_function_definer FUNCTION public.create_function_012(integer)+| sql_mode_strict,sql_mode_full_group,pipes_as_concat,ansi_quotes,no_zero_date,pad_char_to_full_length | UTF8                 | C                    | C
                     |  RETURNS void                                                                      +|                                                                                                      |                      |                      | 
                     |  LANGUAGE plpgsql                                                                  +|                                                                                                      |                      |                      | 
                     |  IMMUTABLE NOT FENCED NOT SHIPPABLE                                                +|                                                                                                      |                      |                      | 
                     | AS $function$                                                                      +|                                                                                                      |                      |                      | 
                     | DECLARE                                                                            +|                                                                                                      |                      |                      | 
                     |         i int = 0;                                                                 +|                                                                                                      |                      |                      | 
                     | BEGIN                                                                              +|                                                                                                      |                      |                      | 
                     |         <<label>> repeat                                                           +|                                                                                                      |                      |                      | 
                     |                 i = i + 1;                                                         +|                                                                                                      |                      |                      | 
                     |                 until i > $1                                                       +|                                                                                                      |                      |                      | 
                     |         end repeat label;                                                          +|                                                                                                      |                      |                      | 
                     | END;                                                                               +|                                                                                                      |                      |                      | 
                     | $function$;                                                                        +|                                                                                                      |                      |                      | 
                     |                                                                                     |                                                                                                      |                      |                      | 
(1 row)

show create function create_function_013;
      Function       |                                 Create Function                                  |                                               sql_mode                                               | character_set_client | collation_connection | Database Collation 
---------------------+----------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------+----------------------+----------------------+--------------------
 create_function_013 | CREATE DEFINER = test_function_definer FUNCTION public.create_function_013()    +| sql_mode_strict,sql_mode_full_group,pipes_as_concat,ansi_quotes,no_zero_date,pad_char_to_full_length | UTF8                 | C                    | C
                     |  RETURNS void                                                                   +|                                                                                                      |                      |                      | 
                     |  LANGUAGE plpgsql                                                               +|                                                                                                      |                      |                      | 
                     |  IMMUTABLE NOT FENCED NOT SHIPPABLE                                             +|                                                                                                      |                      |                      | 
                     | AS $function$                                                                   +|                                                                                                      |                      |                      | 
                     | DECLARE                                                                         +|                                                                                                      |                      |                      | 
                     |         company_name varchar(100);                                              +|                                                                                                      |                      |                      | 
                     |         company_loc varchar(100);                                               +|                                                                                                      |                      |                      | 
                     |         company_no integer;                                                     +|                                                                                                      |                      |                      | 
                     | begin                                                                           +|                                                                                                      |                      |                      | 
                     |         declare c1_all cursor is                                                +|                                                                                                      |                      |                      | 
                     |                 select name, loc, no from company order by 1, 2, 3;             +|                                                                                                      |                      |                      | 
                     |         if not c1_all%isopen then open c1_all;                                  +|                                                                                                      |                      |                      | 
                     |         end if;                                                                 +|                                                                                                      |                      |                      | 
                     |         loop                                                                    +|                                                                                                      |                      |                      | 
                     |                 fetch c1_all into company_name, company_loc, company_no;        +|                                                                                                      |                      |                      | 
                     |                 exit when c1_all%notfound;                                      +|                                                                                                      |                      |                      | 
                     |                 raise notice '% : % : %', company_name, company_loc, company_no;+|                                                                                                      |                      |                      | 
                     |         end loop;                                                               +|                                                                                                      |                      |                      | 
                     |         if c1_all%isopen then                                                   +|                                                                                                      |                      |                      | 
                     |                 close c1_all;                                                   +|                                                                                                      |                      |                      | 
                     |         end if;                                                                 +|                                                                                                      |                      |                      | 
                     | end;                                                                            +|                                                                                                      |                      |                      | 
                     | $function$;                                                                     +|                                                                                                      |                      |                      | 
                     |                                                                                  |                                                                                                      |                      |                      | 
(1 row)

show create function create_function_014;
      Function       |                               Create Function                                |                                               sql_mode                                               | character_set_client | collation_connection | Database Collation 
---------------------+------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------+----------------------+----------------------+--------------------
 create_function_014 | CREATE DEFINER = test_function_definer FUNCTION public.create_function_014()+| sql_mode_strict,sql_mode_full_group,pipes_as_concat,ansi_quotes,no_zero_date,pad_char_to_full_length | UTF8                 | C                    | C
                     |  RETURNS text                                                               +|                                                                                                      |                      |                      | 
                     |  LANGUAGE plpgsql                                                           +|                                                                                                      |                      |                      | 
                     |  IMMUTABLE NOT FENCED NOT SHIPPABLE                                         +|                                                                                                      |                      |                      | 
                     | AS $function$                                                               +|                                                                                                      |                      |                      | 
                     | BEGIN                                                                       +|                                                                                                      |                      |                      | 
                     |         declare DISVISION_ZERO condition for 1;                             +|                                                                                                      |                      |                      | 
                     |         return 'declare condition successed';                               +|                                                                                                      |                      |                      | 
                     | END;                                                                        +|                                                                                                      |                      |                      | 
                     | $function$;                                                                 +|                                                                                                      |                      |                      | 
                     |                                                                              |                                                                                                      |                      |                      | 
(1 row)

show create function create_function_015;
      Function       |                               Create Function                                |                                               sql_mode                                               | character_set_client | collation_connection | Database Collation 
---------------------+------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------+----------------------+----------------------+--------------------
 create_function_015 | CREATE DEFINER = test_function_definer FUNCTION public.create_function_015()+| sql_mode_strict,sql_mode_full_group,pipes_as_concat,ansi_quotes,no_zero_date,pad_char_to_full_length | UTF8                 | C                    | C
                     |  RETURNS void                                                               +|                                                                                                      |                      |                      | 
                     |  LANGUAGE plpgsql                                                           +|                                                                                                      |                      |                      | 
                     |  IMMUTABLE NOT FENCED NOT SHIPPABLE                                         +|                                                                                                      |                      |                      | 
                     | AS $function$                                                               +|                                                                                                      |                      |                      | 
                     | DECLARE                                                                     +|                                                                                                      |                      |                      | 
                     |         x,y,z int =1;                                                       +|                                                                                                      |                      |                      | 
                     | BEGIN                                                                       +|                                                                                                      |                      |                      | 
                     |         y := 2;                                                             +|                                                                                                      |                      |                      | 
                     |         z := 4;                                                             +|                                                                                                      |                      |                      | 
                     |         do x + x;                                                           +|                                                                                                      |                      |                      | 
                     |         do y * z;                                                           +|                                                                                                      |                      |                      | 
                     |         do x + x, y * z;                                                    +|                                                                                                      |                      |                      | 
                     |         do sin(x);                                                          +|                                                                                                      |                      |                      | 
                     |         do pg_sleep(1);                                                     +|                                                                                                      |                      |                      | 
                     | END;                                                                        +|                                                                                                      |                      |                      | 
                     | $function$;                                                                 +|                                                                                                      |                      |                      | 
                     |                                                                              |                                                                                                      |                      |                      | 
(1 row)

show create function create_function_016;
      Function       |                                   Create Function                                   |                                               sql_mode                                               | character_set_client | collation_connection | Database Collation 
---------------------+-------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------+----------------------+----------------------+--------------------
 create_function_016 | CREATE DEFINER = test_function_definer FUNCTION public.create_function_016(integer)+| sql_mode_strict,sql_mode_full_group,pipes_as_concat,ansi_quotes,no_zero_date,pad_char_to_full_length | UTF8                 | C                    | C
                     |  RETURNS integer                                                                   +|                                                                                                      |                      |                      | 
                     |  LANGUAGE plpgsql                                                                  +|                                                                                                      |                      |                      | 
                     |  IMMUTABLE NOT FENCED NOT SHIPPABLE                                                +|                                                                                                      |                      |                      | 
                     | AS $function$                                                                      +|                                                                                                      |                      |                      | 
                     | BEGIN                                                                              +|                                                                                                      |                      |                      | 
                     |         label1: loop                                                               +|                                                                                                      |                      |                      | 
                     |         $1 := $1 + 1;                                                              +|                                                                                                      |                      |                      | 
                     |         if $1 < 10 then iterate label1;                                            +|                                                                                                      |                      |                      | 
                     |         end if;                                                                    +|                                                                                                      |                      |                      | 
                     |         leave label1;                                                              +|                                                                                                      |                      |                      | 
                     |         end loop label1;                                                           +|                                                                                                      |                      |                      | 
                     |         return $1;                                                                 +|                                                                                                      |                      |                      | 
                     | END;                                                                               +|                                                                                                      |                      |                      | 
                     | $function$;                                                                        +|                                                                                                      |                      |                      | 
                     |                                                                                     |                                                                                                      |                      |                      | 
(1 row)

show create function create_function_017;
      Function       |                                   Create Function                                   |                                               sql_mode                                               | character_set_client | collation_connection | Database Collation 
---------------------+-------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------+----------------------+----------------------+--------------------
 create_function_017 | CREATE DEFINER = test_function_definer FUNCTION public.create_function_017(integer)+| sql_mode_strict,sql_mode_full_group,pipes_as_concat,ansi_quotes,no_zero_date,pad_char_to_full_length | UTF8                 | C                    | C
                     |  RETURNS integer                                                                   +|                                                                                                      |                      |                      | 
                     |  LANGUAGE plpgsql                                                                  +|                                                                                                      |                      |                      | 
                     |  IMMUTABLE NOT FENCED NOT SHIPPABLE                                                +|                                                                                                      |                      |                      | 
                     | AS $function$                                                                      +|                                                                                                      |                      |                      | 
                     | BEGIN                                                                              +|                                                                                                      |                      |                      | 
                     |         loop                                                                       +|                                                                                                      |                      |                      | 
                     |                 $1 := $1 + 1;                                                      +|                                                                                                      |                      |                      | 
                     |                 if $1 < 10 then iterate;                                           +|                                                                                                      |                      |                      | 
                     |                 end if;                                                            +|                                                                                                      |                      |                      | 
                     |                 leave;                                                             +|                                                                                                      |                      |                      | 
                     |         end loop;                                                                  +|                                                                                                      |                      |                      | 
                     |         return $1;                                                                 +|                                                                                                      |                      |                      | 
                     | END;                                                                               +|                                                                                                      |                      |                      | 
                     | $function$;                                                                        +|                                                                                                      |                      |                      | 
                     |                                                                                     |                                                                                                      |                      |                      | 
(1 row)

show create function create_function_018;
      Function       |                                   Create Function                                   |                                               sql_mode                                               | character_set_client | collation_connection | Database Collation 
---------------------+-------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------+----------------------+----------------------+--------------------
 create_function_018 | CREATE DEFINER = test_function_definer FUNCTION public.create_function_018(integer)+| sql_mode_strict,sql_mode_full_group,pipes_as_concat,ansi_quotes,no_zero_date,pad_char_to_full_length | UTF8                 | C                    | C
                     |  RETURNS text                                                                      +|                                                                                                      |                      |                      | 
                     |  LANGUAGE plpgsql                                                                  +|                                                                                                      |                      |                      | 
                     |  IMMUTABLE NOT FENCED NOT SHIPPABLE                                                +|                                                                                                      |                      |                      | 
                     | AS $function$                                                                      +|                                                                                                      |                      |                      | 
                     | BEGIN                                                                              +|                                                                                                      |                      |                      | 
                     |         case $1                                                                    +|                                                                                                      |                      |                      | 
                     |                 when 1 then                                                        +|                                                                                                      |                      |                      | 
                     |                         return 'one';                                              +|                                                                                                      |                      |                      | 
                     |                 when 2 then                                                        +|                                                                                                      |                      |                      | 
                     |                         return 'two';                                              +|                                                                                                      |                      |                      | 
                     |                 when 3 then                                                        +|                                                                                                      |                      |                      | 
                     |                         return 'three';                                            +|                                                                                                      |                      |                      | 
                     |                 else                                                               +|                                                                                                      |                      |                      | 
                     |                         return 'more than three';                                  +|                                                                                                      |                      |                      | 
                     |         end case;                                                                  +|                                                                                                      |                      |                      | 
                     | END;                                                                               +|                                                                                                      |                      |                      | 
                     | $function$;                                                                        +|                                                                                                      |                      |                      | 
                     |                                                                                     |                                                                                                      |                      |                      | 
(1 row)

show create function create_function_019;
      Function       |                                   Create Function                                   |                                               sql_mode                                               | character_set_client | collation_connection | Database Collation 
---------------------+-------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------+----------------------+----------------------+--------------------
 create_function_019 | CREATE DEFINER = test_function_definer FUNCTION public.create_function_019(integer)+| sql_mode_strict,sql_mode_full_group,pipes_as_concat,ansi_quotes,no_zero_date,pad_char_to_full_length | UTF8                 | C                    | C
                     |  RETURNS integer                                                                   +|                                                                                                      |                      |                      | 
                     |  LANGUAGE plpgsql                                                                  +|                                                                                                      |                      |                      | 
                     |  IMMUTABLE NOT FENCED NOT SHIPPABLE                                                +|                                                                                                      |                      |                      | 
                     | AS $function$                                                                      +|                                                                                                      |                      |                      | 
                     | BEGIN                                                                              +|                                                                                                      |                      |                      | 
                     |         while $1 < 10                                                              +|                                                                                                      |                      |                      | 
                     |                 do $1 := $1 + 1;                                                   +|                                                                                                      |                      |                      | 
                     |         end while;                                                                 +|                                                                                                      |                      |                      | 
                     |         return $1;                                                                 +|                                                                                                      |                      |                      | 
                     | END;                                                                               +|                                                                                                      |                      |                      | 
                     | $function$;                                                                        +|                                                                                                      |                      |                      | 
                     |                                                                                     |                                                                                                      |                      |                      | 
(1 row)

show create function create_function_020;
      Function       |                                   Create Function                                   |                                               sql_mode                                               | character_set_client | collation_connection | Database Collation 
---------------------+-------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------+----------------------+----------------------+--------------------
 create_function_020 | CREATE DEFINER = test_function_definer FUNCTION public.create_function_020(integer)+| sql_mode_strict,sql_mode_full_group,pipes_as_concat,ansi_quotes,no_zero_date,pad_char_to_full_length | UTF8                 | C                    | C
                     |  RETURNS integer                                                                   +|                                                                                                      |                      |                      | 
                     |  LANGUAGE plpgsql                                                                  +|                                                                                                      |                      |                      | 
                     |  IMMUTABLE NOT FENCED NOT SHIPPABLE                                                +|                                                                                                      |                      |                      | 
                     | AS $function$                                                                      +|                                                                                                      |                      |                      | 
                     | BEGIN                                                                              +|                                                                                                      |                      |                      | 
                     |         label: while $1 < 10                                                       +|                                                                                                      |                      |                      | 
                     |                 do $1 := $1 + 1;                                                   +|                                                                                                      |                      |                      | 
                     |         end while label;                                                           +|                                                                                                      |                      |                      | 
                     |         return $1;                                                                 +|                                                                                                      |                      |                      | 
                     | END;                                                                               +|                                                                                                      |                      |                      | 
                     | $function$;                                                                        +|                                                                                                      |                      |                      | 
                     |                                                                                     |                                                                                                      |                      |                      | 
(1 row)

select create_function_001();
 create_function_001 
---------------------
 
(1 row)

select create_function_002();
 create_function_002 
---------------------
 
(1 row)

select create_function_003();
 create_function_003 
---------------------
 
(1 row)

select create_function_004();
 create_function_004 
---------------------
 
(1 row)

select create_function_005();
 create_function_005 
---------------------
 
(1 row)

select create_function_006();
 create_function_006 
---------------------
 
(1 row)

select create_function_007();
 create_function_007 
---------------------
 
(1 row)

select create_function_008();
 create_function_008 
---------------------
 
(1 row)

select create_function_009();
 create_function_009 
---------------------
 
(1 row)

select create_function_010();
 create_function_010 
---------------------
 
(1 row)

select create_function_011(5);
 create_function_011 
---------------------
 
(1 row)

select create_function_012(5);
 create_function_012 
---------------------
 
(1 row)

select create_function_013();
NOTICE:  backbery : canada : 3
CONTEXT:  referenced column: create_function_013
NOTICE:  macrosoft : usa : 1
CONTEXT:  referenced column: create_function_013
NOTICE:  oracle : usa : 2
CONTEXT:  referenced column: create_function_013
 create_function_013 
---------------------
 
(1 row)

select create_function_014();
     create_function_014     
-----------------------------
 declare condition successed
(1 row)

select create_function_015();
 create_function_015 
---------------------
 
(1 row)

select create_function_016(5);
 create_function_016 
---------------------
                  10
(1 row)

select create_function_017(5);
 create_function_017 
---------------------
                  10
(1 row)

select create_function_018(5);
 create_function_018 
---------------------
 more than three
(1 row)

select create_function_019(5);
 create_function_019 
---------------------
                  10
(1 row)

select create_function_020(5);
 create_function_020 
---------------------
                  10
(1 row)

\df+ alter_function_001;
                                                                                            List of functions
 Schema |        Name        | Result data type | Argument data types |  Type  | Volatility |         Owner         | Language |      Source code       | Description | fencedmode | propackage | prokind 
--------+--------------------+------------------+---------------------+--------+------------+-----------------------+----------+------------------------+-------------+------------+------------+---------
 public | alter_function_001 | void             |                     | normal | volatile   | test_function_definer | plpgsql  |  BEGIN_B_PROC  return;+|             | f          | f          | f
        |                    |                  |                     |        |            |                       |          | END                    |             |            |            | 
(1 row)

\df+ alter_function_002;
                                                                                            List of functions
 Schema |        Name        | Result data type | Argument data types |  Type  | Volatility |         Owner         | Language |      Source code       | Description | fencedmode | propackage | prokind 
--------+--------------------+------------------+---------------------+--------+------------+-----------------------+----------+------------------------+-------------+------------+------------+---------
 public | alter_function_002 | void             |                     | normal | volatile   | test_function_definer | plpgsql  |  BEGIN_B_PROC  return;+|             | f          | f          | f
        |                    |                  |                     |        |            |                       |          | END                    |             |            |            | 
(1 row)

\df+ alter_function_003;
                                                                                            List of functions
 Schema |        Name        | Result data type | Argument data types |  Type  | Volatility |         Owner         | Language |      Source code       | Description | fencedmode | propackage | prokind 
--------+--------------------+------------------+---------------------+--------+------------+-----------------------+----------+------------------------+-------------+------------+------------+---------
 public | alter_function_003 | void             |                     | normal | volatile   | test_function_definer | plpgsql  |  BEGIN_B_PROC  return;+|             | f          | f          | f
        |                    |                  |                     |        |            |                       |          | END                    |             |            |            | 
(1 row)

\df+ alter_function_004;
                                                                                            List of functions
 Schema |        Name        | Result data type | Argument data types |  Type  | Volatility |         Owner         | Language |      Source code       | Description | fencedmode | propackage | prokind 
--------+--------------------+------------------+---------------------+--------+------------+-----------------------+----------+------------------------+-------------+------------+------------+---------
 public | alter_function_004 | void             |                     | normal | volatile   | test_function_definer | plpgsql  |  BEGIN_B_PROC  return;+|             | f          | f          | f
        |                    |                  |                     |        |            |                       |          | END                    |             |            |            | 
(1 row)

\df+ alter_function_005;
                                                                                            List of functions
 Schema |        Name        | Result data type | Argument data types |  Type  | Volatility |         Owner         | Language |      Source code       | Description | fencedmode | propackage | prokind 
--------+--------------------+------------------+---------------------+--------+------------+-----------------------+----------+------------------------+-------------+------------+------------+---------
 public | alter_function_005 | void             |                     | normal | volatile   | test_function_definer | plpgsql  |  BEGIN_B_PROC  return;+|             | f          | f          | f
        |                    |                  |                     |        |            |                       |          | END                    |             |            |            | 
(1 row)

\df+ alter_function_006;
                                                                                            List of functions
 Schema |        Name        | Result data type | Argument data types |  Type  | Volatility |         Owner         | Language |      Source code       | Description | fencedmode | propackage | prokind 
--------+--------------------+------------------+---------------------+--------+------------+-----------------------+----------+------------------------+-------------+------------+------------+---------
 public | alter_function_006 | void             |                     | normal | volatile   | test_function_definer | plpgsql  |  BEGIN_B_PROC  return;+|             | f          | f          | f
        |                    |                  |                     |        |            |                       |          | END                    |             |            |            | 
(1 row)

\df+ alter_function_007;
                                                                                            List of functions
 Schema |        Name        | Result data type | Argument data types |  Type  | Volatility |         Owner         | Language |      Source code       | Description | fencedmode | propackage | prokind 
--------+--------------------+------------------+---------------------+--------+------------+-----------------------+----------+------------------------+-------------+------------+------------+---------
 public | alter_function_007 | void             |                     | normal | volatile   | test_function_definer | plpgsql  |  BEGIN_B_PROC  return;+|             | f          | f          | f
        |                    |                  |                     |        |            |                       |          | END                    |             |            |            | 
(1 row)

\c postgres
drop database if exists restore_function_db;
drop database if exists dump_function_db;
drop user if exists test_function_definer;
